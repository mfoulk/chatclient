(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00ee":function(e,t,n){var r=n("b622"),i=r("toStringTag"),s={};s[i]="z",e.exports="[object z]"===String(s)},"0121":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("bf67"),i=n("3f22"),s=n("3da9"),o=n("faa1"),a=n("0546"),c=n("3c45"),u=n("f72f");class l{}t.InsightsItem=l;class d extends a.SyncEntity{constructor(e,t,n,r){super(t,n),this.descriptor=e,this.cache=new u.Cache,r&&r.forEach(e=>{this.cache.store(e.key,{key:e.key,value:e.data},e.revision)})}get sid(){return this.descriptor.sid}get uniqueName(){return null}get type(){return d.type}static get type(){return"live_query"}get lastEventId(){return this.descriptor.last_event_id}get indexName(){return this.descriptor.indexName}get queryString(){return this.descriptor.queryExpression}get queryUri(){return this.descriptor.queryUri}get liveQueryDescriptor(){return this.descriptor}onRemoved(){}getItems(){const e={};return this.cache.forEach((t,n)=>{e[t]=n.value}),e}_update(e,t){switch(e.type){case"live_query_item_updated":this.handleItemMutated(e.item_key,e.item_data,e.item_revision);break;case"live_query_item_removed":this.handleItemRemoved(e.item_key,e.item_revision);break;case"live_query_updated":this.handleBatchUpdate(e.items);break}t&&this._advanceLastEventId(e.last_event_id)}handleItemMutated(e,t,n){if(this.shouldIgnoreEvent(e,n))s.default.trace(`Item ${e} update skipped, revision: ${n}`);else{const r={key:e,value:t};this.cache.store(e,r,n),this.broadcastEventToListeners("itemUpdated",r)}}handleItemRemoved(e,t){const n=null===t;this.shouldIgnoreEvent(e,t)?s.default.trace(`Item ${e} delete skipped, revision: ${t}`):(this.cache.delete(e,t,n),this.broadcastEventToListeners("itemRemoved",{key:e}))}handleBatchUpdate(e){let t={};null!=e&&e.forEach(e=>{t[e.key]={data:e.data,revision:e.revision}}),this.cache.forEach((e,n)=>{const r=t[e];null!=r?this.handleItemMutated(e,r.data,r.revision):this.handleItemRemoved(e,null),delete t[e]});for(let n in t)this.handleItemMutated(n,t[n].data,t[n].revision)}shouldIgnoreEvent(e,t){return null!=e&&null!=t&&this.cache.isKnown(e,t)}_advanceLastEventId(e,t){this.lastEventId<e&&(this.descriptor.last_event_id=e)}}async function f(e){let{network:t,queryString:n,uri:r,type:s}=e;if(null==n)throw new i.SyncError("Invalid query",400,54507);const o={query_string:n};s===h.type&&(o.type=s);let a=await t.post(r,o,void 0,!0);return a.body}t.LiveQueryImpl=d,t.queryItems=f;class h extends c.Closeable{constructor(e){super(),this.liveQueryImpl=e,this.liveQueryImpl.attach(this)}static get type(){return d.type}get type(){return d.type}get lastEventId(){return this.liveQueryImpl.lastEventId}get sid(){return this.liveQueryImpl.sid}close(){super.close(),this.liveQueryImpl.detach(this.listenerUuid)}getItems(){return this.ensureNotClosed(),this.liveQueryImpl.getItems()}}t.LiveQuery=h;class p extends o.EventEmitter{constructor(e){super(),this.queryExpression=null,this.items={},Object.assign(this,e),this.updateIndexName(e.indexName)}static get type(){return"instant_query"}get type(){return p.type}async search(e){return this.items={},f({network:this.network,uri:this.queryUri,queryString:e}).then(t=>{this.queryExpression=e,t.items&&t.items.forEach(e=>{this.items[e.key]=e.data}),this.emit("searchResult",this.getItems())}).catch(t=>{throw s.default.error(`Error '${t.message}' while executing query '${e}'`),this.queryExpression=null,t})}async subscribe(){return null==this.queryExpression?Promise.reject(new i.SyncError("Invalid query",400,54507)):this.liveQueryCreator(this.indexName,this.queryExpression)}getItems(){return this.items}updateIndexName(e){if(!e||"string"!==typeof e)throw new Error("Index name must contain a non-empty string value");this.indexName=e,this.queryUri=this.generateQueryUri(this.indexName)}generateQueryUri(e){return new r.UriBuilder(this.insightsUri).pathSegment(e).pathSegment("Items").build()}}t.InstantQuery=p,t.default=h},"02a0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwilsockConnector=void 0;const r=n("11c1"),i=n("dcb6");class s extends i.Connector{constructor(e,t,n){super(n),this.twilsock=t,this.context=e,e.id=r.v4(),this.twilsock.on("stateChanged",e=>{"connected"!==e&&this.emit("transportReady",!1)}),this.twilsock.on("registered",n=>{e&&n===e.id&&"connected"===t.state&&this.emit("transportReady",!0)})}setNotificationId(...e){}updateToken(e){}async updateContextRequest(e){let t={product_id:this.context.productId,notification_protocol_version:4,endpoint_platform:this.context.platform,message_types:e};this.emit("transportReady",!1),await this.twilsock.setNotificationsContext(this.context.id,t)}async updateRegistration(e,t){if(t.has("messageType"))return await this.updateContextRequest(Array.from(e.messageTypes)),e}removeRegistration(){return this.twilsock.removeNotificationsContext(this.context.id)}}t.TwilsockConnector=s},"0366":function(e,t,n){var r=n("1c0b");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},"04bb":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("6ab6");class i{constructor(e){this.id=e}static create(e){if(e instanceof Object&&"storage_id"in e)return new i(e.storage_id);throw new r.TwilsockError('Field "storage_id" is missing')}}t.OfflineProductStorage=i},"04d1":function(e,t,n){var r=n("342f"),i=r.match(/firefox\/(\d+)/i);e.exports=!!i&&+i[1]},"0538":function(e,t,n){"use strict";var r=n("1c0b"),i=n("861d"),s=[].slice,o={},a=function(e,t,n){if(!(t in o)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";o[t]=Function("C,a","return new C("+r.join(",")+")")}return o[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=s.call(arguments,1),o=function(){var r=n.concat(s.call(arguments));return this instanceof o?a(t,r.length,r):t.apply(e,r)};return i(t.prototype)&&(o.prototype=t.prototype),o}},"0546":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t){this.services=e,this.removalHandler=t,this.subscriptionState="none",this._attachedListeners=new Map}_advanceLastEventId(e,t){}reportFailure(e){404===e.status?this.onRemoved(!1):this.broadcastEventToListeners("failure",e)}_subscribe(){this.services.router.subscribe(this.sid,this)}_unsubscribe(){this.services.router.unsubscribe(this.sid)}_setSubscriptionState(e){this.subscriptionState=e,this.broadcastEventToListeners("_subscriptionStateChanged",e)}close(){this._unsubscribe(),null!=this.removalHandler&&this.removalHandler(this.type,this.sid,this.uniqueName)}attach(e){const t=e.listenerUuid,n=this._attachedListeners.get(t);n||(this._attachedListeners.size||this._subscribe(),this._attachedListeners.set(t,e))}detach(e){this._attachedListeners.delete(e),this._attachedListeners.size||this.close()}broadcastEventToListeners(e,t){for(let n of this._attachedListeners.values())n.emit(e,t)}}t.SyncEntity=r,t.default=r},"057f":function(e,t,n){var r=n("fc6a"),i=n("241c").f,s={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return i(e)}catch(t){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==s.call(e)?a(e):i(r(e))}},"0676":function(e,t){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},"06cf":function(e,t,n){var r=n("83ab"),i=n("d1e7"),s=n("5c6c"),o=n("fc6a"),a=n("a04b"),c=n("5135"),u=n("0cfb"),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=o(e),t=a(t),u)try{return l(e,t)}catch(n){}if(c(e,t))return s(!i.f.call(e,t),e[t])}},"0b25":function(e,t,n){var r=n("a691"),i=n("50c4");e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length or index");return n}},"0b42":function(e,t,n){var r=n("861d"),i=n("e8b5"),s=n("b622"),o=s("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)?r(t)&&(t=t[o],null===t&&(t=void 0)):t=void 0),void 0===t?Array:t}},"0cb2":function(e,t,n){var r=n("7b0b"),i=Math.floor,s="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,a=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,c,u,l){var d=n+e.length,f=c.length,h=a;return void 0!==u&&(u=r(u),h=o),s.call(l,h,(function(r,s){var o;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":o=u[s.slice(1,-1)];break;default:var a=+s;if(0===a)return r;if(a>f){var l=i(a/10);return 0===l?r:l<=f?void 0===c[l-1]?s.charAt(1):c[l-1]+s.charAt(1):r}o=c[a-1]}return void 0===o?"":o}))}},"0cfb":function(e,t,n){var r=n("83ab"),i=n("d039"),s=n("cc12");e.exports=!r&&!i((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},"0d09":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("3e62");class i extends r.AbstractMessage{constructor(e){super(),this.method="update",this.token=e}}t.Update=i},"0f48":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0;class r{constructor(e,t={}){let n=t.notifications||{};const r=n.region||t.region||"us1",i=`https://ers.${r}.twilio.com/v1/registrations`;this.registrarUrl=n.ersUrl||i,this._token=e}updateToken(e){this._token=e}get token(){return this._token}}t.Configuration=r},"107c":function(e,t,n){var r=n("d039");e.exports=r((function(){var e=RegExp("(?<a>b)","string".charAt(5));return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},"11b0":function(e,t,n){function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630"),e.exports=r,e.exports["default"]=e.exports,e.exports.__esModule=!0},"11c1":function(e,t,n){var r=n("c437"),i=n("c64e"),s=i;s.v1=r,s.v4=i,e.exports=s},1448:function(e,t,n){var r=n("dfb9"),i=n("b6b7");e.exports=function(e,t){return r(i(e),t)}},"145e":function(e,t,n){"use strict";var r=n("7b0b"),i=n("23cb"),s=n("50c4"),o=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),a=s(n.length),c=i(e,a),u=i(t,a),l=arguments.length>2?arguments[2]:void 0,d=o((void 0===l?a:i(l,a))-u,a-c),f=1;u<c&&c<u+d&&(f=-1,u+=d-1,c+=d-1);while(d-- >0)u in n?n[c]=n[u]:delete n[c],c+=f,u+=f;return n}},"14c3":function(e,t,n){var r=n("c6b6"),i=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var s=n.call(e,t);if("object"!==typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"159b":function(e,t,n){var r=n("da84"),i=n("fdbc"),s=n("17c2"),o=n("9112");for(var a in i){var c=r[a],u=c&&c.prototype;if(u&&u.forEach!==s)try{o(u,"forEach",s)}catch(l){u.forEach=s}}},"170b":function(e,t,n){"use strict";var r=n("ebb5"),i=n("50c4"),s=n("23cb"),o=n("b6b7"),a=r.aTypedArray,c=r.exportTypedArrayMethod;c("subarray",(function(e,t){var n=a(this),r=n.length,c=s(e,r),u=o(n);return new u(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,i((void 0===t?r:s(t,r))-c))}))},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,i=n("a640"),s=i("forEach");e.exports=s?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"182d":function(e,t,n){var r=n("f8cd");e.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},"19aa":function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},"1be4":function(e,t,n){var r=n("d066");e.exports=r("document","documentElement")},"1c0b":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"1c7e":function(e,t,n){var r=n("b622"),i=r("iterator"),s=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){s=!0}};a[i]=function(){return this},Array.from(a,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!s)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(c){}return n}},"1cdc":function(e,t,n){var r=n("342f");e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(r)},"1d80":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},"1da1":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("d3b7");function r(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,s){var o=e.apply(t,n);function a(e){r(o,i,s,a,c,"next",e)}function c(e){r(o,i,s,a,c,"throw",e)}a(void 0)}))}}},"1dde":function(e,t,n){var r=n("d039"),i=n("b622"),s=n("2d00"),o=i("species");e.exports=function(e){return s>=51||!r((function(){var t=[],n=t.constructor={};return n[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"1fce":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("20c9"),i=n("bf67"),s=n("3f22"),o=n("3da9"),a=n("0546"),c=n("d5d4"),u=n("ff63"),l=n("f72f"),d=n("a1a5"),f=n("3c45");class h extends a.SyncEntity{constructor(e,t,n){super(e,n);const r=(e,t)=>"number"===typeof t.ttl?{ttl:t.ttl}:e;this.updateMergingQueue=new d.NamespacedMergingQueue(r),this.cache=new l.Cache,this.descriptor=t,this.descriptor.date_updated=new Date(this.descriptor.date_updated)}get uri(){return this.descriptor.url}get revision(){return this.descriptor.revision}get lastEventId(){return this.descriptor.last_event_id}get links(){return this.descriptor.links}get dateExpires(){return this.descriptor.date_expires}static get type(){return"list"}get type(){return"list"}get indexName(){}get queryString(){}get sid(){return this.descriptor.sid}get uniqueName(){return this.descriptor.unique_name||null}get dateUpdated(){return this.descriptor.date_updated}async _addOrUpdateItemOnServer(e,t,n,r){const i={data:t};void 0!==r&&(i.ttl=r);const s=await this.services.network.post(e,i,n);return s.body.data=t,s.body.date_updated=new Date(s.body.date_updated),s.body}async push(e,t){let n=(t||{}).ttl;r.validateOptionalTtl(n);let i=await this._addOrUpdateItemOnServer(this.links.items,e,void 0,n),s=Number(i.index);return this._handleItemMutated(s,i.url,i.last_event_id,i.revision,e,i.date_updated,i.date_expires,!0,!1),this.cache.get(s)}async set(e,t,n){const i=n||{};return r.validateOptionalTtl(i.ttl),this.updateMergingQueue.squashAndAdd(e,i,n=>this._updateItemUnconditionally(e,t,n.ttl))}async _updateItemUnconditionally(e,t,n){let r=await this.get(e);const i=await this._addOrUpdateItemOnServer(r.uri,t,void 0,n);return this._handleItemMutated(e,i.url,i.last_event_id,i.revision,i.data,i.date_updated,i.date_expires,!1,!1),this.cache.get(e)}async _updateItemWithIfMatch(e,t,n){const i=await this.get(e),s=t(r.deepClone(i.data));if(!s)return i;{const r=i.revision;try{const t=await this._addOrUpdateItemOnServer(i.uri,s,r,n);return this._handleItemMutated(e,t.url,t.last_event_id,t.revision,t.data,t.date_updated,t.date_expires,!1,!1),this.cache.get(e)}catch(o){if(412===o.status)return await this._getItemFromServer(e),this._updateItemWithIfMatch(e,t,n);throw o}}}async mutate(e,t,n){const i=n||{};return r.validateOptionalTtl(i.ttl),this.updateMergingQueue.add(e,i,n=>this._updateItemWithIfMatch(e,t,n.ttl))}async update(e,t,n){return this.mutate(e,e=>Object.assign(e,t),n)}async remove(e){const t=await this.get(e),n=r.deepClone(t.data),i=await this.services.network.delete(t.uri);this._handleItemRemoved(e,i.body.last_event_id,n,new Date(i.body.date_updated),!1)}async get(e){let t=this.cache.get(e);return t||this._getItemFromServer(e)}async _getItemFromServer(e){let t=await this.queryItems({index:e});if(t.items.length<1)throw new s.SyncError(`No item with index ${e} found`,404,54151);return t.items[0]}async queryItems(e){e=e||{};const t=new i.UriBuilder(this.links.items).queryParam("From",e.from).queryParam("PageSize",e.limit).queryParam("Index",e.index).queryParam("PageToken",e.pageToken).queryParam("Order",e.order).build();let n=await this.services.network.get(t),r=n.body.items.map(e=>{e.date_updated=new Date(e.date_updated);let t=this.cache.get(e.index);return t?this._handleItemMutated(e.index,e.url,e.last_event_id,e.revision,e.data,e.date_updated,e.date_expires,!1,!0):this.cache.store(Number(e.index),new c.ListItem({index:Number(e.index),uri:e.url,revision:e.revision,lastEventId:e.last_event_id,dateUpdated:e.date_updated,dateExpires:e.date_expires,data:e.data}),e.last_event_id),this.cache.get(e.index)}),s=n.body.meta;return new u.Paginator(r,e=>this.queryItems({pageToken:e}),s.previous_token,s.next_token)}async getItems(e){return e=e||{},r.validatePageSize(e.pageSize),e.limit=e.pageSize||e.limit||50,e.order=e.order||"asc",this.queryItems(e)}async getContext(){if(!this.context){let e=await this.services.network.get(this.links.context);this._updateContextIfRequired(e.body.data,e.body.last_event_id)}return this.context}async setTtl(e){r.validateMandatoryTtl(e);try{const t={ttl:e},n=await this.services.network.post(this.uri,t);this.descriptor.date_expires=n.body.date_expires}catch(t){throw 404===t.status&&this.onRemoved(!1),t}}async setItemTtl(e,t){r.validateMandatoryTtl(t);let n=await this.get(e);const i={ttl:t},s=await this.services.network.post(n.uri,i);n.updateDateExpires(s.body.date_expires)}async removeList(){await this.services.network.delete(this.uri),this.onRemoved(!0)}onRemoved(e){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:e})}shouldIgnoreEvent(e,t){return this.cache.isKnown(e,t)}_update(e,t){const n=Number(e.item_index);switch(e.date_created=new Date(e.date_created),e.type){case"list_item_added":case"list_item_updated":this._handleItemMutated(n,e.item_url,e.id,e.item_revision,e.item_data,e.date_created,void 0,"list_item_added"===e.type,!0);break;case"list_item_removed":this._handleItemRemoved(n,e.id,e.item_data,e.date_created,!0);break;case"list_context_updated":this._handleContextUpdate(e.context_data,e.id,e.date_created);break;case"list_removed":this.onRemoved(!1);break}t&&this._advanceLastEventId(e.id,e.list_revision)}_advanceLastEventId(e,t){this.lastEventId<e&&(this.descriptor.last_event_id=e,t&&(this.descriptor.revision=t))}_updateRootDateUpdated(e){(!this.descriptor.date_updated||e.getTime()>this.descriptor.date_updated.getTime())&&(this.descriptor.date_updated=e,this.services.storage.update(this.type,this.sid,this.uniqueName,{date_updated:e}))}_handleItemMutated(e,t,n,i,s,a,u,l,d){if(this.shouldIgnoreEvent(e,n))return void o.default.trace("Item ",e," update skipped, current:",this.lastEventId,", remote:",n);this._updateRootDateUpdated(a);const f=this.cache.get(e);if(!f){const r=new c.ListItem({index:e,uri:t,lastEventId:n,revision:i,data:s,dateUpdated:a,dateExpires:u});return this.cache.store(e,r,n),void this.emitItemMutationEvent(r,d,l)}const h=r.deepClone(f.data);f.update(n,i,s,a),this.cache.store(e,f,n),void 0!==u&&f.updateDateExpires(u),this.emitItemMutationEvent(f,d,!1,h)}emitItemMutationEvent(e,t,n,r=null){const i=n?"itemAdded":"itemUpdated",s={item:e,isLocal:!t};n||(s.previousItemData=r),this.broadcastEventToListeners(i,s)}_handleItemRemoved(e,t,n,r,i){this._updateRootDateUpdated(r),this.cache.delete(e,t),this.broadcastEventToListeners("itemRemoved",{index:e,isLocal:!i,previousItemData:n})}_handleContextUpdate(e,t,n){this._updateRootDateUpdated(n),this._updateContextIfRequired(e,t)&&this.broadcastEventToListeners("contextUpdated",{context:e,isLocal:!1})}_updateContextIfRequired(e,t){return!this.contextEventId||t>this.contextEventId?(this.context=e,this.contextEventId=t,!0):(o.default.trace("Context update skipped, current:",this.lastEventId,", remote:",t),!1)}}t.SyncListImpl=h;class p extends f.default{constructor(e){super(),this.syncListImpl=e,this.syncListImpl.attach(this)}get uri(){return this.syncListImpl.uri}get revision(){return this.syncListImpl.revision}get lastEventId(){return this.syncListImpl.lastEventId}get links(){return this.syncListImpl.links}get dateExpires(){return this.syncListImpl.dateExpires}static get type(){return h.type}get type(){return h.type}get sid(){return this.syncListImpl.sid}get uniqueName(){return this.syncListImpl.uniqueName}get dateUpdated(){return this.syncListImpl.dateUpdated}async push(e,t){return this.ensureNotClosed(),this.syncListImpl.push(e,t)}async set(e,t,n){return this.ensureNotClosed(),this.syncListImpl.set(e,t,n)}async mutate(e,t,n){return this.ensureNotClosed(),this.syncListImpl.mutate(e,t,n)}async update(e,t,n){return this.ensureNotClosed(),this.syncListImpl.update(e,t,n)}async remove(e){return this.ensureNotClosed(),this.syncListImpl.remove(e)}async get(e){return this.ensureNotClosed(),this.syncListImpl.get(e)}async getContext(){return this.ensureNotClosed(),this.syncListImpl.getContext()}async getItems(e){return this.ensureNotClosed(),this.syncListImpl.getItems(e)}async setTtl(e){return this.ensureNotClosed(),this.syncListImpl.setTtl(e)}async setItemTtl(e,t){return this.ensureNotClosed(),this.syncListImpl.setItemTtl(e,t)}async removeList(){return this.ensureNotClosed(),this.syncListImpl.removeList()}close(){super.close(),this.syncListImpl.detach(this.listenerUuid)}}t.SyncList=p,t.default=p},"20c9":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("3f22");function i(e){return JSON.parse(JSON.stringify(e))}function s(e,t){if(t&&void 0===e)return;const n=typeof e;if("number"!==n||!h(e)){const t="object"===n?"object":`'${e}' of type '${n}'`;throw new r.default("Invalid TTL, expected a positive integer of type number, was "+t,400,54011)}}function o(e){if(void 0===e)return;const t=typeof e;if("string"!==t)throw new Error(`Invalid ID type, expected a string, got '${t}'`)}function a(e){s(e,!0)}function c(e){s(e,!1)}function u(e){const t=void 0===e||f(e);if(!t)throw new r.default(`Invalid pageSize parameter. Expected a positive integer, was '${e}'.`,400,20007)}function l(e){if(!["open_or_create","open_existing","create_new"].includes(e))throw new Error("Invalid open mode. Expected one of { 'create_new', 'open_or_create', 'open_existing' }")}function d(e){return!isNaN(parseInt(e))&&isFinite(e)}function f(e){return d(e)&&e>0}function h(e){return d(e)&&e>=0}t.deepClone=i,t.validateId=o,t.validateOptionalTtl=a,t.validateMandatoryTtl=c,t.validatePageSize=u,t.validateMode=l},2182:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("3e62");class i extends r.AbstractMessage{constructor(){super(),this.method="close"}}t.Close=i},"219c":function(e,t,n){"use strict";var r=n("ebb5"),i=n("da84"),s=n("d039"),o=n("1c0b"),a=n("50c4"),c=n("addb"),u=n("04d1"),l=n("d998"),d=n("2d00"),f=n("512c"),h=r.aTypedArray,p=r.exportTypedArrayMethod,m=i.Uint16Array,y=m&&m.prototype.sort,v=!!y&&!s((function(){var e=new m(2);e.sort(null),e.sort({})})),g=!!y&&!s((function(){if(d)return d<74;if(u)return u<67;if(l)return!0;if(f)return f<602;var e,t,n=new m(516),r=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(n.sort((function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0})),b=function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!==n?-1:t!==t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}};p("sort",(function(e){var t=this;if(void 0!==e&&o(e),g)return y.call(t,e);h(t);var n,r=a(t.length),i=Array(r);for(n=0;n<r;n++)i[n]=t[n];for(i=c(t,b(e)),n=0;n<r;n++)t[n]=i[n];return t}),!g||v)},2236:function(e,t,n){var r=n("5a43");function i(e){if(Array.isArray(e))return r(e)}e.exports=i,e.exports["default"]=e.exports,e.exports.__esModule=!0},2266:function(e,t,n){var r=n("825a"),i=n("e95a"),s=n("50c4"),o=n("0366"),a=n("35a1"),c=n("2a62"),u=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var l,d,f,h,p,m,y,v=n&&n.that,g=!(!n||!n.AS_ENTRIES),b=!(!n||!n.IS_ITERATOR),w=!(!n||!n.INTERRUPTED),x=o(t,v,1+g+w),_=function(e){return l&&c(l),new u(!0,e)},k=function(e){return g?(r(e),w?x(e[0],e[1],_):x(e[0],e[1])):w?x(e,_):x(e)};if(b)l=e;else{if(d=a(e),"function"!=typeof d)throw TypeError("Target is not iterable");if(i(d)){for(f=0,h=s(e.length);h>f;f++)if(p=k(e[f]),p&&p instanceof u)return p;return new u(!1)}l=d.call(e)}m=l.next;while(!(y=m.call(l)).done){try{p=k(y.value)}catch(S){throw c(l),S}if("object"==typeof p&&p&&p instanceof u)return p}return new u(!1)}},2366:function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);function i(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}e.exports=i},"23b0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("faac");class i{static getMetadata(e){"undefined"!==typeof navigator&&r.parse(navigator.userAgent);let t=e&&e.clientMetadata?e.clientMetadata:{};const n=["ver","env","envv","os","osv","osa","type","sdk","sdkv","dev","devv","devt","app","appv"],i={env:r.name,envv:r.version,os:r.os.family,osv:r.os.version,osa:r.os.architecture,sdk:"js-default"};let s={};return n.filter(e=>e in t||e in i).forEach(e=>s[e]=e in t?t[e]:i[e]),s}}t.Metadata=i},"23cb":function(e,t,n){var r=n("a691"),i=Math.max,s=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):s(n,t)}},"23e7":function(e,t,n){var r=n("da84"),i=n("06cf").f,s=n("9112"),o=n("6eeb"),a=n("ce4e"),c=n("e893"),u=n("94ca");e.exports=function(e,t){var n,l,d,f,h,p,m=e.target,y=e.global,v=e.stat;if(l=y?r:v?r[m]||a(m,{}):(r[m]||{}).prototype,l)for(d in t){if(h=t[d],e.noTargetGet?(p=i(l,d),f=p&&p.value):f=l[d],n=u(y?d:m+(v?".":"#")+d,e.forced),!n&&void 0!==f){if(typeof h===typeof f)continue;c(h,f)}(e.sham||f&&f.sham)&&s(h,"sham",!0),o(l,d,h,e)}}},"241c":function(e,t,n){var r=n("ca84"),i=n("7839"),s=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,s)}},"25a1":function(e,t,n){"use strict";var r=n("ebb5"),i=n("d58f").right,s=r.aTypedArray,o=r.exportTypedArrayMethod;o("reduceRight",(function(e){return i(s(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},"25f0":function(e,t,n){"use strict";var r=n("6eeb"),i=n("825a"),s=n("577e"),o=n("d039"),a=n("ad6d"),c="toString",u=RegExp.prototype,l=u[c],d=o((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),f=l.name!=c;(d||f)&&r(RegExp.prototype,c,(function(){var e=i(this),t=s(e.source),n=e.flags,r=s(void 0===n&&e instanceof RegExp&&!("flags"in u)?a.call(e):n);return"/"+t+"/"+r}),{unsafe:!0})},2626:function(e,t,n){"use strict";var r=n("d066"),i=n("9bf2"),s=n("b622"),o=n("83ab"),a=s("species");e.exports=function(e){var t=r(e),n=i.f;o&&t&&!t[a]&&n(t,a,{configurable:!0,get:function(){return this}})}},"278c":function(e,t,n){var r=n("c135"),i=n("9b42"),s=n("6613"),o=n("c240");function a(e,t){return r(e)||i(e,t)||s(e,t)||o()}e.exports=a,e.exports["default"]=e.exports,e.exports.__esModule=!0},2909:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){if(Array.isArray(e))return r(e)}n.d(t,"a",(function(){return c}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function s(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n("fb6a"),n("b0c0");function o(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return i(e)||s(e)||o(e)||a()}},2954:function(e,t,n){"use strict";var r=n("ebb5"),i=n("b6b7"),s=n("d039"),o=r.aTypedArray,a=r.exportTypedArrayMethod,c=[].slice,u=s((function(){new Int8Array(1).slice()}));a("slice",(function(e,t){var n=c.call(o(this),e,t),r=i(this),s=0,a=n.length,u=new r(a);while(a>s)u[s]=n[s++];return u}),u)},"2a03":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("20c9"),i=n("bf67"),s=n("3f22"),o=n("3da9"),a=n("0546"),c=n("98ae"),u=n("ff63"),l=n("f72f"),d=n("a1a5"),f=n("3c45");class h extends a.SyncEntity{constructor(e,t,n){super(e,n);const r=(e,t)=>"number"===typeof t.ttl?{ttl:t.ttl}:e;this.updateMergingQueue=new d.NamespacedMergingQueue(r),this.cache=new l.Cache,this.descriptor=t,this.descriptor.date_updated=new Date(this.descriptor.date_updated),t.items&&t.items.forEach(e=>{e.date_updated=new Date(e.date_updated),this.cache.store(e.key,new c.MapItem(e),e.last_event_id)})}get uri(){return this.descriptor.url}get links(){return this.descriptor.links}get revision(){return this.descriptor.revision}get lastEventId(){return this.descriptor.last_event_id}get dateExpires(){return this.descriptor.date_expires}static get type(){return"map"}get type(){return"map"}get indexName(){}get queryString(){}get sid(){return this.descriptor.sid}get uniqueName(){return this.descriptor.unique_name||null}get dateUpdated(){return this.descriptor.date_updated}async set(e,t,n){const i=n||{};return r.validateOptionalTtl(i.ttl),this.updateMergingQueue.squashAndAdd(e,i,n=>this._putItemUnconditionally(e,t,n.ttl))}async get(e){if(null===e||void 0===e)throw new s.SyncError("Item key may not be empty",400,54209);return this.cache.has(e)?this.cache.get(e):this._getItemFromServer(e)}async _getItemFromServer(e){let t=await this.queryItems({key:e});if(t.items.length<1)throw new s.SyncError("The specified Map Item does not exist",404,54201);return t.items[0]}async mutate(e,t,n){const i=n||{};return r.validateOptionalTtl(i.ttl),this.updateMergingQueue.add(e,i,n=>this._putItemWithIfMatch(e,t,n.ttl))}async update(e,t,n){return this.mutate(e,e=>Object.assign(e,t),n)}async _putItemUnconditionally(e,t,n){const r=await this._putItemToServer(e,t,void 0,n),i=r.item;return this._handleItemMutated(i.key,i.url,i.last_event_id,i.revision,i.data,i.date_updated,i.date_expires,r.added,!1),this.cache.get(i.key)}async _putItemWithIfMatch(e,t,n){const i=await this.get(e).catch(t=>{if(404===t.status)return new c.MapItem({key:e,data:{},last_event_id:-1,revision:"-1",url:null,date_updated:null,date_expires:null});throw t});let s=t(r.deepClone(i.data));if(!s)return i;{let r=i.revision;try{const t=await this._putItemToServer(e,s,r,n),i=t.item;return this._handleItemMutated(i.key,i.url,i.last_event_id,i.revision,i.data,i.date_updated,i.date_expires,t.added,!1),this.cache.get(i.key)}catch(o){if(412===o.status)return await this._getItemFromServer(e),this._putItemWithIfMatch(e,t,n);throw o}}}async _putItemToServer(e,t,n,r){const s=new i.UriBuilder(this.links.items).pathSegment(e).build(),o={data:t};void 0!==r&&(o.ttl=r);try{const e=await this.services.network.put(s,o,n),r=e.body;r.data=t,r.date_updated=new Date(r.date_updated);const i=201===e.status.code;return{added:i,item:r}}catch(a){throw 404===a.status&&this.onRemoved(!1),a}}async remove(e){const t=await this.get(e),n=r.deepClone(t.data),i=await this.services.network.delete(t.uri);this._handleItemRemoved(e,i.body.last_event_id,n,new Date(i.body.date_updated),!1)}async queryItems(e){e=e||{};const t=new i.UriBuilder(this.links.items).queryParam("From",e.from).queryParam("PageSize",e.limit).queryParam("Key",e.key).queryParam("PageToken",e.pageToken).queryParam("Order",e.order).build();let n=await this.services.network.get(t),r=n.body.items.map(e=>{e.date_updated=new Date(e.date_updated);let t=this.cache.get(e.key);return t?this._handleItemMutated(e.key,e.url,e.last_event_id,e.revision,e.data,e.date_updated,e.date_expires,!1,!0):this.cache.store(e.key,new c.MapItem(e),e.last_event_id),this.cache.get(e.key)});const s=n.body.meta;return new u.Paginator(r,e=>this.queryItems({pageToken:e}),s.previous_token,s.next_token)}async getItems(e){return e=e||{},r.validatePageSize(e.pageSize),e.limit=e.pageSize||e.limit||50,e.order=e.order||"asc",this.queryItems(e)}shouldIgnoreEvent(e,t){return this.cache.isKnown(e,t)}_update(e,t){switch(e.date_created=new Date(e.date_created),e.type){case"map_item_added":case"map_item_updated":this._handleItemMutated(e.item_key,e.item_url,e.id,e.item_revision,e.item_data,e.date_created,void 0,"map_item_added"===e.type,!0);break;case"map_item_removed":this._handleItemRemoved(e.item_key,e.id,e.item_data,e.date_created,!0);break;case"map_removed":this.onRemoved(!1);break}t&&this._advanceLastEventId(e.id,e.map_revision)}_advanceLastEventId(e,t){this.lastEventId<e&&(this.descriptor.last_event_id=e,t&&(this.descriptor.revision=t))}_updateRootDateUpdated(e){(!this.descriptor.date_updated||e.getTime()>this.descriptor.date_updated.getTime())&&(this.descriptor.date_updated=e,this.services.storage.update(this.type,this.sid,this.uniqueName,{date_updated:e}))}_handleItemMutated(e,t,n,i,s,a,u,l,d){if(this.shouldIgnoreEvent(e,n))return void o.default.trace("Item ",e," update skipped, current:",this.lastEventId,", remote:",n);this._updateRootDateUpdated(a);const f=this.cache.get(e);if(!f){const r=new c.MapItem({key:e,url:t,last_event_id:n,revision:i,data:s,date_updated:a,date_expires:u});return this.cache.store(e,r,n),void this.emitItemMutationEvent(r,d,l)}const h=r.deepClone(f.data);f.update(n,i,s,a),this.cache.store(e,f,n),void 0!==u&&f.updateDateExpires(u),this.emitItemMutationEvent(f,d,!1,h)}emitItemMutationEvent(e,t,n,r=null){const i=n?"itemAdded":"itemUpdated",s={item:e,isLocal:!t};n||(s.previousItemData=r),this.broadcastEventToListeners(i,s)}_handleItemRemoved(e,t,n,r,i){this._updateRootDateUpdated(r),this.cache.delete(e,t),this.broadcastEventToListeners("itemRemoved",{key:e,isLocal:!i,previousItemData:n})}onRemoved(e){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:e})}async setTtl(e){r.validateMandatoryTtl(e);try{const t={ttl:e},n=await this.services.network.post(this.uri,t);this.descriptor.date_expires=n.body.date_expires}catch(t){throw 404===t.status&&this.onRemoved(!1),t}}async setItemTtl(e,t){r.validateMandatoryTtl(t);let n=await this.get(e);const i={ttl:t},s=await this.services.network.post(n.uri,i);n.updateDateExpires(s.body.date_expires)}async removeMap(){await this.services.network.delete(this.uri),this.onRemoved(!0)}}t.SyncMapImpl=h;class p extends f.Closeable{constructor(e){super(),this.syncMapImpl=e,this.syncMapImpl.attach(this)}get uri(){return this.syncMapImpl.uri}get links(){return this.syncMapImpl.links}get revision(){return this.syncMapImpl.revision}get lastEventId(){return this.syncMapImpl.lastEventId}get dateExpires(){return this.syncMapImpl.dateExpires}static get type(){return h.type}get type(){return h.type}get sid(){return this.syncMapImpl.sid}get uniqueName(){return this.syncMapImpl.uniqueName}get dateUpdated(){return this.syncMapImpl.dateUpdated}async set(e,t,n){return this.ensureNotClosed(),this.syncMapImpl.set(e,t,n)}async get(e){return this.ensureNotClosed(),this.syncMapImpl.get(e)}async mutate(e,t,n){return this.ensureNotClosed(),this.syncMapImpl.mutate(e,t,n)}async update(e,t,n){return this.ensureNotClosed(),this.syncMapImpl.update(e,t,n)}async remove(e){return this.ensureNotClosed(),this.syncMapImpl.remove(e)}async getItems(e){return this.ensureNotClosed(),this.syncMapImpl.getItems(e)}async setTtl(e){return this.ensureNotClosed(),this.syncMapImpl.setTtl(e)}async setItemTtl(e,t){return this.ensureNotClosed(),this.syncMapImpl.setItemTtl(e,t)}async removeMap(){this.ensureNotClosed(),await this.syncMapImpl.removeMap()}close(){super.close(),this.syncMapImpl.detach(this.listenerUuid)}}t.SyncMap=p,t.default=p},"2a62":function(e,t,n){var r=n("825a");e.exports=function(e){var t=e["return"];if(void 0!==t)return r(t.call(e)).value}},"2cf4":function(e,t,n){var r,i,s,o,a=n("da84"),c=n("d039"),u=n("0366"),l=n("1be4"),d=n("cc12"),f=n("1cdc"),h=n("605d"),p=a.setImmediate,m=a.clearImmediate,y=a.process,v=a.MessageChannel,g=a.Dispatch,b=0,w={},x="onreadystatechange";try{r=a.location}catch(E){}var _=function(e){if(w.hasOwnProperty(e)){var t=w[e];delete w[e],t()}},k=function(e){return function(){_(e)}},S=function(e){_(e.data)},T=function(e){a.postMessage(String(e),r.protocol+"//"+r.host)};p&&m||(p=function(e){var t=[],n=arguments.length,r=1;while(n>r)t.push(arguments[r++]);return w[++b]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(b),b},m=function(e){delete w[e]},h?i=function(e){y.nextTick(k(e))}:g&&g.now?i=function(e){g.now(k(e))}:v&&!f?(s=new v,o=s.port2,s.port1.onmessage=S,i=u(o.postMessage,o,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&r&&"file:"!==r.protocol&&!c(T)?(i=T,a.addEventListener("message",S,!1)):i=x in d("script")?function(e){l.appendChild(d("script"))[x]=function(){l.removeChild(this),_(e)}}:function(e){setTimeout(k(e),0)}),e.exports={set:p,clear:m}},"2d00":function(e,t,n){var r,i,s=n("da84"),o=n("342f"),a=s.process,c=s.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l?(r=l.split("."),i=r[0]<4?1:r[0]+r[1]):o&&(r=o.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/),r&&(i=r[1]))),e.exports=i&&+i},"2d05":function(e,t,n){"use strict";function r(e){return void 0===e?"undefined":null===e?"null":Array.isArray(e)?"array":typeof e}function i(e){if(null==e||"object"!=typeof e)return e;if(e.constructor==Array){for(var n=e.length,r=new Array(n),s=0;s<n;s++)r[s]=i(e[s]);return r}var o={};for(var a in e)t.hasOwnProperty.call(e,a)&&(o[a]=i(e[a]));return o}Object.defineProperty(t,"__esModule",{value:!0}),t.clone=t.objectType=t.hasOwnProperty=void 0,t.hasOwnProperty=Object.prototype.hasOwnProperty,t.objectType=r,t.clone=i},"2f95":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTests=t.createPatch=t.applyPatch=void 0;var r=n("6f40"),i=n("309f"),s=n("4685");function o(e,t){return t.map((function(t){return i.apply(e,t)}))}function a(e){function t(n,r,i){var o=e(n,r,i);return Array.isArray(o)?o:s.diffAny(n,r,i,t)}return t}function c(e,t,n){var i=new r.Pointer;return(n?a(n):s.diffAny)(e,t,i)}function u(e,t){var n=r.Pointer.fromJSON(t).evaluate(e);if(void 0!==n)return{op:"test",path:t,value:n.value}}function l(e,t){var n=new Array;return t.filter(s.isDestructive).forEach((function(t){var r=u(e,t.path);if(r&&n.push(r),"from"in t){var i=u(e,t.from);i&&n.push(i)}})),n}t.applyPatch=o,t.createPatch=c,t.createTests=l},"2fec":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t){this.config=e,this.storageId=null;try{this.storage=t||sessionStorage}catch(n){}}storageKey(e,t){return`${this.storageId}::${e}::${t}`}get isReady(){return this.config.sessionStorageEnabled&&!!this.storageId}updateStorageId(e){this.storageId=e}store(e,t,n){return this.isReady?this._store(this.storageKey(e,t),n):null}read(e,t){return this.isReady?this._read(this.storageKey(e,t)):null}remove(e,t,n){if(!this.isReady)return null;try{this.storage.removeItem(this.storageKey(e,t)),n&&this.storage.removeItem(this.storageKey(e,n))}catch(r){}}update(e,t,n,r){if(!this.isReady)return null;this._apply(this.storageKey(e,t),r),n&&this._apply(this.storageKey(e,n),r)}_store(e,t){try{this.storage.setItem(e,JSON.stringify(t))}catch(n){}}_read(e){try{let t=this.storage.getItem(e);if(t)return JSON.parse(t)}catch(t){}return null}_apply(e,t){let n=this._read(e);if(!n)return!1;this._store(e,Object.assign(n,t))}}t.SessionStorage=r},"309f":function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.apply=t.InvalidOperationError=t.test=t.copy=t.move=t.replace=t.remove=t.add=t.TestError=t.MissingError=void 0;var i=n("6f40"),s=n("2d05"),o=n("3630"),a=function(e){function t(t){var n=e.call(this,"Value required at path: "+t)||this;return n.path=t,n.name="MissingError",n}return r(t,e),t}(Error);t.MissingError=a;var c=function(e){function t(t,n){var r=e.call(this,"Test failed: "+t+" != "+n)||this;return r.actual=t,r.expected=n,r.name="TestError",r}return r(t,e),t}(Error);function u(e,t,n){if(Array.isArray(e))if("-"==t)e.push(n);else{var r=parseInt(t,10);e.splice(r,0,n)}else e[t]=n}function l(e,t){if(Array.isArray(e)){var n=parseInt(t,10);e.splice(n,1)}else delete e[t]}function d(e,t){var n=i.Pointer.fromJSON(t.path).evaluate(e);return void 0===n.parent?new a(t.path):(u(n.parent,n.key,s.clone(t.value)),null)}function f(e,t){var n=i.Pointer.fromJSON(t.path).evaluate(e);return void 0===n.value?new a(t.path):(l(n.parent,n.key),null)}function h(e,t){var n=i.Pointer.fromJSON(t.path).evaluate(e);if(null===n.parent)return new a(t.path);if(Array.isArray(n.parent)){if(parseInt(n.key,10)>=n.parent.length)return new a(t.path)}else if(void 0===n.value)return new a(t.path);return n.parent[n.key]=t.value,null}function p(e,t){var n=i.Pointer.fromJSON(t.from).evaluate(e);if(void 0===n.value)return new a(t.from);var r=i.Pointer.fromJSON(t.path).evaluate(e);return void 0===r.parent?new a(t.path):(l(n.parent,n.key),u(r.parent,r.key,n.value),null)}function m(e,t){var n=i.Pointer.fromJSON(t.from).evaluate(e);if(void 0===n.value)return new a(t.from);var r=i.Pointer.fromJSON(t.path).evaluate(e);return void 0===r.parent?new a(t.path):(u(r.parent,r.key,s.clone(n.value)),null)}function y(e,t){var n=i.Pointer.fromJSON(t.path).evaluate(e),r=o.compare(n.value,t.value);return r?null:new c(n.value,t.value)}t.TestError=c,t.add=d,t.remove=f,t.replace=h,t.move=p,t.copy=m,t.test=y;var v=function(e){function t(t){var n=e.call(this,"Invalid operation: "+t.op)||this;return n.operation=t,n.name="InvalidOperationError",n}return r(t,e),t}(Error);function g(e,t){switch(t.op){case"add":return d(e,t);case"remove":return f(e,t);case"replace":return h(e,t);case"move":return p(e,t);case"copy":return m(e,t);case"test":return y(e,t)}return new v(t)}t.InvalidOperationError=v,t.apply=g},"319d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("5c7d"),i=r.getLogger("twilsock");function s(e,t){return[`${(new Date).toISOString()} Twilsock ${e}:`].concat(Array.from(t))}class o{constructor(e){this.prefix="",this.prefix=null!==e&&void 0!==e&&e.length>0?" "+e+":":""}setLevel(e){i.setLevel(e)}static setLevel(e){i.setLevel(e)}trace(...e){i.debug.apply(null,s("T",e))}debug(...e){i.debug.apply(null,s("D",e))}info(...e){i.info.apply(null,s("I",e))}warn(...e){i.warn.apply(null,s("W",e))}error(...e){i.error.apply(null,s("E",e))}static trace(...e){i.trace.apply(null,s("T",e))}static debug(...e){i.debug.apply(null,s("D",e))}static info(...e){i.info.apply(null,s("I",e))}static warn(...e){i.warn.apply(null,s("W",e))}static error(...e){i.error.apply(null,s("E",e))}}t.Logger=o;let a=new o("");t.log=a},3280:function(e,t,n){"use strict";var r=n("ebb5"),i=n("e58c"),s=r.aTypedArray,o=r.exportTypedArrayMethod;o("lastIndexOf",(function(e){return i.apply(s(this),arguments)}))},3410:function(e,t,n){var r=n("23e7"),i=n("d039"),s=n("7b0b"),o=n("e163"),a=n("e177"),c=i((function(){o(1)}));r({target:"Object",stat:!0,forced:c,sham:!a},{getPrototypeOf:function(e){return o(s(e))}})},"342f":function(e,t,n){var r=n("d066");e.exports=r("navigator","userAgent")||""},"35a1":function(e,t,n){var r=n("f5df"),i=n("3f8c"),s=n("b622"),o=s("iterator");e.exports=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},3630:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compare=void 0;var r=n("2d05");function i(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(!o(e[r],t[r]))return!1;return!0}function s(e,t){var n=Object.keys(e),i=Object.keys(t),s=n.length;if(s!==i.length)return!1;for(var a=0;a<s;a++){var c=n[a];if(!r.hasOwnProperty.call(t,c)||!o(e[c],t[c]))return!1}return!0}function o(e,t){if(e===t)return!0;var n=r.objectType(e),o=r.objectType(t);return"array"==n&&"array"==o?i(e,t):"object"==n&&"object"==o&&s(e,t)}t.compare=o},"36c6":function(e,t,n){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports["default"]=e.exports,e.exports.__esModule=!0,r(t)}n("3410"),e.exports=r,e.exports["default"]=e.exports,e.exports.__esModule=!0},"37e8":function(e,t,n){var r=n("83ab"),i=n("9bf2"),s=n("825a"),o=n("df75");e.exports=r?Object.defineProperties:function(e,t){s(e);var n,r=o(t),a=r.length,c=0;while(a>c)i.f(e,n=r[c++],t[n]);return e}},"3a71":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t,n){this.config=e,this.network=t,this._update(n)}get sid(){return this.state.sid}get serviceSid(){return this.state.serviceSid}get dateCreated(){return this.state.dateCreated}get dateUpdated(){return this.state.dateUpdated}get contentType(){return this.state.contentType}get size(){return this.state.size}get fileName(){return this.state.filename}async getContentUrl(){let e=await this.network.get(`${this.config.baseUrl}/${this.sid}`);return this._update(e.body),Promise.resolve(this.state.contentDirectUrl)}_update(e){this.state={sid:e.sid,serviceSid:e.service_sid,channelSid:e.channel_sid,messageSid:e.message_sid,dateCreated:e.date_created?new Date(e.date_created):null,dateUpdated:e.date_updated?new Date(e.date_updated):null,size:e.size,contentType:e.content_type,url:e.url,contentUrl:e.links.content,contentDirectUrl:e.links.content_direct_temporary,filename:e.filename?e.filename:null}}}t.Media=r},"3a7b":function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").findIndex,s=r.aTypedArray,o=r.exportTypedArrayMethod;o("findIndex",(function(e){return i(s(this),e,arguments.length>1?arguments[1]:void 0)}))},"3bbe":function(e,t,n){var r=n("861d");e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"3c45":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("faa1"),i=n("11c1");class s extends r.EventEmitter{constructor(){super(),this.closed=!1,this.uuid=i()}get listenerUuid(){return this.uuid}close(){this.removeAllListeners(),this.closed=!0}ensureNotClosed(){if(this.closed)throw new Error("Invalid operation on closed object")}}t.Closeable=s,t.default=s},"3c5d":function(e,t,n){"use strict";var r=n("ebb5"),i=n("50c4"),s=n("182d"),o=n("7b0b"),a=n("d039"),c=r.aTypedArray,u=r.exportTypedArrayMethod,l=a((function(){new Int8Array(1).set({})}));u("set",(function(e){c(this);var t=s(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=o(e),a=i(r.length),u=0;if(a+t>n)throw RangeError("Wrong length");while(u<a)this[t+u]=r[u++]}),l)},"3c96":function(e,t){function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},"3ca3":function(e,t,n){"use strict";var r=n("6547").charAt,i=n("577e"),s=n("69f3"),o=n("7dd0"),a="String Iterator",c=s.set,u=s.getterFor(a);o(String,"String",(function(e){c(this,{type:a,string:i(e),index:0})}),(function(){var e,t=u(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},"3d6b":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.names=new Map,this.entities=new Map}store(e){let t=this.entities.get(e.sid);return t||(this.entities.set(e.sid,e),e.uniqueName&&this.names.set(e.type+"::"+e.uniqueName,e.sid),e)}getResolved(e,t){let n=this.names.get(t+"::"+e);return n?this.entities.get(n):null}get(e,t){return this.entities.get(e)||this.getResolved(e,t)||null}remove(e){let t=this.entities.get(e);t&&(this.entities.delete(e),t.uniqueName&&this.names.delete(t.type+"::"+t.uniqueName))}}t.EntitiesCache=r},"3da9":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("5c7d"),i=r.getLogger("twilio-sync");function s(e,t){return[`${(new Date).toISOString()} Sync ${e}:`].concat(Array.from(t))}t.default={setLevel:function(e){i.setLevel(e)},trace:function(...e){i.trace.apply(null,s("T",e))},debug:function(...e){i.debug.apply(null,s("D",e))},info:function(...e){i.info.apply(null,s("I",e))},warn:function(...e){i.warn.apply(null,s("W",e))},error:function(...e){i.error.apply(null,s("E",e))}}},"3e62":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("11c1");class i{constructor(e){this.id=e||"TM"+r.v4()}}t.AbstractMessage=i},"3f22":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e,t=0,n=0){super(),this.name=this.constructor.name,this.message=`${e} (status: ${t}, code: ${n})`,this.status=t,this.code=n}}t.SyncError=r;class i extends r{constructor(e,t=0,n=0,r){super(e,t,n),this.body=r}}t.SyncNetworkError=i,t.default=r},"3f5e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("3e62");class i{}t.ContinuationTokenStatus=i;class s extends r.AbstractMessage{constructor(e,t,n,r,i,s,o){super(e),this.continuationToken=t,this.continuationTokenStatus=n,this.offlineStorage=r,this.initRegistrations=i,this.debugInfo=s,this.confirmedCapabilities=o}}t.InitReply=s},"3f8c":function(e,t){e.exports={}},"3fcc":function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").map,s=n("b6b7"),o=r.aTypedArray,a=r.exportTypedArrayMethod;a("map",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(s(e))(t)}))}))},4102:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("3da9"),i="com.twilio.rtd.cds.document",s="com.twilio.rtd.cds.list",o="com.twilio.rtd.cds.map",a="twilio.sync.event";class c{constructor(e){this.config=e.config,this.subscriptions=e.subscriptions,this.notifications=e.notifications,this.notifications.subscribe(a),this.notifications.subscribe(i),this.notifications.subscribe(s),this.notifications.subscribe(o),this.notifications.on("message",(e,t)=>this.onMessage(e,t)),this.notifications.on("transportReady",e=>this.onConnectionStateChanged(e))}onMessage(e,t){switch(r.default.trace("Notification type:",e,"content:",t),e){case i:case s:case o:this.subscriptions.acceptMessage(t,!1);break;case a:this.subscriptions.acceptMessage(t,!0);break}}subscribe(e,t){this.subscriptions.add(e,t)}unsubscribe(e){this.subscriptions.remove(e)}onConnectionStateChanged(e){this.subscriptions.onConnectionStateChanged(e)}}t.Router=c,t.default=c},"428f":function(e,t,n){var r=n("da84");e.exports=r},"437c":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.Logger=void 0;const r=n("5c7d");function i(e,t){return[`${(new Date).toISOString()} Notifications ${e}:`].concat(Array.from(t))}class s{constructor(){this.prefix=""}static scope(e=""){return new s}setLevel(e){r.setLevel(e)}trace(...e){r.debug.apply(null,i("T"+this.prefix,e))}debug(...e){r.debug.apply(null,i("D"+this.prefix,e))}info(...e){r.info.apply(null,i("I"+this.prefix,e))}warn(...e){r.warn.apply(null,i("W"+this.prefix,e))}error(...e){r.error.apply(null,i("E"+this.prefix,e))}}t.Logger=s;let o=s.scope();t.log=o},"448a":function(e,t,n){var r=n("2236"),i=n("11b0"),s=n("6613"),o=n("0676");function a(e){return r(e)||i(e)||s(e)||o()}e.exports=a,e.exports["default"]=e.exports,e.exports.__esModule=!0},"44ad":function(e,t,n){var r=n("d039"),i=n("c6b6"),s="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?s.call(e,""):Object(e)}:Object},"44d2":function(e,t,n){var r=n("b622"),i=n("7c73"),s=n("9bf2"),o=r("unscopables"),a=Array.prototype;void 0==a[o]&&s.f(a,o,{configurable:!0,value:i(null)}),e.exports=function(e){a[o][e]=!0}},"44de":function(e,t,n){var r=n("da84");e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},4685:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diffAny=t.diffObjects=t.diffArrays=t.intersection=t.subtract=t.isDestructive=void 0;var r=n("3630"),i=n("2d05");function s(e){var t=e.op;return"remove"===t||"replace"===t||"copy"===t||"move"===t}function o(e,t){var n={};for(var r in e)i.hasOwnProperty.call(e,r)&&void 0!==e[r]&&(n[r]=1);for(var s in t)i.hasOwnProperty.call(t,s)&&void 0!==t[s]&&delete n[s];return Object.keys(n)}function a(e){for(var t=e.length,n={},r=0;r<t;r++){var s=e[r];for(var o in s)i.hasOwnProperty.call(s,o)&&void 0!==s[o]&&(n[o]=(n[o]||0)+1)}for(var o in n)n[o]<t&&delete n[o];return Object.keys(n)}function c(e){return"add"===e.op}function u(e){return"remove"===e.op}function l(e,t){return{operations:e.operations.concat(t),cost:e.cost+1}}function d(e,t,n,i){void 0===i&&(i=h);var s={"0,0":{operations:[],cost:0}};function o(n,i){var a=n+","+i,c=s[a];if(void 0===c){if(n>0&&i>0&&r.compare(e[n-1],t[i-1]))c=o(n-1,i-1);else{var u=[];if(n>0){var d=o(n-1,i),f={op:"remove",index:n-1};u.push(l(d,f))}if(i>0){var h=o(n,i-1),p={op:"add",index:n-1,value:t[i-1]};u.push(l(h,p))}if(n>0&&i>0){var m=o(n-1,i-1),y={op:"replace",index:n-1,original:e[n-1],value:t[i-1]};u.push(l(m,y))}var v=u.sort((function(e,t){return e.cost-t.cost}))[0];c=v}s[a]=c}return c}var a=isNaN(e.length)||e.length<=0?0:e.length,d=isNaN(t.length)||t.length<=0?0:t.length,f=o(a,d).operations,p=f.reduce((function(e,t){var r=e[0],s=e[1];if(c(t)){var o=t.index+1+s,l=o<a+s?String(o):"-",d={op:t.op,path:n.add(l).toString(),value:t.value};return[r.concat(d),s+1]}if(u(t)){d={op:t.op,path:n.add(String(t.index+s)).toString()};return[r.concat(d),s-1]}var f=n.add(String(t.index+s)),h=i(t.original,t.value,f);return[r.concat.apply(r,h),s]}),[[],0])[0];return p}function f(e,t,n,r){void 0===r&&(r=h);var i=[];return o(e,t).forEach((function(e){i.push({op:"remove",path:n.add(e).toString()})})),o(t,e).forEach((function(e){i.push({op:"add",path:n.add(e).toString(),value:t[e]})})),a([e,t]).forEach((function(s){i.push.apply(i,r(e[s],t[s],n.add(s)))})),i}function h(e,t,n,r){if(void 0===r&&(r=h),e===t)return[];var s=i.objectType(e),o=i.objectType(t);return"array"==s&&"array"==o?d(e,t,n,r):"object"==s&&"object"==o?f(e,t,n,r):[{op:"replace",path:n.toString(),value:t}]}t.isDestructive=s,t.subtract=o,t.intersection=a,t.diffArrays=d,t.diffObjects=f,t.diffAny=h},4840:function(e,t,n){var r=n("825a"),i=n("1c0b"),s=n("b622"),o=s("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||void 0==(n=r(s)[o])?t:i(n)}},"485a":function(e,t,n){var r=n("861d");e.exports=function(e,t){var n,i;if("string"===t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if("string"!==t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},4930:function(e,t,n){var r=n("2d00"),i=n("d039");e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},"4a4b":function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports["default"]=e.exports,e.exports.__esModule=!0,n(t,r)}e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},"4ae1":function(e,t,n){var r=n("23e7"),i=n("d066"),s=n("1c0b"),o=n("825a"),a=n("861d"),c=n("7c73"),u=n("0538"),l=n("d039"),d=i("Reflect","construct"),f=l((function(){function e(){}return!(d((function(){}),[],e)instanceof e)})),h=!l((function(){d((function(){}))})),p=f||h;r({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(e,t){s(e),o(t);var n=arguments.length<3?e:s(arguments[2]);if(h&&!f)return d(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var i=n.prototype,l=c(a(i)?i:Object.prototype),p=Function.apply.call(e,l,t);return a(p)?p:l}})},"4b03":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("cecd");t.SyncClient=r.SyncClient;const i=n("a149");t.SyncDocument=i.SyncDocument;const s=n("1fce");t.SyncList=s.SyncList;const o=n("d5d4");t.SyncListItem=o.ListItem;const a=n("2a03");t.SyncMap=a.SyncMap;const c=n("98ae");t.SyncMapItem=c.MapItem,t.default=r.SyncClient,e.exports=r.SyncClient,e.exports.SyncClient=r.SyncClient},"4b3a":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("faac");class i{constructor(e){this.sdk="js",this.sdkVer=e,this.os=r.os.family,this.osVer=r.os.version,this.pl=r.name,this.plVer=r.version}}t.ClientInfo=i,t.default=i},"4d64":function(e,t,n){var r=n("fc6a"),i=n("50c4"),s=n("23cb"),o=function(e){return function(t,n,o){var a,c=r(t),u=i(c.length),l=s(o,u);if(e&&n!=n){while(u>l)if(a=c[l++],a!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},"4d90":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("6ab6");class i extends r.TwilsockError{constructor(e,t){super(e),this.reply=t}}t.TwilsockReplyError=i},"4de4":function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").filter,s=n("1dde"),o=s("filter");r({target:"Array",proto:!0,forced:!o},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,n){"use strict";var r=n("0366"),i=n("7b0b"),s=n("9bdd"),o=n("e95a"),a=n("50c4"),c=n("8418"),u=n("35a1");e.exports=function(e){var t,n,l,d,f,h,p=i(e),m="function"==typeof this?this:Array,y=arguments.length,v=y>1?arguments[1]:void 0,g=void 0!==v,b=u(p),w=0;if(g&&(v=r(v,y>2?arguments[2]:void 0,2)),void 0==b||m==Array&&o(b))for(t=a(p.length),n=new m(t);t>w;w++)h=g?v(p[w],w):p[w],c(n,w,h);else for(d=b.call(p),f=d.next,n=new m;!(l=f.call(d)).done;w++)h=g?s(d,v,[l.value,w],!0):l.value,c(n,w,h);return n.length=w,n}},"4e82":function(e,t,n){"use strict";var r=n("23e7"),i=n("1c0b"),s=n("7b0b"),o=n("50c4"),a=n("577e"),c=n("d039"),u=n("addb"),l=n("a640"),d=n("04d1"),f=n("d998"),h=n("2d00"),p=n("512c"),m=[],y=m.sort,v=c((function(){m.sort(void 0)})),g=c((function(){m.sort(null)})),b=l("sort"),w=!c((function(){if(h)return h<70;if(!(d&&d>3)){if(f)return!0;if(p)return p<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)m.push({k:t+r,v:n})}for(m.sort((function(e,t){return t.v-e.v})),r=0;r<m.length;r++)t=m[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}})),x=v||!g||!b||!w,_=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:a(t)>a(n)?1:-1}};r({target:"Array",proto:!0,forced:x},{sort:function(e){void 0!==e&&i(e);var t=s(this);if(w)return void 0===e?y.call(t):y.call(t,e);var n,r,a=[],c=o(t.length);for(r=0;r<c;r++)r in t&&a.push(t[r]);a=u(a,_(e)),n=a.length,r=0;while(r<n)t[r]=a[r++];while(r<c)delete t[r++];return t}})},"4ec9":function(e,t,n){"use strict";var r=n("6d61"),i=n("6566");e.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},"4fad":function(e,t,n){var r=n("23e7"),i=n("6f53").entries;r({target:"Object",stat:!0},{entries:function(e){return i(e)}})},"50c4":function(e,t,n){var r=n("a691"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},"512c":function(e,t,n){var r=n("342f"),i=r.match(/AppleWebKit\/(\d+)\./);e.exports=!!i&&+i[1]},5135:function(e,t,n){var r=n("7b0b"),i={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return i.call(r(e),t)}},"52de":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("3e62");class i extends r.AbstractMessage{constructor(e,t,n){super(),this.method="message",this.active_grant=e,this.payload_type=t,this.http_request=n}}t.Message=i},5319:function(e,t,n){"use strict";var r=n("d784"),i=n("d039"),s=n("825a"),o=n("a691"),a=n("50c4"),c=n("577e"),u=n("1d80"),l=n("8aa5"),d=n("0cb2"),f=n("14c3"),h=n("b622"),p=h("replace"),m=Math.max,y=Math.min,v=function(e){return void 0===e?e:String(e)},g=function(){return"$0"==="a".replace(/./,"$0")}(),b=function(){return!!/./[p]&&""===/./[p]("a","$0")}(),w=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));r("replace",(function(e,t,n){var r=b?"$":"$0";return[function(e,n){var r=u(this),i=void 0==e?void 0:e[p];return void 0!==i?i.call(e,r,n):t.call(c(r),e,n)},function(e,i){var u=s(this),h=c(e);if("string"===typeof i&&-1===i.indexOf(r)&&-1===i.indexOf("$<")){var p=n(t,u,h,i);if(p.done)return p.value}var g="function"===typeof i;g||(i=c(i));var b=u.global;if(b){var w=u.unicode;u.lastIndex=0}var x=[];while(1){var _=f(u,h);if(null===_)break;if(x.push(_),!b)break;var k=c(_[0]);""===k&&(u.lastIndex=l(h,a(u.lastIndex),w))}for(var S="",T=0,E=0;E<x.length;E++){_=x[E];for(var O=c(_[0]),C=m(y(o(_.index),h.length),0),I=[],j=1;j<_.length;j++)I.push(v(_[j]));var P=_.groups;if(g){var M=[O].concat(I,C,h);void 0!==P&&M.push(P);var R=c(i.apply(void 0,M))}else R=d(O,h,C,I,P,i);C>=T&&(S+=h.slice(T,C)+R,T=C+O.length)}return S+h.slice(T)}]}),!w||!g||b)},5692:function(e,t,n){var r=n("c430"),i=n("c6cd");(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.16.0",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(e,t,n){var r=n("d066"),i=n("241c"),s=n("7418"),o=n("825a");e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(o(e)),n=s.f;return n?t.concat(n(e)):t}},"577e":function(e,t,n){var r=n("d9b5");e.exports=function(e){if(r(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)}},"57a2":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("faa1"),i=n("c434"),s=n("319d"),o=n("6e57"),a=n("8a85"),c=n("4d90"),u=n("7115"),l=3e3;function d(e){setTimeout(e,0)}class f{}t.Response=f;class h extends r.EventEmitter{constructor(e,t,n){super(),this.terminalStates=["disconnected","rejected"],this.lastEmittedState=void 0,this.tokenExpiredSasCode=20104,this.terminationReason="Connection is not initialized",this.websocket=e,this.websocket.on("connected",()=>this.fsm.socketConnected()),this.websocket.on("disconnected",e=>this.fsm.socketClosed()),this.websocket.on("message",e=>this.onIncomingMessage(e)),this.websocket.on("socketError",e=>this.emit("connectionError",{terminal:!1,message:"Socket error: "+e.message,httpStatusCode:null,errorCode:null})),this.transport=t,this.config=n,this.retrier=new u.BackoffRetrier(n.retryPolicy),this.retrier.on("attempt",()=>this.retry()),this.retrier.on("failed",e=>{s.log.warn("Retrying failed: "+e.message),this.disconnect()}),"undefined"!==typeof window&&"undefined"!==typeof window.addEventListener&&(window.addEventListener("online",()=>{s.log.debug("Browser reported connectivity state: online"),this.resetBackoff(),this.fsm.systemOnline()}),window.addEventListener("offline",()=>{s.log.debug("Browser reported connectivity state: offline"),this.websocket.close(),this.fsm.socketClosed()})),this.fsm=new i({init:"disconnected",transitions:[{name:"userConnect",from:["disconnected","rejected"],to:"connecting"},{name:"userConnect",from:["connecting","connected"]},{name:"userDisconnect",from:["connecting","initialising","connected","updating","retrying","rejected","waitSocketClosed","waitOffloadSocketClosed"],to:"disconnecting"},{name:"userRetry",from:["retrying"],to:"connecting"},{name:"socketConnected",from:["connecting"],to:"initialising"},{name:"socketClosed",from:["connecting","initialising","connected","updating","error","waitOffloadSocketClosed"],to:"retrying"},{name:"socketClosed",from:["disconnecting"],to:"disconnected"},{name:"socketClosed",from:["waitSocketClosed"],to:"disconnected"},{name:"socketClosed",from:["rejected"],to:"rejected"},{name:"initSuccess",from:["initialising"],to:"connected"},{name:"initError",from:["initialising"],to:"error"},{name:"tokenRejected",from:["initialising","updating"],to:"rejected"},{name:"protocolError",from:["initialising","connected","updating"],to:"error"},{name:"receiveClose",from:["initialising","connected","updating"],to:"waitSocketClosed"},{name:"receiveOffload",from:["initialising","connected","updating"],to:"waitOffloadSocketClosed"},{name:"unsupportedProtocol",from:["initialising","connected","updating"],to:"unsupported"},{name:"receiveFatalClose",from:["initialising","connected","updating"],to:"unsupported"},{name:"userUpdateToken",from:["disconnected","rejected","connecting","retrying"],to:"connecting"},{name:"userUpdateToken",from:["connected"],to:"updating"},{name:"updateSuccess",from:["updating"],to:"connected"},{name:"updateError",from:["updating"],to:"error"},{name:"userSend",from:["connected"],to:"connected"},{name:"systemOnline",from:["retrying"],to:"connecting"}],methods:{onConnecting:()=>{this.setupSocket(),this.emit("connecting")},onEnterInitialising:()=>{this.sendInit()},onLeaveInitialising:()=>{this.cancelInit()},onEnterUpdating:()=>{this.sendUpdate()},onLeaveUpdating:()=>{this.cancelUpdate()},onEnterRetrying:()=>{this.initRetry(),this.emit("connecting")},onEnterConnected:()=>{this.resetBackoff(),this.onConnected()},onUserUpdateToken:()=>{this.resetBackoff()},onTokenRejected:()=>{this.resetBackoff(),this.closeSocket(!0),this.finalizeSocket()},onUserDisconnect:()=>{this.closeSocket(!0)},onEnterDisconnecting:()=>{this.startDisconnectTimer()},onLeaveDisconnecting:()=>{this.cancelDisconnectTimer()},onEnterWaitSocketClosed:()=>{this.startDisconnectTimer()},onLeaveWaitSocketClosed:()=>{this.cancelDisconnectTimer()},onEnterWaitOffloadSocketClosed:()=>{this.startDisconnectTimer()},onLeaveWaitOffloadSocketClosed:()=>{this.cancelDisconnectTimer()},onDisconnected:()=>{this.resetBackoff(),this.finalizeSocket()},onReceiveClose:(e,t)=>{this.onCloseReceived(t)},onReceiveOffload:(e,t)=>{s.log.debug("onreceiveoffload: ",t),this.modifyBackoff(t.body),this.onCloseReceived(t.status)},onUnsupported:()=>{this.closeSocket(!0),this.finalizeSocket()},onError:(e,t)=>{this.closeSocket(t),this.finalizeSocket()},onEnterState:e=>{"none"!==e.from&&this.changeState(e)},onInvalidTransition:(e,t,n)=>{s.log.warn("FSM: unexpected transition",t,n)}}})}changeState(e){s.log.debug(`FSM: ${e.transition}: ${e.from} --\x3e ${e.to}`),this.lastEmittedState!==this.state&&(this.lastEmittedState=this.state,this.emit("stateChanged",this.state))}resetBackoff(){s.log.trace("resetBackoff"),this.retrier.stop()}modifyBackoff(e){s.log.trace("modifyBackoff",e);let t=e?e.backoff_policy:null;t&&"number"===typeof t.reconnect_min_ms&&this.retrier.modifyBackoff(t.reconnect_min_ms)}startDisconnectTimer(){s.log.trace("startDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null),this.disconnectingTimer=setTimeout(()=>{s.log.debug("disconnecting is timed out"),this.closeSocket(!0)},l)}cancelDisconnectTimer(){s.log.trace("cancelDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null)}get isConnected(){return"connected"===this.state&&this.websocket.isConnected}get state(){switch(this.fsm.state){case"connecting":case"initialising":case"retrying":case"error":return"connecting";case"updating":case"connected":return"connected";case"rejected":return"rejected";case"disconnecting":case"waitSocketClosed":case"waitOffloadSocketClosed":return"disconnecting";case"disconnected":default:return"disconnected"}}initRetry(){s.log.debug("initRetry"),this.retrier.inProgress?this.retrier.attemptFailed():this.retrier.start()}retry(){"connecting"!=this.fsm.state?(s.log.trace("retry"),this.websocket.close(),this.fsm.userRetry()):s.log.trace("can\t retry as already connecting")}onConnected(){this.emit("connected")}finalizeSocket(){s.log.trace("finalizeSocket"),this.websocket.close(),this.emit("disconnected"),this.disconnectedPromiseResolve&&(this.disconnectedPromiseResolve(),this.disconnectedPromiseResolve=null)}setupSocket(){s.log.trace("setupSocket:",this.config.token),this.emit("beforeConnect"),this.websocket.connect()}onIncomingMessage(e){let{method:t,header:n,payload:r}=a.Parser.parse(e);if("reply"!==t&&this.confirmReceiving(n),"notification"===t)this.emit("message",n.message_type,r);else if("reply"===n.method)this.transport.processReply({id:n.id,status:n.status,header:n,body:r});else if("client_update"===n.method)"token_about_to_expire"===n.client_update_type&&this.emit("tokenAboutToExpire");else if("close"===n.method)if(308===n.status.code)s.log.debug("Connection has been offloaded"),this.fsm.receiveOffload({status:n.status.status,body:r});else if(406===n.status.code){const e="Server closed connection because can't parse protocol: "+JSON.stringify(n.status);this.emitReplyConnectionError(e,n,!0),s.log.error(e),this.fsm.receiveFatalClose()}else 417===n.status.code?(s.log.error("Server closed connection because can't parse client reply: "+JSON.stringify(n.status)),this.fsm.receiveFatalClose(n.status.status)):410===n.status.code?(s.log.warn("Server closed connection: "+JSON.stringify(n.status)),this.fsm.receiveClose(n.status.status),this.emit("tokenExpired")):401===n.status.code?(s.log.error("Server closed connection: "+JSON.stringify(n.status)),this.fsm.receiveClose(n.status.status)):(s.log.warn("unexpected message: ",n.status),this.fsm.receiveOffload({status:n.status.status,body:null}))}async sendInit(){s.log.trace("sendInit");try{this.emit("beforeSendInit");let e=await this.transport.sendInit();this.config.updateContinuationToken(e.continuationToken),this.config.confirmedCapabilities=e.confirmedCapabilities,this.fsm.initSuccess(e),this.emit("initialized",e),this.emit("tokenUpdated")}catch(e){if(e instanceof c.TwilsockReplyError){let t=!1;s.log.warn("Init rejected by server: "+JSON.stringify(e.reply.status)),this.emit("sendInitFailed"),401===e.reply.status.code||403===e.reply.status.code?(t=!0,this.fsm.tokenRejected(e.reply.status),e.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):429===e.reply.status.code?(this.modifyBackoff(e.reply.body),this.fsm.initError(!0)):500===e.reply.status.code?this.fsm.initError(!1):this.fsm.initError(!0),this.emitReplyConnectionError(e.message,e.reply,t)}else this.terminationReason=e.message,this.emit("connectionError",{terminal:!0,message:`Unknown error during connection initialisation: ${e.message}\n${JSON.stringify(e,null,2)}`,httpStatusCode:null,errorCode:null}),this.fsm.initError(!0);this.emit("tokenUpdated",e)}}async sendUpdate(){s.log.trace("sendUpdate");let e=new o.Update(this.config.token);try{let t=await this.transport.sendWithReply(e);this.fsm.updateSuccess(t.body),this.emit("tokenUpdated")}catch(t){if(t instanceof c.TwilsockReplyError){let e=!1;s.log.warn("Token update rejected by server: "+JSON.stringify(t.reply.status)),401===t.reply.status.code||403===t.reply.status.code?(e=!0,this.fsm.tokenRejected(t.reply.status),t.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):429===t.reply.status.code?(this.modifyBackoff(t.reply.body),this.fsm.updateError(t.reply.status)):this.fsm.updateError(t.reply.status),this.emitReplyConnectionError(t.message,t.reply,e)}else this.emit("error",!1,t.message,null,null),this.fsm.updateError(t);this.emit("tokenUpdated",t)}}emitReplyConnectionError(e,t,n){const r=t.status&&t.status.description?t.status.description:e,i=t.status.code,s=t.status&&t.status.errorCode?t.status.errorCode:null;n&&(this.terminationReason=r),this.emit("connectionError",{terminal:n,message:"Connection error: "+r,httpStatusCode:i,errorCode:s})}cancelInit(){s.log.trace("cancelInit")}cancelUpdate(){s.log.trace("cancelUpdate")}confirmReceiving(e){s.log.trace("confirmReceiving");try{this.transport.send(new o.Reply(e.id))}catch(t){s.log.debug("failed to confirm packet receiving",t)}}closeSocket(e){s.log.trace(`closeSocket (graceful: ${e})`),e&&this.transport.isConnected&&this.transport.sendClose(),this.websocket.close(),d(()=>this.fsm.socketClosed())}connect(){s.log.trace("connect"),this.fsm.userConnect()}disconnect(){return s.log.trace("disconnect"),this.fsm.is("disconnected")?Promise.resolve():new Promise(e=>{this.disconnectedPromiseResolve=e,this.fsm.userDisconnect()})}updateToken(e){return s.log.trace("updateToken:",e),new Promise((e,t)=>{this.once("tokenUpdated",n=>{n?t(n):e()}),this.fsm.userUpdateToken()})}get isTerminalState(){return-1!==this.terminalStates.indexOf(this.fsm.state)}get getTerminationReason(){return this.terminationReason}onCloseReceived(e){this.websocket.close()}}t.TwilsockChannel=h,t.TwilsockImpl=h},"57ce":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const r=n("6ae5"),i=e["XMLHttpRequest"]||n(2).XMLHttpRequest;function s(e){return e?e.split("\r\n").map(e=>e.split(": ")).filter(e=>2===e.length&&e[1].length>0).reduce((e,t)=>(e[t[0]]=t[1],e),{}):{}}function o(e){const t=e.getResponseHeader("Content-Type");if(!t||0!==t.indexOf("application/json")||0===e.responseText.length)return e.responseText;try{return JSON.parse(e.responseText)}catch(n){return e.responseText}}class a{constructor(){}static request(e,t,n,a){return new Promise((c,u)=>{let l=new i;l.open(e,t,!0),l.onreadystatechange=function(){if(4!==l.readyState)return;const e=s(l.getAllResponseHeaders()),t=o(l);if(200<=l.status&&l.status<300)c({status:l.status,headers:e,body:t});else{const n=l.statusText&&l.statusText.code?l.statusText.code:"NONE";let i;i="string"===typeof t?t&&1===t.split("\n",2).length?t:"":JSON.stringify(t);const s=`${l.status}: [${n}] ${i}`;u(new r.TransportError(s,l.status,t,n,e))}};for(let e in n)l.setRequestHeader(e,n[e]),"Content-Type"===e&&"application/json"===n[e]&&(a=JSON.stringify(a));l.send(a)})}get(e,t){return a.request("GET",e,t)}post(e,t,n){return a.request("POST",e,t,n)}}t.Transport=a}).call(this,n("c8ba"))},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),i=n("577e"),s=n("5899"),o="["+s+"]",a=RegExp("^"+o+o+"*"),c=RegExp(o+o+"*$"),u=function(e){return function(t){var n=i(r(t));return 1&e&&(n=n.replace(a,"")),2&e&&(n=n.replace(c,"")),n}};e.exports={start:u(1),end:u(2),trim:u(3)}},"5a43":function(e,t){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},"5ab9":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("faa1");class i extends r.EventEmitter{constructor(e){super(),this.minDelay=e.min,this.maxDelay=e.max,this.initialDelay=e.initial||0,this.maxAttemptsCount=e.maxAttemptsCount||0,this.maxAttemptsTime=e.maxAttemptsTime||0,this.randomness=e.randomness||0,this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0}attempt(){clearTimeout(this.timeout),this.attemptNum++,this.timeout=null,this.emit("attempt",this)}nextDelay(e){if("number"===typeof e)return this.prevDelay=0,this.currDelay=e,e;if(0==this.attemptNum)return this.initialDelay;if(1==this.attemptNum)return this.currDelay=this.minDelay,this.currDelay;this.prevDelay=this.currDelay;let t=this.currDelay+this.prevDelay;return this.maxDelay&&t>this.maxDelay&&(this.currDelay=this.maxDelay,t=this.maxDelay),this.currDelay=t,t}randomize(e){let t=e*this.randomness,n=Math.round(Math.random()*t*2-t);return Math.max(0,e+n)}scheduleAttempt(e){if(this.maxAttemptsCount&&this.attemptNum>=this.maxAttemptsCount)return this.cleanup(),this.emit("failed",new Error("Maximum attempt count limit reached")),void this.reject(new Error("Maximum attempt count reached"));let t=this.nextDelay(e);if(t=this.randomize(t),this.maxAttemptsTime&&this.startTimestamp+this.maxAttemptsTime<Date.now()+t)return this.cleanup(),this.emit("failed",new Error("Maximum attempt time limit reached")),void this.reject(new Error("Maximum attempt time limit reached"));this.timeout=setTimeout(()=>this.attempt(),t)}cleanup(){clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0}start(){if(this.inProgress)throw new Error("Retrier is already in progress");return this.inProgress=!0,new Promise((e,t)=>{this.resolve=e,this.reject=t,this.startTimestamp=Date.now(),this.scheduleAttempt(this.initialDelay)})}cancel(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.emit("cancelled"),this.reject(new Error("Cancelled")))}succeeded(e){this.emit("succeeded",e),this.resolve(e)}failed(e,t){if(this.timeout)throw new Error("Retrier attempt is already in progress");this.scheduleAttempt(t)}run(e){return this.on("attempt",()=>{e().then(e=>this.succeeded(e)).catch(e=>this.failed(e))}),this.start()}}t.Retrier=i,t.default=i},"5bc3":function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}e.exports=r,e.exports["default"]=e.exports,e.exports.__esModule=!0},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5c7d":function(e,t,n){var r,i;(function(s,o){"use strict";r=o,i="function"===typeof r?r.call(t,n,t,e):r,void 0===i||(e.exports=i)})(0,(function(){"use strict";var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function i(e,t){var n=e[t];if("function"===typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(r){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(r){return"debug"===r&&(r="log"),typeof console!==t&&("trace"===r&&n?s:void 0!==console[r]?i(console,r):void 0!==console.log?i(console,"log"):e)}function a(t,n){for(var i=0;i<r.length;i++){var s=r[i];this[s]=i<t?e:this.methodFactory(s,t,n)}this.log=this.debug}function c(e,n,r){return function(){typeof console!==t&&(a.call(this,n,r),this[e].apply(this,arguments))}}function u(e,t,n){return o(e)||c.apply(this,arguments)}function l(e,n,i){var s,o=this,c="loglevel";function l(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t&&c){try{return void(window.localStorage[c]=n)}catch(i){}try{window.document.cookie=encodeURIComponent(c)+"="+n+";"}catch(i){}}}function d(){var e;if(typeof window!==t&&c){try{e=window.localStorage[c]}catch(i){}if(typeof e===t)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(c)+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(i){}return void 0===o.levels[e]&&(e=void 0),e}}"string"===typeof e?c+=":"+e:"symbol"===typeof e&&(c=void 0),o.name=e,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=i||u,o.getLevel=function(){return s},o.setLevel=function(n,r){if("string"===typeof n&&void 0!==o.levels[n.toUpperCase()]&&(n=o.levels[n.toUpperCase()]),!("number"===typeof n&&n>=0&&n<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(s=n,!1!==r&&l(n),a.call(o,n,e),typeof console===t&&n<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(e){d()||o.setLevel(e,!1)},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)};var f=d();null==f&&(f=null==n?"WARN":n),o.setLevel(f,!1)}var d=new l,f={};d.getLogger=function(e){if("symbol"!==typeof e&&"string"!==typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=f[e];return t||(t=f[e]=new l(e,d.getLevel(),d.methodFactory)),t};var h=typeof window!==t?window.log:void 0;return d.noConflict=function(){return typeof window!==t&&window.log===d&&(window.log=h),d},d.getLoggers=function(){return f},d["default"]=d,d}))},"5cc6":function(e,t,n){var r=n("74e8");r("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},"5e89":function(e,t,n){var r=n("861d"),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},"5f96":function(e,t,n){"use strict";var r=n("ebb5"),i=r.aTypedArray,s=r.exportTypedArrayMethod,o=[].join;s("join",(function(e){return o.apply(i(this),arguments)}))},"600a":function(e,t,n){"use strict";
/*
@license
Copyright (c) 2016, Twilio, Inc.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted, provided that the above
copyright notice and this permission notice appear in all copies.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION
OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN
CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.

*/Object.defineProperty(t,"__esModule",{value:!0});var r=n("9523");function i(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}n("e6cf");var s,o=i(r);function a(){}function c(){c.init.call(this)}function u(e){return void 0===e._maxListeners?c.defaultMaxListeners:e._maxListeners}function l(e,t,n){if(t)e.call(n);else for(var r=e.length,i=w(e,r),s=0;s<r;++s)i[s].call(n)}function d(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,s=w(e,i),o=0;o<i;++o)s[o].call(n,r)}function f(e,t,n,r,i){if(t)e.call(n,r,i);else for(var s=e.length,o=w(e,s),a=0;a<s;++a)o[a].call(n,r,i)}function h(e,t,n,r,i,s){if(t)e.call(n,r,i,s);else for(var o=e.length,a=w(e,o),c=0;c<o;++c)a[c].call(n,r,i,s)}function p(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,s=w(e,i),o=0;o<i;++o)s[o].apply(n,r)}function m(e,t,n,r){var i,s,o;if("function"!==typeof n)throw new TypeError('"listener" argument must be a function');if(s=e._events,s?(s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]):(s=e._events=new a,e._eventsCount=0),o){if("function"===typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(i=u(e),i&&i>0&&o.length>i)){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,y(c)}}else o=s[t]=n,++e._eventsCount;return e}function y(e){"function"===typeof console.warn?console.warn(e):console.log(e)}function v(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}function g(e){var t=this._events;if(t){var n=t[e];if("function"===typeof n)return 1;if(n)return n.length}return 0}function b(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function w(e,t){var n=new Array(t);while(t--)n[t]=e[t];return n}function x(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}a.prototype=Object.create(null),c.EventEmitter=c,c.usingDomains=!1,c.prototype.domain=void 0,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.init=function(){this.domain=null,c.usingDomains&&s.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new a,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},c.prototype.getMaxListeners=function(){return u(this)},c.prototype.emit=function(e){var t,n,r,i,s,o,a,c="error"===e;if(o=this._events,o)c=c&&null==o.error;else if(!c)return!1;if(a=this.domain,c){if(t=arguments[1],!a){if(t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=a,t.domainThrown=!1,a.emit("error",t),!1}if(n=o[e],!n)return!1;var m="function"===typeof n;switch(r=arguments.length,r){case 1:l(n,m,this);break;case 2:d(n,m,this,arguments[1]);break;case 3:f(n,m,this,arguments[1],arguments[2]);break;case 4:h(n,m,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),s=1;s<r;s++)i[s-1]=arguments[s];p(n,m,this,i)}return!0},c.prototype.addListener=function(e,t){return m(this,e,t,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(e,t){return m(this,e,t,!0)},c.prototype.once=function(e,t){if("function"!==typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,v(this,e,t)),this},c.prototype.prependOnceListener=function(e,t){if("function"!==typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,v(this,e,t)),this},c.prototype.removeListener=function(e,t){var n,r,i,s,o;if("function"!==typeof t)throw new TypeError('"listener" argument must be a function');if(r=this._events,!r)return this;if(n=r[e],!n)return this;if(n===t||n.listener&&n.listener===t)0===--this._eventsCount?this._events=new a:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(i=-1,s=n.length;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0===--this._eventsCount)return this._events=new a,this;delete r[e]}else b(n,i);r.removeListener&&this.emit("removeListener",e,o||t)}return this},c.prototype.off=function(e,t){return this.removeListener(e,t)},c.prototype.removeAllListeners=function(e){var t,n;if(n=this._events,!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=new a,this._eventsCount=0):n[e]&&(0===--this._eventsCount?this._events=new a:delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),s=0;s<i.length;++s)r=i[s],"removeListener"!==r&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new a,this._eventsCount=0,this}if(t=n[e],"function"===typeof t)this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},c.prototype.listeners=function(e){var t,n,r=this._events;return r?(t=r[e],n=t?"function"===typeof t?[t.listener||t]:x(t):[]):n=[],n},c.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},c.prototype.listenerCount=g,c.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};class _ extends c{constructor(e){super(),o["default"](this,"timeout",null),o["default"](this,"startTimestamp",-1),this.minDelay=e.min,this.maxDelay=e.max,this.initialDelay=e.initial||0,this.maxAttemptsCount=e.maxAttemptsCount||0,this.maxAttemptsTime=e.maxAttemptsTime||0,this.randomness=e.randomness||0,this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0}attempt(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.attemptNum++,this.emit("attempt",this)}nextDelay(e){if("number"===typeof e)return this.prevDelay=0,this.currDelay=e,e;if(0==this.attemptNum)return this.initialDelay;if(1==this.attemptNum)return this.currDelay=this.minDelay,this.currDelay;this.prevDelay=this.currDelay;var t=this.currDelay+this.prevDelay;return this.maxDelay&&t>this.maxDelay&&(this.currDelay=this.maxDelay,t=this.maxDelay),this.currDelay=t,t}randomize(e){var t=e*this.randomness,n=Math.round(Math.random()*t*2-t);return Math.max(0,e+n)}scheduleAttempt(e){if(this.maxAttemptsCount&&this.attemptNum>=this.maxAttemptsCount)return this.cleanup(),void this.emit("failed",new Error("Maximum attempt count limit reached"));var t=this.nextDelay(e);if(t=this.randomize(t),this.maxAttemptsTime&&this.startTimestamp+this.maxAttemptsTime<Date.now()+t)return this.cleanup(),void this.emit("failed",new Error("Maximum attempt time limit reached"));this.timeout=setTimeout(()=>this.attempt(),t)}cleanup(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0}start(){if(this.inProgress)throw new Error("Retrier is already in progress");this.inProgress=!0,this.startTimestamp=Date.now(),this.scheduleAttempt(this.initialDelay)}cancel(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.emit("cancelled"))}succeeded(e){this.emit("succeeded",e)}failed(e,t){if(this.timeout)throw new Error("Retrier attempt is already in progress");this.scheduleAttempt(t)}}class k extends c{constructor(e){super(),o["default"](this,"resolve",()=>{}),o["default"](this,"reject",()=>{}),this.retrier=new _(e)}run(e){return this.retrier.on("attempt",()=>{e().then(e=>this.retrier.succeeded(e)).catch(e=>this.retrier.failed(e))}),this.retrier.on("succeeded",e=>this.resolve(e)),this.retrier.on("cancelled",()=>this.reject(new Error("Cancelled"))),this.retrier.on("failed",e=>this.reject(e)),new Promise((e,t)=>{this.resolve=e,this.reject=t,this.retrier.start()})}cancel(){this.retrier.cancel()}}function S(e){return void 0!==e&&null!==e}class T extends c{constructor(e){super(),o["default"](this,"backoffDelay",0),o["default"](this,"nextBackoffDelay",0),o["default"](this,"backoffNumber",0),o["default"](this,"timeoutID",null),o["default"](this,"maxNumberOfRetry",-1),e=e||{};var t=e,n=t.initialDelay,r=t.maxDelay,i=t.randomisationFactor,s=t.factor;if(S(n)&&n<1)throw new Error("The initial timeout must be equal to or greater than 1.");if(S(r)&&r<=1)throw new Error("The maximal timeout must be greater than 1.");if(S(i)&&(i<0||i>1))throw new Error("The randomisation factor must be between 0 and 1.");if(S(s)&&s<=1)throw new Error("Exponential factor should be greater than 1.");if(this.initialDelay=n||100,this.maxDelay=r||1e4,this.maxDelay<=this.initialDelay)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");this.randomisationFactor=i||0,this.factor=s||2,this.reset()}static exponential(e){return new T(e)}backoff(e){null==this.timeoutID&&(this.backoffNumber===this.maxNumberOfRetry?(this.emit("fail",e),this.reset()):(this.backoffDelay=this.next(),this.timeoutID=setTimeout(this.onBackoff.bind(this),this.backoffDelay),this.emit("backoff",this.backoffNumber,this.backoffDelay,e)))}reset(){this.backoffDelay=0,this.nextBackoffDelay=this.initialDelay,this.backoffNumber=0,this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=null}failAfter(e){if(e<=0)throw new Error("Expected a maximum number of retry greater than 0 but got ".concat(e));this.maxNumberOfRetry=e}next(){this.backoffDelay=Math.min(this.nextBackoffDelay,this.maxDelay),this.nextBackoffDelay=this.backoffDelay*this.factor;var e=1+Math.random()*this.randomisationFactor;return Math.min(this.maxDelay,Math.round(this.backoffDelay*e))}onBackoff(){this.timeoutID=null,this.emit("ready",this.backoffNumber,this.backoffDelay),this.backoffNumber++}}t.AsyncRetrier=k,t.Backoff=T,t.Retrier=_},"605d":function(e,t,n){var r=n("c6b6"),i=n("da84");e.exports="process"==r(i.process)},6062:function(e,t,n){"use strict";var r=n("6d61"),i=n("6566");e.exports=r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},6069:function(e,t){e.exports="object"==typeof window},"60bd":function(e,t,n){"use strict";var r=n("da84"),i=n("ebb5"),s=n("e260"),o=n("b622"),a=o("iterator"),c=r.Uint8Array,u=s.values,l=s.keys,d=s.entries,f=i.aTypedArray,h=i.exportTypedArrayMethod,p=c&&c.prototype[a],m=!!p&&("values"==p.name||void 0==p.name),y=function(){return u.call(f(this))};h("entries",(function(){return d.call(f(this))})),h("keys",(function(){return l.call(f(this))})),h("values",y,!m),h(a,y,!m)},"60da":function(e,t,n){"use strict";var r=n("83ab"),i=n("d039"),s=n("df75"),o=n("7418"),a=n("d1e7"),c=n("7b0b"),u=n("44ad"),l=Object.assign,d=Object.defineProperty;e.exports=!l||i((function(){if(r&&1!==l({b:1},l(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||s(l({},t)).join("")!=i}))?function(e,t){var n=c(e),i=arguments.length,l=1,d=o.f,f=a.f;while(i>l){var h,p=u(arguments[l++]),m=d?s(p).concat(d(p)):s(p),y=m.length,v=0;while(y>v)h=m[v++],r&&!f.call(p,h)||(n[h]=p[h])}return n}:l},"621a":function(e,t,n){"use strict";var r=n("da84"),i=n("83ab"),s=n("a981"),o=n("9112"),a=n("e2cc"),c=n("d039"),u=n("19aa"),l=n("a691"),d=n("50c4"),f=n("0b25"),h=n("77a7"),p=n("e163"),m=n("d2bb"),y=n("241c").f,v=n("9bf2").f,g=n("81d5"),b=n("d44e"),w=n("69f3"),x=w.get,_=w.set,k="ArrayBuffer",S="DataView",T="prototype",E="Wrong length",O="Wrong index",C=r[k],I=C,j=r[S],P=j&&j[T],M=Object.prototype,R=r.RangeError,A=h.pack,D=h.unpack,N=function(e){return[255&e]},L=function(e){return[255&e,e>>8&255]},U=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},F=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},B=function(e){return A(e,23,4)},q=function(e){return A(e,52,8)},$=function(e,t){v(e[T],t,{get:function(){return x(this)[t]}})},W=function(e,t,n,r){var i=f(n),s=x(e);if(i+t>s.byteLength)throw R(O);var o=x(s.buffer).bytes,a=i+s.byteOffset,c=o.slice(a,a+t);return r?c:c.reverse()},z=function(e,t,n,r,i,s){var o=f(n),a=x(e);if(o+t>a.byteLength)throw R(O);for(var c=x(a.buffer).bytes,u=o+a.byteOffset,l=r(+i),d=0;d<t;d++)c[u+d]=l[s?d:t-d-1]};if(s){if(!c((function(){C(1)}))||!c((function(){new C(-1)}))||c((function(){return new C,new C(1.5),new C(NaN),C.name!=k}))){I=function(e){return u(this,I),new C(f(e))};for(var V,G=I[T]=C[T],H=y(C),J=0;H.length>J;)(V=H[J++])in I||o(I,V,C[V]);G.constructor=I}m&&p(P)!==M&&m(P,M);var K=new j(new I(2)),Q=P.setInt8;K.setInt8(0,2147483648),K.setInt8(1,2147483649),!K.getInt8(0)&&K.getInt8(1)||a(P,{setInt8:function(e,t){Q.call(this,e,t<<24>>24)},setUint8:function(e,t){Q.call(this,e,t<<24>>24)}},{unsafe:!0})}else I=function(e){u(this,I,k);var t=f(e);_(this,{bytes:g.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},j=function(e,t,n){u(this,j,S),u(e,I,S);var r=x(e).byteLength,s=l(t);if(s<0||s>r)throw R("Wrong offset");if(n=void 0===n?r-s:d(n),s+n>r)throw R(E);_(this,{buffer:e,byteLength:n,byteOffset:s}),i||(this.buffer=e,this.byteLength=n,this.byteOffset=s)},i&&($(I,"byteLength"),$(j,"buffer"),$(j,"byteLength"),$(j,"byteOffset")),a(j[T],{getInt8:function(e){return W(this,1,e)[0]<<24>>24},getUint8:function(e){return W(this,1,e)[0]},getInt16:function(e){var t=W(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=W(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return F(W(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return F(W(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return D(W(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return D(W(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){z(this,1,e,N,t)},setUint8:function(e,t){z(this,1,e,N,t)},setInt16:function(e,t){z(this,2,e,L,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){z(this,2,e,L,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){z(this,4,e,U,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){z(this,4,e,U,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){z(this,4,e,B,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){z(this,8,e,q,t,arguments.length>2?arguments[2]:void 0)}});b(I,k),b(j,S),e.exports={ArrayBuffer:I,DataView:j}},"62e4":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"62eb":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("faa1");function i(e){return void 0!==e&&null!==e}class s extends r.EventEmitter{constructor(e){if(super(),e=e||{},i(e.initialDelay)&&e.initialDelay<1)throw new Error("The initial timeout must be equal to or greater than 1.");if(i(e.maxDelay)&&e.maxDelay<=1)throw new Error("The maximal timeout must be greater than 1.");if(i(e.randomisationFactor)&&(e.randomisationFactor<0||e.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");if(i(e.factor)&&e.factor<=1)throw new Error("Exponential factor should be greater than 1.");if(this.initialDelay=e.initialDelay||100,this.maxDelay=e.maxDelay||1e4,this.maxDelay<=this.initialDelay)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");this.randomisationFactor=e.randomisationFactor||0,this.factor=e.factor||2,this.maxNumberOfRetry=-1,this.reset()}static exponential(e){return new s(e)}backoff(e){null==this.timeoutID&&(this.backoffNumber===this.maxNumberOfRetry?(this.emit("fail",e),this.reset()):(this.backoffDelay=this.next(),this.timeoutID=setTimeout(this.onBackoff.bind(this),this.backoffDelay),this.emit("backoff",this.backoffNumber,this.backoffDelay,e)))}reset(){this.backoffDelay=0,this.nextBackoffDelay=this.initialDelay,this.backoffNumber=0,clearTimeout(this.timeoutID),this.timeoutID=null}failAfter(e){if(e<=0)throw new Error("Expected a maximum number of retry greater than 0 but got "+e);this.maxNumberOfRetry=e}next(){this.backoffDelay=Math.min(this.nextBackoffDelay,this.maxDelay),this.nextBackoffDelay=this.backoffDelay*this.factor;let e=1+Math.random()*this.randomisationFactor;return Math.min(this.maxDelay,Math.round(this.backoffDelay*e))}onBackoff(){this.timeoutID=null,this.emit("ready",this.backoffNumber,this.backoffDelay),this.backoffNumber++}}t.Backoff=s,t.default=s},"649e":function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").some,s=r.aTypedArray,o=r.exportTypedArrayMethod;o("some",(function(e){return i(s(this),e,arguments.length>1?arguments[1]:void 0)}))},6547:function(e,t,n){var r=n("a691"),i=n("577e"),s=n("1d80"),o=function(e){return function(t,n){var o,a,c=i(s(t)),u=r(n),l=c.length;return u<0||u>=l?e?"":void 0:(o=c.charCodeAt(u),o<55296||o>56319||u+1===l||(a=c.charCodeAt(u+1))<56320||a>57343?e?c.charAt(u):o:e?c.slice(u,u+2):a-56320+(o-55296<<10)+65536)}};e.exports={codeAt:o(!1),charAt:o(!0)}},6566:function(e,t,n){"use strict";var r=n("9bf2").f,i=n("7c73"),s=n("e2cc"),o=n("0366"),a=n("19aa"),c=n("2266"),u=n("7dd0"),l=n("2626"),d=n("83ab"),f=n("f183").fastKey,h=n("69f3"),p=h.set,m=h.getterFor;e.exports={getConstructor:function(e,t,n,u){var l=e((function(e,r){a(e,l,t),p(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=r&&c(r,e[u],{that:e,AS_ENTRIES:n})})),h=m(t),y=function(e,t,n){var r,i,s=h(e),o=v(e,t);return o?o.value=n:(s.last=o={index:i=f(t,!0),key:t,value:n,previous:r=s.last,next:void 0,removed:!1},s.first||(s.first=o),r&&(r.next=o),d?s.size++:e.size++,"F"!==i&&(s.index[i]=o)),e},v=function(e,t){var n,r=h(e),i=f(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return s(l.prototype,{clear:function(){var e=this,t=h(e),n=t.index,r=t.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete n[r.index],r=r.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,n=h(t),r=v(t,e);if(r){var i=r.next,s=r.previous;delete n.index[r.index],r.removed=!0,s&&(s.next=i),i&&(i.previous=s),n.first==r&&(n.first=i),n.last==r&&(n.last=s),d?n.size--:t.size--}return!!r},forEach:function(e){var t,n=h(this),r=o(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:n.first){r(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!v(this,e)}}),s(l.prototype,n?{get:function(e){var t=v(this,e);return t&&t.value},set:function(e,t){return y(this,0===e?0:e,t)}}:{add:function(e){return y(this,e=0===e?0:e,e)}}),d&&r(l.prototype,"size",{get:function(){return h(this).size}}),l},setStrong:function(e,t,n){var r=t+" Iterator",i=m(t),s=m(r);u(e,t,(function(e,t){p(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){var e=s(this),t=e.kind,n=e.last;while(n&&n.removed)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(t)}}},"65d1":function(e){e.exports=JSON.parse('{"name":"twilio-mcs-client","version":"0.3.3","description":"Twilio Media Content Service client library","main":"lib/index.js","types":"./lib/client.d.ts","author":"Twilio","license":"MIT","scripts":{},"dependencies":{"loglevel":"^1.6.4","operation-retrier":"^3.0.1","xmlhttprequest":"^1.8.0"},"devDependencies":{"@types/chai":"^4.2.2","@types/chai-as-promised":"^7.1.2","@types/chai-datetime":"0.0.33","@types/chai-string":"^1.4.2","@types/core-js":"^2.5.2","@types/mocha":"^5.2.7","@types/node":"^12.7.4","@types/sinon":"^7.0.13","@types/sinon-chai":"^3.2.3","async":"^3.1.0","async-test-tools":"^1.0.7","babel-core":"^6.26.0","babel-plugin-transform-builtin-extend":"^1.1.2","babel-plugin-transform-runtime":"^6.23.0","babel-preset-env":"^1.6.1","babel-runtime":"^6.26.0","babelify":"^8.0.0","browserify":"^16.0.0","chai":"^4.2.0","chai-as-promised":"^7.1.1","chai-datetime":"^1.5.0","chai-string":"^1.5.0","cheerio":"^1.0.0-rc.2","cross-env":"^5.2.1","del":"^5.1.0","dotenv":"^8.1.0","express":"^4.17.1","gulp":"^4.0.2","gulp-babel":"^7.0.1","gulp-derequire":"^2.1.0","gulp-if":"^3.0.0","gulp-insert":"^0.5.0","gulp-mocha":"^7.0.1","gulp-rename":"^1.4.0","gulp-sourcemaps":"^2.6.5","gulp-tap":"^2.0.0","gulp-tslint":"^8.1.4","gulp-typescript":"^5.0.1","gulp-uglify-es":"^1.0.0","ink-docstrap":"^1.3.2","isomorphic-form-data":"^2.0.0","jsdoc":"~3.5.5","jsdoc-strip-async-await":"^0.1.0","mocha":"^6.2.0","ngrok":"^3.2.5","nyc":"^14.1.1","sinon":"^7.4.2","sinon-chai":"^3.3.0","source-map-explorer":"^2.0.1","ts-node":"^8.3.0","tslint":"^5.19.0","twilio":"^3.34.0","typescript":"^3.6.2","uglify-save-license":"^0.4.1","vinyl-buffer":"^1.0.1","vinyl-source-stream":"^2.0.0"},"browserify":{"transform":["babelify"]},"browser":{"xmlhttprequest":false},"engines":{"node":">=6"}}')},"65f0":function(e,t,n){var r=n("0b42");e.exports=function(e,t){return new(r(e))(0===t?0:t)}},6613:function(e,t,n){n("fb6a"),n("d3b7"),n("b0c0"),n("a630"),n("3ca3");var r=n("5a43");function i(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}e.exports=i,e.exports["default"]=e.exports,e.exports.__esModule=!0},"68b6":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("319d"),i=n("11c1"),s=n("6ab6"),o=n("4d90"),a=n("8a85"),c=n("6e57"),u=n("23b0"),l=3e4;function d(e){return e>=200&&e<300}function f(e){switch(typeof e){case"undefined":return"";case"object":return JSON.stringify(e);default:return e}}class h{}t.PacketResponse=h;class p{constructor(e,t){this.config=t,this.activeRequests=new Map,this.channel=e,this.channel.on("reply",e=>this.processReply(e)),this.channel.on("disconnected",()=>{this.activeRequests.forEach(e=>{clearTimeout(e.timeout),e.reject(new s.TwilsockError("disconnected"))}),this.activeRequests.clear()})}get isConnected(){return this.channel.isConnected}processReply(e){const t=this.activeRequests.get(e.id);t&&(clearTimeout(t.timeout),this.activeRequests.delete(e.id),d(e.status.code)?t.resolve(e):(t.reject(new o.TwilsockReplyError("Transport failure: "+e.status.status,e)),r.log.trace("message rejected")))}storeRequest(e,t,n){let i={resolve:t,reject:n,timeout:setTimeout(()=>{r.log.trace("request",e,"is timed out"),n(new s.TwilsockError("Twilsock: request timeout: "+e))},l)};this.activeRequests.set(e,i)}shutdown(){this.activeRequests.forEach(e=>{clearTimeout(e.timeout),e.reject(new s.TwilsockError("Twilsock: request cancelled by user"))}),this.activeRequests.clear()}async sendInit(){r.log.trace("sendInit");let e=u.Metadata.getMetadata(this.config),t=new c.Init(this.config.token,this.config.continuationToken,e,this.config.initRegistrations,this.config.tweaks),n=await this.sendWithReply(t);return new c.InitReply(n.id,n.header.continuation_token,n.header.continuation_token_status,n.header.offline_storage,n.header.init_registrations,n.header.debug_info,new Set(n.header.capabilities))}sendClose(){let e=new c.Close;this.send(e)}sendWithReply(e,t){return new Promise((n,r)=>{let i=this.send(e,t);this.storeRequest(i,n,r)})}send(e,t){e.id=e.id||"TM"+i.v4();let n=a.Parser.createPacket(e,f(t));try{return this.channel.send(n),e.id}catch(s){throw r.log.debug("failed to send ",e,s),r.log.trace(s.stack),s}}}t.PacketInterface=p},"69f3":function(e,t,n){var r,i,s,o=n("7f9a"),a=n("da84"),c=n("861d"),u=n("9112"),l=n("5135"),d=n("c6cd"),f=n("f772"),h=n("d012"),p="Object already initialized",m=a.WeakMap,y=function(e){return s(e)?i(e):r(e,{})},v=function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if(o||d.state){var g=d.state||(d.state=new m),b=g.get,w=g.has,x=g.set;r=function(e,t){if(w.call(g,e))throw new TypeError(p);return t.facade=e,x.call(g,e,t),t},i=function(e){return b.call(g,e)||{}},s=function(e){return w.call(g,e)}}else{var _=f("state");h[_]=!0,r=function(e,t){if(l(e,_))throw new TypeError(p);return t.facade=e,u(e,_,t),t},i=function(e){return l(e,_)?e[_]:{}},s=function(e){return l(e,_)}}e.exports={set:r,get:i,has:s,enforce:y,getterFor:v}},"6ab6":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e)}}t.TwilsockError=r},"6ae5":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e,t,n,r,i){super(e),this.code=t,this.body=n,this.status=r,this.headers=i}}t.TransportError=r},"6b58":function(e,t,n){var r=n("7037")["default"],i=n("3c96");function s(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?i(e):t}e.exports=s,e.exports["default"]=e.exports,e.exports.__esModule=!0},"6c4f":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("faa1");class i extends r.EventEmitter{constructor(e){super(),this.minDelay=e.min,this.maxDelay=e.max,this.initialDelay=e.initial||0,this.maxAttemptsCount=e.maxAttemptsCount||0,this.maxAttemptsTime=e.maxAttemptsTime||0,this.randomness=e.randomness||0,this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0}attempt(){clearTimeout(this.timeout),this.attemptNum++,this.timeout=null,this.emit("attempt",this)}nextDelay(e){if("number"===typeof e)return this.prevDelay=0,this.currDelay=e,e;if(0==this.attemptNum)return this.initialDelay;if(1==this.attemptNum)return this.currDelay=this.minDelay,this.currDelay;this.prevDelay=this.currDelay;let t=this.currDelay+this.prevDelay;return this.maxDelay&&t>this.maxDelay&&(this.currDelay=this.maxDelay,t=this.maxDelay),this.currDelay=t,t}randomize(e){let t=e*this.randomness,n=Math.round(Math.random()*t*2-t);return Math.max(0,e+n)}scheduleAttempt(e){if(this.maxAttemptsCount&&this.attemptNum>=this.maxAttemptsCount)return this.cleanup(),this.emit("failed",new Error("Maximum attempt count limit reached")),void this.reject(new Error("Maximum attempt count reached"));let t=this.nextDelay(e);if(t=this.randomize(t),this.maxAttemptsTime&&this.startTimestamp+this.maxAttemptsTime<Date.now()+t)return this.cleanup(),this.emit("failed",new Error("Maximum attempt time limit reached")),void this.reject(new Error("Maximum attempt time limit reached"));this.timeout=setTimeout(()=>this.attempt(),t)}cleanup(){clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0}start(){if(this.inProgress)throw new Error("Retrier is already in progress");return this.inProgress=!0,new Promise((e,t)=>{this.resolve=e,this.reject=t,this.startTimestamp=Date.now(),this.scheduleAttempt(this.initialDelay)})}cancel(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.emit("cancelled"),this.reject(new Error("Cancelled")))}succeeded(e){this.emit("succeeded",e),this.resolve(e)}failed(e,t){if(this.timeout)throw new Error("Retrier attempt is already in progress");this.scheduleAttempt(t)}run(e){return this.on("attempt",()=>{e().then(e=>this.succeeded(e)).catch(e=>this.failed(e))}),this.start()}}t.Retrier=i,t.default=i},"6d61":function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),s=n("94ca"),o=n("6eeb"),a=n("f183"),c=n("2266"),u=n("19aa"),l=n("861d"),d=n("d039"),f=n("1c7e"),h=n("d44e"),p=n("7156");e.exports=function(e,t,n){var m=-1!==e.indexOf("Map"),y=-1!==e.indexOf("Weak"),v=m?"set":"add",g=i[e],b=g&&g.prototype,w=g,x={},_=function(e){var t=b[e];o(b,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(y&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(y&&!l(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})},k=s(e,"function"!=typeof g||!(y||b.forEach&&!d((function(){(new g).entries().next()}))));if(k)w=n.getConstructor(t,e,m,v),a.enable();else if(s(e,!0)){var S=new w,T=S[v](y?{}:-0,1)!=S,E=d((function(){S.has(1)})),O=f((function(e){new g(e)})),C=!y&&d((function(){var e=new g,t=5;while(t--)e[v](t,t);return!e.has(-0)}));O||(w=t((function(t,n){u(t,w,e);var r=p(new g,t,w);return void 0!=n&&c(n,r[v],{that:r,AS_ENTRIES:m}),r})),w.prototype=b,b.constructor=w),(E||C)&&(_("delete"),_("has"),m&&_("get")),(C||T)&&_(v),y&&b.clear&&delete b.clear}return x[e]=w,r({global:!0,forced:w!=g},x),h(w,e),y||n.setStrong(w,e,m),w}},"6e57":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("eb0e");t.Init=r.Init;const i=n("3f5e");t.InitReply=i.InitReply;const s=n("0d09");t.Update=s.Update;const o=n("52de");t.Message=o.Message;const a=n("9a25");t.Reply=a.Reply;const c=n("2182");t.Close=c.Close;const u=n("82b0");t.Telemetry=u.Telemetry},"6eeb":function(e,t,n){var r=n("da84"),i=n("9112"),s=n("5135"),o=n("ce4e"),a=n("8925"),c=n("69f3"),u=c.get,l=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,a){var c,u=!!a&&!!a.unsafe,f=!!a&&!!a.enumerable,h=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof t||s(n,"name")||i(n,"name",t),c=l(n),c.source||(c.source=d.join("string"==typeof t?t:""))),e!==r?(u?!h&&e[t]&&(f=!0):delete e[t],f?e[t]=n:i(e,t,n)):f?e[t]=n:o(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||a(this)}))},"6f40":function(e,t,n){"use strict";function r(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function i(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(t,"__esModule",{value:!0}),t.Pointer=void 0;var s=function(){function e(e){void 0===e&&(e=[""]),this.tokens=e}return e.fromJSON=function(t){var n=t.split("/").map(r);if(""!==n[0])throw new Error("Invalid JSON Pointer: "+t);return new e(n)},e.prototype.toString=function(){return this.tokens.map(i).join("/")},e.prototype.evaluate=function(e){for(var t=null,n="",r=e,i=1,s=this.tokens.length;i<s;i++)t=r,n=this.tokens[i],r=(t||{})[n];return{parent:t,key:n,value:r}},e.prototype.get=function(e){return this.evaluate(e).value},e.prototype.set=function(e,t){for(var n=e,r=1,i=this.tokens.length-1,s=this.tokens[r];r<i;r++)n=(n||{})[s];n&&(n[this.tokens[this.tokens.length-1]]=t)},e.prototype.push=function(e){this.tokens.push(e)},e.prototype.add=function(t){var n=this.tokens.concat(String(t));return new e(n)},e}();t.Pointer=s},"6f53":function(e,t,n){var r=n("83ab"),i=n("df75"),s=n("fc6a"),o=n("d1e7").f,a=function(e){return function(t){var n,a=s(t),c=i(a),u=c.length,l=0,d=[];while(u>l)n=c[l++],r&&!o.call(a,n)||d.push(e?[n,a[n]]:a[n]);return d}};e.exports={entries:a(!0),values:a(!1)}},"6f8f":function(e,t,n){function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n("4ae1"),e.exports=r,e.exports["default"]=e.exports,e.exports.__esModule=!0},7037:function(e,t,n){function r(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(e.exports=r=function(e){return typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0):(e.exports=r=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0),r(t)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),e.exports=r,e.exports["default"]=e.exports,e.exports.__esModule=!0},7115:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("faa1"),i=n("8bd1");class s extends r.EventEmitter{constructor(e){super(),this.options=e?Object.assign({},e):{}}get inProgress(){return!!this.retrier}start(){if(this.inProgress)throw new Error("Already waiting for next attempt, call finishAttempt(success : boolean) to finish it");this.createRetrier()}stop(){this.cleanRetrier(),this.newBackoff=null,this.usedBackoff=null}modifyBackoff(e){this.newBackoff=e}attemptFailed(){if(!this.inProgress)throw new Error("No attempt is in progress");if(this.newBackoff){const e=!this.usedBackoff||this.usedBackoff<this.newBackoff;e?this.createRetrier():this.retrier.failed(new Error)}else this.retrier.failed(new Error)}cancel(){this.retrier&&this.retrier.cancel()}cleanRetrier(){this.retrier&&(this.retrier.removeAllListeners(),this.retrier.cancel(),this.retrier=null)}getRetryPolicy(){const e=Object.assign({},this.options);return this.newBackoff&&(e.min=this.newBackoff,e.max=this.options.max&&this.options.max>this.newBackoff?this.options.max:this.newBackoff),e.maxAttemptsCount=this.options.maxAttemptsCount?this.options.maxAttemptsCount+1:void 0,e}createRetrier(){this.cleanRetrier();const e=this.getRetryPolicy();this.retrier=new i.Retrier(e),this.retrier.once("attempt",()=>{this.retrier.on("attempt",()=>this.emit("attempt")),this.retrier.failed(new Error("Skipping first attempt"))}),this.retrier.on("failed",e=>this.emit("failed",e)),this.usedBackoff=this.newBackoff,this.newBackoff=null,this.retrier.start().catch(e=>{})}}t.BackoffRetrier=s},7156:function(e,t,n){var r=n("861d"),i=n("d2bb");e.exports=function(e,t,n){var s,o;return i&&"function"==typeof(s=t.constructor)&&s!==n&&r(o=s.prototype)&&o!==n.prototype&&i(e,o),e}},"72f7":function(e,t,n){"use strict";var r=n("ebb5").exportTypedArrayMethod,i=n("d039"),s=n("da84"),o=s.Uint8Array,a=o&&o.prototype||{},c=[].toString,u=[].join;i((function(){c.call({})}))&&(c=function(){return u.call(this)});var l=a.toString!=c;r("toString",c,l)},"735e":function(e,t,n){"use strict";var r=n("ebb5"),i=n("81d5"),s=r.aTypedArray,o=r.exportTypedArrayMethod;o("fill",(function(e){return i.apply(s(this),arguments)}))},7418:function(e,t){t.f=Object.getOwnPropertySymbols},"746f":function(e,t,n){var r=n("428f"),i=n("5135"),s=n("e538"),o=n("9bf2").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||o(t,e,{value:s.f(e)})}},"74e8":function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),s=n("83ab"),o=n("8aa7"),a=n("ebb5"),c=n("621a"),u=n("19aa"),l=n("5c6c"),d=n("9112"),f=n("5e89"),h=n("50c4"),p=n("0b25"),m=n("182d"),y=n("a04b"),v=n("5135"),g=n("f5df"),b=n("861d"),w=n("d9b5"),x=n("7c73"),_=n("d2bb"),k=n("241c").f,S=n("a078"),T=n("b727").forEach,E=n("2626"),O=n("9bf2"),C=n("06cf"),I=n("69f3"),j=n("7156"),P=I.get,M=I.set,R=O.f,A=C.f,D=Math.round,N=i.RangeError,L=c.ArrayBuffer,U=c.DataView,F=a.NATIVE_ARRAY_BUFFER_VIEWS,B=a.TYPED_ARRAY_CONSTRUCTOR,q=a.TYPED_ARRAY_TAG,$=a.TypedArray,W=a.TypedArrayPrototype,z=a.aTypedArrayConstructor,V=a.isTypedArray,G="BYTES_PER_ELEMENT",H="Wrong length",J=function(e,t){var n=0,r=t.length,i=new(z(e))(r);while(r>n)i[n]=t[n++];return i},K=function(e,t){R(e,t,{get:function(){return P(this)[t]}})},Q=function(e){var t;return e instanceof L||"ArrayBuffer"==(t=g(e))||"SharedArrayBuffer"==t},Y=function(e,t){return V(e)&&!w(t)&&t in e&&f(+t)&&t>=0},X=function(e,t){return t=y(t),Y(e,t)?l(2,e[t]):A(e,t)},Z=function(e,t,n){return t=y(t),!(Y(e,t)&&b(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?R(e,t,n):(e[t]=n.value,e)};s?(F||(C.f=X,O.f=Z,K(W,"buffer"),K(W,"byteOffset"),K(W,"byteLength"),K(W,"length")),r({target:"Object",stat:!0,forced:!F},{getOwnPropertyDescriptor:X,defineProperty:Z}),e.exports=function(e,t,n){var s=e.match(/\d+$/)[0]/8,a=e+(n?"Clamped":"")+"Array",c="get"+e,l="set"+e,f=i[a],y=f,v=y&&y.prototype,g={},w=function(e,t){var n=P(e);return n.view[c](t*s+n.byteOffset,!0)},O=function(e,t,r){var i=P(e);n&&(r=(r=D(r))<0?0:r>255?255:255&r),i.view[l](t*s+i.byteOffset,r,!0)},C=function(e,t){R(e,t,{get:function(){return w(this,t)},set:function(e){return O(this,t,e)},enumerable:!0})};F?o&&(y=t((function(e,t,n,r){return u(e,y,a),j(function(){return b(t)?Q(t)?void 0!==r?new f(t,m(n,s),r):void 0!==n?new f(t,m(n,s)):new f(t):V(t)?J(y,t):S.call(y,t):new f(p(t))}(),e,y)})),_&&_(y,$),T(k(f),(function(e){e in y||d(y,e,f[e])})),y.prototype=v):(y=t((function(e,t,n,r){u(e,y,a);var i,o,c,l=0,d=0;if(b(t)){if(!Q(t))return V(t)?J(y,t):S.call(y,t);i=t,d=m(n,s);var f=t.byteLength;if(void 0===r){if(f%s)throw N(H);if(o=f-d,o<0)throw N(H)}else if(o=h(r)*s,o+d>f)throw N(H);c=o/s}else c=p(t),o=c*s,i=new L(o);M(e,{buffer:i,byteOffset:d,byteLength:o,length:c,view:new U(i)});while(l<c)C(e,l++)})),_&&_(y,$),v=y.prototype=x(W)),v.constructor!==y&&d(v,"constructor",y),d(v,B,y),q&&d(v,q,a),g[a]=y,r({global:!0,forced:y!=f,sham:!F},g),G in y||d(y,G,s),G in v||d(v,G,s),E(a)}):e.exports=function(){}},"77a7":function(e,t){var n=Math.abs,r=Math.pow,i=Math.floor,s=Math.log,o=Math.LN2,a=function(e,t,a){var c,u,l,d=new Array(a),f=8*a-t-1,h=(1<<f)-1,p=h>>1,m=23===t?r(2,-24)-r(2,-77):0,y=e<0||0===e&&1/e<0?1:0,v=0;for(e=n(e),e!=e||e===1/0?(u=e!=e?1:0,c=h):(c=i(s(e)/o),e*(l=r(2,-c))<1&&(c--,l*=2),e+=c+p>=1?m/l:m*r(2,1-p),e*l>=2&&(c++,l/=2),c+p>=h?(u=0,c=h):c+p>=1?(u=(e*l-1)*r(2,t),c+=p):(u=e*r(2,p-1)*r(2,t),c=0));t>=8;d[v++]=255&u,u/=256,t-=8);for(c=c<<t|u,f+=t;f>0;d[v++]=255&c,c/=256,f-=8);return d[--v]|=128*y,d},c=function(e,t){var n,i=e.length,s=8*i-t-1,o=(1<<s)-1,a=o>>1,c=s-7,u=i-1,l=e[u--],d=127&l;for(l>>=7;c>0;d=256*d+e[u],u--,c-=8);for(n=d&(1<<-c)-1,d>>=-c,c+=t;c>0;n=256*n+e[u],u--,c-=8);if(0===d)d=1-a;else{if(d===o)return n?NaN:l?-1/0:1/0;n+=r(2,t),d-=a}return(l?-1:1)*n*r(2,d-t)};e.exports={pack:a,unpack:c}},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7a23":function(e,t,n){"use strict";n.d(t,"k",(function(){return r["J"]})),n.d(t,"a",(function(){return ir})),n.d(t,"c",(function(){return pr})),n.d(t,"d",(function(){return Sr})),n.d(t,"e",(function(){return wr})),n.d(t,"f",(function(){return lr})),n.d(t,"g",(function(){return dt})),n.d(t,"h",(function(){return lt})),n.d(t,"i",(function(){return Ir})),n.d(t,"j",(function(){return er})),n.d(t,"m",(function(){return Un})),n.d(t,"o",(function(){return ft})),n.d(t,"b",(function(){return os})),n.d(t,"l",(function(){return es})),n.d(t,"n",(function(){return ns}));var r=n("9ff4");const i=new WeakMap,s=[];let o;const a=Symbol(""),c=Symbol("");function u(e){return e&&!0===e._isEffect}function l(e,t=r["b"]){u(e)&&(e=e.raw);const n=h(e,t);return t.lazy||n(),n}function d(e){e.active&&(p(e),e.options.onStop&&e.options.onStop(),e.active=!1)}let f=0;function h(e,t){const n=function(){if(!n.active)return e();if(!s.includes(n)){p(n);try{return g(),s.push(n),o=n,e()}finally{s.pop(),b(),o=s[s.length-1]}}};return n.id=f++,n.allowRecurse=!!t.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=e,n.deps=[],n.options=t,n}function p(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let m=!0;const y=[];function v(){y.push(m),m=!1}function g(){y.push(m),m=!0}function b(){const e=y.pop();m=void 0===e||e}function w(e,t,n){if(!m||void 0===o)return;let r=i.get(e);r||i.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=new Set),s.has(o)||(s.add(o),o.deps.push(s))}function x(e,t,n,s,u,l){const d=i.get(e);if(!d)return;const f=new Set,h=e=>{e&&e.forEach(e=>{(e!==o||e.allowRecurse)&&f.add(e)})};if("clear"===t)d.forEach(h);else if("length"===n&&Object(r["m"])(e))d.forEach((e,t)=>{("length"===t||t>=s)&&h(e)});else switch(void 0!==n&&h(d.get(n)),t){case"add":Object(r["m"])(e)?Object(r["q"])(n)&&h(d.get("length")):(h(d.get(a)),Object(r["r"])(e)&&h(d.get(c)));break;case"delete":Object(r["m"])(e)||(h(d.get(a)),Object(r["r"])(e)&&h(d.get(c)));break;case"set":Object(r["r"])(e)&&h(d.get(a));break}const p=e=>{e.options.scheduler?e.options.scheduler(e):e()};f.forEach(p)}const _=Object(r["F"])("__proto__,__v_isRef,__isVue"),k=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(r["C"])),S=I(),T=I(!1,!0),E=I(!0),O=C();function C(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...e){const n=xe(this);for(let t=0,i=this.length;t<i;t++)w(n,"get",t+"");const r=n[t](...e);return-1===r||!1===r?n[t](...e.map(xe)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...e){v();const n=xe(this)[t].apply(this,e);return b(),n}}),e}function I(e=!1,t=!1){return function(n,i,s){if("__v_isReactive"===i)return!e;if("__v_isReadonly"===i)return e;if("__v_raw"===i&&s===(e?t?de:le:t?ue:ce).get(n))return n;const o=Object(r["m"])(n);if(!e&&o&&Object(r["j"])(O,i))return Reflect.get(O,i,s);const a=Reflect.get(n,i,s);if(Object(r["C"])(i)?k.has(i):_(i))return a;if(e||w(n,"get",i),t)return a;if(ke(a)){const e=!o||!Object(r["q"])(i);return e?a.value:a}return Object(r["t"])(a)?e?ye(a):pe(a):a}}const j=M(),P=M(!0);function M(e=!1){return function(t,n,i,s){let o=t[n];if(!e&&(i=xe(i),o=xe(o),!Object(r["m"])(t)&&ke(o)&&!ke(i)))return o.value=i,!0;const a=Object(r["m"])(t)&&Object(r["q"])(n)?Number(n)<t.length:Object(r["j"])(t,n),c=Reflect.set(t,n,i,s);return t===xe(s)&&(a?Object(r["i"])(i,o)&&x(t,"set",n,i,o):x(t,"add",n,i)),c}}function R(e,t){const n=Object(r["j"])(e,t),i=e[t],s=Reflect.deleteProperty(e,t);return s&&n&&x(e,"delete",t,void 0,i),s}function A(e,t){const n=Reflect.has(e,t);return Object(r["C"])(t)&&k.has(t)||w(e,"has",t),n}function D(e){return w(e,"iterate",Object(r["m"])(e)?"length":a),Reflect.ownKeys(e)}const N={get:S,set:j,deleteProperty:R,has:A,ownKeys:D},L={get:E,set(e,t){return!0},deleteProperty(e,t){return!0}},U=Object(r["h"])({},N,{get:T,set:P}),F=e=>Object(r["t"])(e)?pe(e):e,B=e=>Object(r["t"])(e)?ye(e):e,q=e=>e,$=e=>Reflect.getPrototypeOf(e);function W(e,t,n=!1,r=!1){e=e["__v_raw"];const i=xe(e),s=xe(t);t!==s&&!n&&w(i,"get",t),!n&&w(i,"get",s);const{has:o}=$(i),a=r?q:n?B:F;return o.call(i,t)?a(e.get(t)):o.call(i,s)?a(e.get(s)):void(e!==i&&e.get(t))}function z(e,t=!1){const n=this["__v_raw"],r=xe(n),i=xe(e);return e!==i&&!t&&w(r,"has",e),!t&&w(r,"has",i),e===i?n.has(e):n.has(e)||n.has(i)}function V(e,t=!1){return e=e["__v_raw"],!t&&w(xe(e),"iterate",a),Reflect.get(e,"size",e)}function G(e){e=xe(e);const t=xe(this),n=$(t),r=n.has.call(t,e);return r||(t.add(e),x(t,"add",e,e)),this}function H(e,t){t=xe(t);const n=xe(this),{has:i,get:s}=$(n);let o=i.call(n,e);o||(e=xe(e),o=i.call(n,e));const a=s.call(n,e);return n.set(e,t),o?Object(r["i"])(t,a)&&x(n,"set",e,t,a):x(n,"add",e,t),this}function J(e){const t=xe(this),{has:n,get:r}=$(t);let i=n.call(t,e);i||(e=xe(e),i=n.call(t,e));const s=r?r.call(t,e):void 0,o=t.delete(e);return i&&x(t,"delete",e,void 0,s),o}function K(){const e=xe(this),t=0!==e.size,n=void 0,r=e.clear();return t&&x(e,"clear",void 0,void 0,n),r}function Q(e,t){return function(n,r){const i=this,s=i["__v_raw"],o=xe(s),c=t?q:e?B:F;return!e&&w(o,"iterate",a),s.forEach((e,t)=>n.call(r,c(e),c(t),i))}}function Y(e,t,n){return function(...i){const s=this["__v_raw"],o=xe(s),u=Object(r["r"])(o),l="entries"===e||e===Symbol.iterator&&u,d="keys"===e&&u,f=s[e](...i),h=n?q:t?B:F;return!t&&w(o,"iterate",d?c:a),{next(){const{value:e,done:t}=f.next();return t?{value:e,done:t}:{value:l?[h(e[0]),h(e[1])]:h(e),done:t}},[Symbol.iterator](){return this}}}}function X(e){return function(...t){return"delete"!==e&&this}}function Z(){const e={get(e){return W(this,e)},get size(){return V(this)},has:z,add:G,set:H,delete:J,clear:K,forEach:Q(!1,!1)},t={get(e){return W(this,e,!1,!0)},get size(){return V(this)},has:z,add:G,set:H,delete:J,clear:K,forEach:Q(!1,!0)},n={get(e){return W(this,e,!0)},get size(){return V(this,!0)},has(e){return z.call(this,e,!0)},add:X("add"),set:X("set"),delete:X("delete"),clear:X("clear"),forEach:Q(!0,!1)},r={get(e){return W(this,e,!0,!0)},get size(){return V(this,!0)},has(e){return z.call(this,e,!0)},add:X("add"),set:X("set"),delete:X("delete"),clear:X("clear"),forEach:Q(!0,!0)},i=["keys","values","entries",Symbol.iterator];return i.forEach(i=>{e[i]=Y(i,!1,!1),n[i]=Y(i,!0,!1),t[i]=Y(i,!1,!0),r[i]=Y(i,!0,!0)}),[e,n,t,r]}const[ee,te,ne,re]=Z();function ie(e,t){const n=t?e?re:ne:e?te:ee;return(t,i,s)=>"__v_isReactive"===i?!e:"__v_isReadonly"===i?e:"__v_raw"===i?t:Reflect.get(Object(r["j"])(n,i)&&i in t?n:t,i,s)}const se={get:ie(!1,!1)},oe={get:ie(!1,!0)},ae={get:ie(!0,!1)};const ce=new WeakMap,ue=new WeakMap,le=new WeakMap,de=new WeakMap;function fe(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function he(e){return e["__v_skip"]||!Object.isExtensible(e)?0:fe(Object(r["M"])(e))}function pe(e){return e&&e["__v_isReadonly"]?e:ve(e,!1,N,se,ce)}function me(e){return ve(e,!1,U,oe,ue)}function ye(e){return ve(e,!0,L,ae,le)}function ve(e,t,n,i,s){if(!Object(r["t"])(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const o=s.get(e);if(o)return o;const a=he(e);if(0===a)return e;const c=new Proxy(e,2===a?i:n);return s.set(e,c),c}function ge(e){return be(e)?ge(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function be(e){return!(!e||!e["__v_isReadonly"])}function we(e){return ge(e)||be(e)}function xe(e){return e&&xe(e["__v_raw"])||e}function _e(e){return Object(r["g"])(e,"__v_skip",!0),e}function ke(e){return Boolean(e&&!0===e.__v_isRef)}function Se(e){return ke(e)?e.value:e}const Te={get:(e,t,n)=>Se(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return ke(i)&&!ke(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Ee(e){return ge(e)?e:new Proxy(e,Te)}class Oe{constructor(e,t,n){this._setter=t,this._dirty=!0,this.__v_isRef=!0,this.effect=l(e,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,x(xe(this),"set","value"))}}),this["__v_isReadonly"]=n}get value(){const e=xe(this);return e._dirty&&(e._value=this.effect(),e._dirty=!1),w(e,"get","value"),e._value}set value(e){this._setter(e)}}function Ce(e){let t,n;return Object(r["n"])(e)?(t=e,n=r["d"]):(t=e.get,n=e.set),new Oe(t,n,Object(r["n"])(e)||!e.set)}function Ie(e,t,n,r){let i;try{i=r?e(...r):e()}catch(s){Pe(s,t,n)}return i}function je(e,t,n,i){if(Object(r["n"])(e)){const s=Ie(e,t,n,i);return s&&Object(r["w"])(s)&&s.catch(e=>{Pe(e,t,n)}),s}const s=[];for(let r=0;r<e.length;r++)s.push(je(e[r],t,n,i));return s}function Pe(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let r=t.parent;const i=t.proxy,s=n;while(r){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,s))return;r=r.parent}const o=t.appContext.config.errorHandler;if(o)return void Ie(o,null,10,[e,i,s])}Me(e,n,i,r)}function Me(e,t,n,r=!0){console.error(e)}let Re=!1,Ae=!1;const De=[];let Ne=0;const Le=[];let Ue=null,Fe=0;const Be=[];let qe=null,$e=0;const We=Promise.resolve();let ze=null,Ve=null;function Ge(e){const t=ze||We;return e?t.then(this?e.bind(this):e):t}function He(e){let t=Ne+1,n=De.length;const r=nt(e);while(t<n){const e=t+n>>>1,i=nt(De[e]);i<r?t=e+1:n=e}return t}function Je(e){if((!De.length||!De.includes(e,Re&&e.allowRecurse?Ne+1:Ne))&&e!==Ve){const t=He(e);t>-1?De.splice(t,0,e):De.push(e),Ke()}}function Ke(){Re||Ae||(Ae=!0,ze=We.then(rt))}function Qe(e){const t=De.indexOf(e);t>Ne&&De.splice(t,1)}function Ye(e,t,n,i){Object(r["m"])(e)?n.push(...e):t&&t.includes(e,e.allowRecurse?i+1:i)||n.push(e),Ke()}function Xe(e){Ye(e,Ue,Le,Fe)}function Ze(e){Ye(e,qe,Be,$e)}function et(e,t=null){if(Le.length){for(Ve=t,Ue=[...new Set(Le)],Le.length=0,Fe=0;Fe<Ue.length;Fe++)Ue[Fe]();Ue=null,Fe=0,Ve=null,et(e,t)}}function tt(e){if(Be.length){const e=[...new Set(Be)];if(Be.length=0,qe)return void qe.push(...e);for(qe=e,qe.sort((e,t)=>nt(e)-nt(t)),$e=0;$e<qe.length;$e++)qe[$e]();qe=null,$e=0}}const nt=e=>null==e.id?1/0:e.id;function rt(e){Ae=!1,Re=!0,et(e),De.sort((e,t)=>nt(e)-nt(t));try{for(Ne=0;Ne<De.length;Ne++){const e=De[Ne];e&&!1!==e.active&&Ie(e,null,14)}}finally{Ne=0,De.length=0,tt(e),Re=!1,ze=null,(De.length||Le.length||Be.length)&&rt(e)}}new Set;new Map;Object.create(null),Object.create(null);function it(e,t,...n){const i=e.vnode.props||r["b"];let s=n;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in i){const e=("modelValue"===a?"model":a)+"Modifiers",{number:t,trim:o}=i[e]||r["b"];o?s=n.map(e=>e.trim()):t&&(s=n.map(r["L"]))}let c;let u=i[c=Object(r["K"])(t)]||i[c=Object(r["K"])(Object(r["e"])(t))];!u&&o&&(u=i[c=Object(r["K"])(Object(r["k"])(t))]),u&&je(u,e,6,s);const l=i[c+"Once"];if(l){if(e.emitted){if(e.emitted[c])return}else e.emitted={};e.emitted[c]=!0,je(l,e,6,s)}}function st(e,t,n=!1){const i=t.emitsCache,s=i.get(e);if(void 0!==s)return s;const o=e.emits;let a={},c=!1;if(!Object(r["n"])(e)){const i=e=>{const n=st(e,t,!0);n&&(c=!0,Object(r["h"])(a,n))};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return o||c?(Object(r["m"])(o)?o.forEach(e=>a[e]=null):Object(r["h"])(a,o),i.set(e,a),a):(i.set(e,null),null)}function ot(e,t){return!(!e||!Object(r["u"])(t))&&(t=t.slice(2).replace(/Once$/,""),Object(r["j"])(e,t[0].toLowerCase()+t.slice(1))||Object(r["j"])(e,Object(r["k"])(t))||Object(r["j"])(e,t))}let at=null,ct=null;function ut(e){const t=at;return at=e,ct=e&&e.type.__scopeId||null,t}function lt(e){ct=e}function dt(){ct=null}const ft=e=>ht;function ht(e,t=at,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&hr(-1);const i=ut(t),s=e(...n);return ut(i),r._d&&hr(1),s};return r._n=!0,r._c=!0,r._d=!0,r}function pt(e){const{type:t,vnode:n,proxy:i,withProxy:s,props:o,propsOptions:[a],slots:c,attrs:u,emit:l,render:d,renderCache:f,data:h,setupState:p,ctx:m,inheritAttrs:y}=e;let v;const g=ut(e);try{let e;if(4&n.shapeFlag){const t=s||i;v=Tr(d.call(t,t,f,o,p,h,m)),e=u}else{const n=t;0,v=Tr(n.length>1?n(o,{attrs:u,slots:c,emit:l}):n(o,null)),e=t.props?u:mt(u)}let g=v;if(e&&!1!==y){const t=Object.keys(e),{shapeFlag:n}=g;t.length&&(1&n||6&n)&&(a&&t.some(r["s"])&&(e=yt(e,a)),g=_r(g,e))}0,n.dirs&&(g.dirs=g.dirs?g.dirs.concat(n.dirs):n.dirs),n.transition&&(g.transition=n.transition),v=g}catch(b){cr.length=0,Pe(b,e,1),v=wr(or)}return ut(g),v}const mt=e=>{let t;for(const n in e)("class"===n||"style"===n||Object(r["u"])(n))&&((t||(t={}))[n]=e[n]);return t},yt=(e,t)=>{const n={};for(const i in e)Object(r["s"])(i)&&i.slice(9)in t||(n[i]=e[i]);return n};function vt(e,t,n){const{props:r,children:i,component:s}=e,{props:o,children:a,patchFlag:c}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&c>=0))return!(!i&&!a||a&&a.$stable)||r!==o&&(r?!o||gt(r,o,u):!!o);if(1024&c)return!0;if(16&c)return r?gt(r,o,u):!!o;if(8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(o[n]!==r[n]&&!ot(u,n))return!0}}return!1}function gt(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!ot(n,s))return!0}return!1}function bt({vnode:e,parent:t},n){while(t&&t.subTree===e)(e=t.vnode).el=n,t=t.parent}const wt=e=>e.__isSuspense;function xt(e,t){t&&t.pendingBranch?Object(r["m"])(e)?t.effects.push(...e):t.effects.push(e):Ze(e)}function _t(e,t){if(Lr){let n=Lr.provides;const r=Lr.parent&&Lr.parent.provides;r===n&&(n=Lr.provides=Object.create(r)),n[e]=t}else 0}function kt(e,t,n=!1){const i=Lr||at;if(i){const s=null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&Object(r["n"])(t)?t.call(i.proxy):t}else 0}const St={};function Tt(e,t,n){return Et(e,t,n)}function Et(e,t,{immediate:n,deep:i,flush:s,onTrack:o,onTrigger:a}=r["b"],c=Lr){let u,f,h=!1,p=!1;if(ke(e)?(u=()=>e.value,h=!!e._shallow):ge(e)?(u=()=>e,i=!0):Object(r["m"])(e)?(p=!0,h=e.some(ge),u=()=>e.map(e=>ke(e)?e.value:ge(e)?It(e):Object(r["n"])(e)?Ie(e,c,2):void 0)):u=Object(r["n"])(e)?t?()=>Ie(e,c,2):()=>{if(!c||!c.isUnmounted)return f&&f(),je(e,c,3,[m])}:r["d"],t&&i){const e=u;u=()=>It(e())}let m=e=>{f=b.options.onStop=()=>{Ie(e,c,4)}},y=p?[]:St;const v=()=>{if(b.active)if(t){const e=b();(i||h||(p?e.some((e,t)=>Object(r["i"])(e,y[t])):Object(r["i"])(e,y)))&&(f&&f(),je(t,c,3,[e,y===St?void 0:y,m]),y=e)}else b()};let g;v.allowRecurse=!!t,g="sync"===s?v:"post"===s?()=>Vn(v,c&&c.suspense):()=>{!c||c.isMounted?Xe(v):v()};const b=l(u,{lazy:!0,onTrack:o,onTrigger:a,scheduler:g});return Kr(b,c),t?n?v():y=b():"post"===s?Vn(b,c&&c.suspense):b(),()=>{d(b),c&&Object(r["I"])(c.effects,b)}}function Ot(e,t,n){const i=this.proxy,s=Object(r["B"])(e)?e.includes(".")?Ct(i,e):()=>i[e]:e.bind(i,i);let o;return Object(r["n"])(t)?o=t:(o=t.handler,n=t),Et(s,o.bind(i),n,this)}function Ct(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function It(e,t=new Set){if(!Object(r["t"])(e)||e["__v_skip"])return e;if(t=t||new Set,t.has(e))return e;if(t.add(e),ke(e))It(e.value,t);else if(Object(r["m"])(e))for(let n=0;n<e.length;n++)It(e[n],t);else if(Object(r["z"])(e)||Object(r["r"])(e))e.forEach(e=>{It(e,t)});else if(Object(r["v"])(e))for(const n in e)It(e[n],t);return e}function jt(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Xt(()=>{e.isMounted=!0}),tn(()=>{e.isUnmounting=!0}),e}const Pt=[Function,Array],Mt={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Pt,onEnter:Pt,onAfterEnter:Pt,onEnterCancelled:Pt,onBeforeLeave:Pt,onLeave:Pt,onAfterLeave:Pt,onLeaveCancelled:Pt,onBeforeAppear:Pt,onAppear:Pt,onAfterAppear:Pt,onAppearCancelled:Pt},setup(e,{slots:t}){const n=Ur(),r=jt();let i;return()=>{const s=t.default&&Ft(t.default(),!0);if(!s||!s.length)return;const o=xe(e),{mode:a}=o;const c=s[0];if(r.isLeaving)return Nt(c);const u=Lt(c);if(!u)return Nt(c);const l=Dt(u,o,r,n);Ut(u,l);const d=n.subTree,f=d&&Lt(d);let h=!1;const{getTransitionKey:p}=u.type;if(p){const e=p();void 0===i?i=e:e!==i&&(i=e,h=!0)}if(f&&f.type!==or&&(!yr(u,f)||h)){const e=Dt(f,o,r,n);if(Ut(f,e),"out-in"===a)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,n.update()},Nt(c);"in-out"===a&&u.type!==or&&(e.delayLeave=(e,t,n)=>{const i=At(r,f);i[String(f.key)]=f,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=n})}return c}}},Rt=Mt;function At(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Dt(e,t,n,r){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:u,onEnterCancelled:l,onBeforeLeave:d,onLeave:f,onAfterLeave:h,onLeaveCancelled:p,onBeforeAppear:m,onAppear:y,onAfterAppear:v,onAppearCancelled:g}=t,b=String(e.key),w=At(n,e),x=(e,t)=>{e&&je(e,r,9,t)},_={mode:s,persisted:o,beforeEnter(t){let r=a;if(!n.isMounted){if(!i)return;r=m||a}t._leaveCb&&t._leaveCb(!0);const s=w[b];s&&yr(e,s)&&s.el._leaveCb&&s.el._leaveCb(),x(r,[t])},enter(e){let t=c,r=u,s=l;if(!n.isMounted){if(!i)return;t=y||c,r=v||u,s=g||l}let o=!1;const a=e._enterCb=t=>{o||(o=!0,x(t?s:r,[e]),_.delayedLeave&&_.delayedLeave(),e._enterCb=void 0)};t?(t(e,a),t.length<=1&&a()):a()},leave(t,r){const i=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return r();x(d,[t]);let s=!1;const o=t._leaveCb=n=>{s||(s=!0,r(),x(n?p:h,[t]),t._leaveCb=void 0,w[i]===e&&delete w[i])};w[i]=e,f?(f(t,o),f.length<=1&&o()):o()},clone(e){return Dt(e,t,n,r)}};return _}function Nt(e){if(qt(e))return e=_r(e),e.children=null,e}function Lt(e){return qt(e)?e.children?e.children[0]:void 0:e}function Ut(e,t){6&e.shapeFlag&&e.component?Ut(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ft(e,t=!1){let n=[],r=0;for(let i=0;i<e.length;i++){const s=e[i];s.type===ir?(128&s.patchFlag&&r++,n=n.concat(Ft(s.children,t))):(t||s.type!==or)&&n.push(s)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}const Bt=e=>!!e.type.__asyncLoader;const qt=e=>e.type.__isKeepAlive;RegExp,RegExp;function $t(e,t){return Object(r["m"])(e)?e.some(e=>$t(e,t)):Object(r["B"])(e)?e.split(",").indexOf(t)>-1:!!e.test&&e.test(t)}function Wt(e,t){Vt(e,"a",t)}function zt(e,t){Vt(e,"da",t)}function Vt(e,t,n=Lr){const r=e.__wdc||(e.__wdc=()=>{let t=n;while(t){if(t.isDeactivated)return;t=t.parent}e()});if(Kt(t,r,n),n){let e=n.parent;while(e&&e.parent)qt(e.parent.vnode)&&Gt(r,t,n,e),e=e.parent}}function Gt(e,t,n,i){const s=Kt(t,e,i,!0);nn(()=>{Object(r["I"])(i[t],s)},n)}function Ht(e){let t=e.shapeFlag;256&t&&(t-=256),512&t&&(t-=512),e.shapeFlag=t}function Jt(e){return 128&e.shapeFlag?e.ssContent:e}function Kt(e,t,n=Lr,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...r)=>{if(n.isUnmounted)return;v(),Fr(n);const i=je(t,n,e,r);return Fr(null),b(),i});return r?i.unshift(s):i.push(s),s}}const Qt=e=>(t,n=Lr)=>(!$r||"sp"===e)&&Kt(e,t,n),Yt=Qt("bm"),Xt=Qt("m"),Zt=Qt("bu"),en=Qt("u"),tn=Qt("bum"),nn=Qt("um"),rn=Qt("sp"),sn=Qt("rtg"),on=Qt("rtc");function an(e,t=Lr){Kt("ec",e,t)}let cn=!0;function un(e){const t=hn(e),n=e.proxy,i=e.ctx;cn=!1,t.beforeCreate&&dn(t.beforeCreate,e,"bc");const{data:s,computed:o,methods:a,watch:c,provide:u,inject:l,created:d,beforeMount:f,mounted:h,beforeUpdate:p,updated:m,activated:y,deactivated:v,beforeDestroy:g,beforeUnmount:b,destroyed:w,unmounted:x,render:_,renderTracked:k,renderTriggered:S,errorCaptured:T,serverPrefetch:E,expose:O,inheritAttrs:C,components:I,directives:j,filters:P}=t,M=null;if(l&&ln(l,i,M),a)for(const A in a){const e=a[A];Object(r["n"])(e)&&(i[A]=e.bind(n))}if(s){0;const t=s.call(n,n);0,Object(r["t"])(t)&&(e.data=pe(t))}if(cn=!0,o)for(const A in o){const e=o[A],t=Object(r["n"])(e)?e.bind(n,n):Object(r["n"])(e.get)?e.get.bind(n,n):r["d"];0;const s=!Object(r["n"])(e)&&Object(r["n"])(e.set)?e.set.bind(n):r["d"],a=Xr({get:t,set:s});Object.defineProperty(i,A,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e})}if(c)for(const r in c)fn(c[r],i,n,r);if(u){const e=Object(r["n"])(u)?u.call(n):u;Reflect.ownKeys(e).forEach(t=>{_t(t,e[t])})}function R(e,t){Object(r["m"])(t)?t.forEach(t=>e(t.bind(n))):t&&e(t.bind(n))}if(d&&dn(d,e,"c"),R(Yt,f),R(Xt,h),R(Zt,p),R(en,m),R(Wt,y),R(zt,v),R(an,T),R(on,k),R(sn,S),R(tn,b),R(nn,x),R(rn,E),Object(r["m"])(O))if(O.length){const t=e.exposed||(e.exposed={});O.forEach(e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})})}else e.exposed||(e.exposed={});_&&e.render===r["d"]&&(e.render=_),null!=C&&(e.inheritAttrs=C),I&&(e.components=I),j&&(e.directives=j)}function ln(e,t,n=r["d"]){Object(r["m"])(e)&&(e=gn(e));for(const i in e){const n=e[i];Object(r["t"])(n)?t[i]="default"in n?kt(n.from||i,n.default,!0):kt(n.from||i):t[i]=kt(n)}}function dn(e,t,n){je(Object(r["m"])(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,n)}function fn(e,t,n,i){const s=i.includes(".")?Ct(n,i):()=>n[i];if(Object(r["B"])(e)){const n=t[e];Object(r["n"])(n)&&Tt(s,n)}else if(Object(r["n"])(e))Tt(s,e.bind(n));else if(Object(r["t"])(e))if(Object(r["m"])(e))e.forEach(e=>fn(e,t,n,i));else{const i=Object(r["n"])(e.handler)?e.handler.bind(n):t[e.handler];Object(r["n"])(i)&&Tt(s,i,e)}else 0}function hn(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let c;return a?c=a:i.length||n||r?(c={},i.length&&i.forEach(e=>pn(c,e,o,!0)),pn(c,t,o)):c=t,s.set(t,c),c}function pn(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&pn(e,s,n,!0),i&&i.forEach(t=>pn(e,t,n,!0));for(const o in t)if(r&&"expose"===o);else{const r=mn[o]||n&&n[o];e[o]=r?r(e[o],t[o]):t[o]}return e}const mn={data:yn,props:wn,emits:wn,methods:wn,computed:wn,beforeCreate:bn,created:bn,beforeMount:bn,mounted:bn,beforeUpdate:bn,updated:bn,beforeDestroy:bn,destroyed:bn,activated:bn,deactivated:bn,errorCaptured:bn,serverPrefetch:bn,components:wn,directives:wn,watch:xn,provide:yn,inject:vn};function yn(e,t){return t?e?function(){return Object(r["h"])(Object(r["n"])(e)?e.call(this,this):e,Object(r["n"])(t)?t.call(this,this):t)}:t:e}function vn(e,t){return wn(gn(e),gn(t))}function gn(e){if(Object(r["m"])(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function bn(e,t){return e?[...new Set([].concat(e,t))]:t}function wn(e,t){return e?Object(r["h"])(Object(r["h"])(Object.create(null),e),t):t}function xn(e,t){if(!e)return t;if(!t)return e;const n=Object(r["h"])(Object.create(null),e);for(const r in t)n[r]=bn(e[r],t[r]);return n}function _n(e,t,n,i=!1){const s={},o={};Object(r["g"])(o,vr,1),e.propsDefaults=Object.create(null),Sn(e,t,s,o);for(const r in e.propsOptions[0])r in s||(s[r]=void 0);n?e.props=i?s:me(s):e.type.props?e.props=s:e.props=o,e.attrs=o}function kn(e,t,n,i){const{props:s,attrs:o,vnode:{patchFlag:a}}=e,c=xe(s),[u]=e.propsOptions;let l=!1;if(!(i||a>0)||16&a){let i;Sn(e,t,s,o)&&(l=!0);for(const o in c)t&&(Object(r["j"])(t,o)||(i=Object(r["k"])(o))!==o&&Object(r["j"])(t,i))||(u?!n||void 0===n[o]&&void 0===n[i]||(s[o]=Tn(u,c,o,void 0,e,!0)):delete s[o]);if(o!==c)for(const e in o)t&&Object(r["j"])(t,e)||(delete o[e],l=!0)}else if(8&a){const n=e.vnode.dynamicProps;for(let i=0;i<n.length;i++){let a=n[i];const d=t[a];if(u)if(Object(r["j"])(o,a))d!==o[a]&&(o[a]=d,l=!0);else{const t=Object(r["e"])(a);s[t]=Tn(u,c,t,d,e,!1)}else d!==o[a]&&(o[a]=d,l=!0)}}l&&x(e,"set","$attrs")}function Sn(e,t,n,i){const[s,o]=e.propsOptions;let a,c=!1;if(t)for(let u in t){if(Object(r["x"])(u))continue;const l=t[u];let d;s&&Object(r["j"])(s,d=Object(r["e"])(u))?o&&o.includes(d)?(a||(a={}))[d]=l:n[d]=l:ot(e.emitsOptions,u)||l!==i[u]&&(i[u]=l,c=!0)}if(o){const t=xe(n),i=a||r["b"];for(let a=0;a<o.length;a++){const c=o[a];n[c]=Tn(s,t,c,i[c],e,!Object(r["j"])(i,c))}}return c}function Tn(e,t,n,i,s,o){const a=e[n];if(null!=a){const e=Object(r["j"])(a,"default");if(e&&void 0===i){const e=a.default;if(a.type!==Function&&Object(r["n"])(e)){const{propsDefaults:r}=s;n in r?i=r[n]:(Fr(s),i=r[n]=e.call(null,t),Fr(null))}else i=e}a[0]&&(o&&!e?i=!1:!a[1]||""!==i&&i!==Object(r["k"])(n)||(i=!0))}return i}function En(e,t,n=!1){const i=t.propsCache,s=i.get(e);if(s)return s;const o=e.props,a={},c=[];let u=!1;if(!Object(r["n"])(e)){const i=e=>{u=!0;const[n,i]=En(e,t,!0);Object(r["h"])(a,n),i&&c.push(...i)};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}if(!o&&!u)return i.set(e,r["a"]),r["a"];if(Object(r["m"])(o))for(let d=0;d<o.length;d++){0;const e=Object(r["e"])(o[d]);On(e)&&(a[e]=r["b"])}else if(o){0;for(const e in o){const t=Object(r["e"])(e);if(On(t)){const n=o[e],i=a[t]=Object(r["m"])(n)||Object(r["n"])(n)?{type:n}:n;if(i){const e=jn(Boolean,i.type),n=jn(String,i.type);i[0]=e>-1,i[1]=n<0||e<n,(e>-1||Object(r["j"])(i,"default"))&&c.push(t)}}}}const l=[a,c];return i.set(e,l),l}function On(e){return"$"!==e[0]}function Cn(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function In(e,t){return Cn(e)===Cn(t)}function jn(e,t){return Object(r["m"])(t)?t.findIndex(t=>In(t,e)):Object(r["n"])(t)&&In(t,e)?0:-1}const Pn=e=>"_"===e[0]||"$stable"===e,Mn=e=>Object(r["m"])(e)?e.map(Tr):[Tr(e)],Rn=(e,t,n)=>{const r=ht(e=>Mn(t(e)),n);return r._c=!1,r},An=(e,t,n)=>{const i=e._ctx;for(const s in e){if(Pn(s))continue;const n=e[s];if(Object(r["n"])(n))t[s]=Rn(s,n,i);else if(null!=n){0;const e=Mn(n);t[s]=()=>e}}},Dn=(e,t)=>{const n=Mn(t);e.slots.default=()=>n},Nn=(e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=xe(t),Object(r["g"])(t,"_",n)):An(t,e.slots={})}else e.slots={},t&&Dn(e,t);Object(r["g"])(e.slots,vr,1)},Ln=(e,t,n)=>{const{vnode:i,slots:s}=e;let o=!0,a=r["b"];if(32&i.shapeFlag){const e=t._;e?n&&1===e?o=!1:(Object(r["h"])(s,t),n||1!==e||delete s._):(o=!t.$stable,An(t,s)),a=t}else t&&(Dn(e,t),a={default:1});if(o)for(const r in s)Pn(r)||r in a||delete s[r]};function Un(e,t){const n=at;if(null===n)return e;const i=n.proxy,s=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[e,n,a,c=r["b"]]=t[o];Object(r["n"])(e)&&(e={mounted:e,updated:e}),e.deep&&It(n),s.push({dir:e,instance:i,value:n,oldValue:void 0,arg:a,modifiers:c})}return e}function Fn(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let c=a.dir[r];c&&(v(),je(c,n,8,[e.el,a,e,t]),b())}}function Bn(){return{app:null,config:{isNativeTag:r["c"],performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qn=0;function $n(e,t){return function(n,i=null){null==i||Object(r["t"])(i)||(i=null);const s=Bn(),o=new Set;let a=!1;const c=s.app={_uid:qn++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:ei,get config(){return s.config},set config(e){0},use(e,...t){return o.has(e)||(e&&Object(r["n"])(e.install)?(o.add(e),e.install(c,...t)):Object(r["n"])(e)&&(o.add(e),e(c,...t))),c},mixin(e){return s.mixins.includes(e)||s.mixins.push(e),c},component(e,t){return t?(s.components[e]=t,c):s.components[e]},directive(e,t){return t?(s.directives[e]=t,c):s.directives[e]},mount(r,o,u){if(!a){const l=wr(n,i);return l.appContext=s,o&&t?t(l,r):e(l,r,u),a=!0,c._container=r,r.__vue_app__=c,l.component.proxy}},unmount(){a&&(e(null,c._container),delete c._container.__vue_app__)},provide(e,t){return s.provides[e]=t,c}};return c}}function Wn(){}const zn={scheduler:Je,allowRecurse:!0};const Vn=xt,Gn=(e,t,n,i,s=!1)=>{if(Object(r["m"])(e))return void e.forEach((e,o)=>Gn(e,t&&(Object(r["m"])(t)?t[o]:t),n,i,s));if(Bt(i)&&!s)return;const o=4&i.shapeFlag?Jr(i.component)||i.component.proxy:i.el,a=s?null:o,{i:c,r:u}=e;const l=t&&t.r,d=c.refs===r["b"]?c.refs={}:c.refs,f=c.setupState;if(null!=l&&l!==u&&(Object(r["B"])(l)?(d[l]=null,Object(r["j"])(f,l)&&(f[l]=null)):ke(l)&&(l.value=null)),Object(r["B"])(u)){const e=()=>{d[u]=a,Object(r["j"])(f,u)&&(f[u]=a)};a?(e.id=-1,Vn(e,n)):e()}else if(ke(u)){const e=()=>{u.value=a};a?(e.id=-1,Vn(e,n)):e()}else Object(r["n"])(u)&&Ie(u,c,12,[a,d])};function Hn(e){return Jn(e)}function Jn(e,t){Wn();const{insert:n,remove:i,patchProp:s,forcePatchProp:o,createElement:a,createText:c,createComment:u,setText:f,setElementText:h,parentNode:p,nextSibling:m,setScopeId:y=r["d"],cloneNode:g,insertStaticContent:w}=e,x=(e,t,n,r=null,i=null,s=null,o=!1,a=null,c=!!t.dynamicChildren)=>{e&&!yr(e,t)&&(r=K(e),z(e,i,s,!0),e=null),-2===t.patchFlag&&(c=!1,t.dynamicChildren=null);const{type:u,ref:l,shapeFlag:d}=t;switch(u){case sr:_(e,t,n,r);break;case or:k(e,t,n,r);break;case ar:null==e&&S(t,n,r,o);break;case ir:A(e,t,n,r,i,s,o,a,c);break;default:1&d?O(e,t,n,r,i,s,o,a,c):6&d?D(e,t,n,r,i,s,o,a,c):(64&d||128&d)&&u.process(e,t,n,r,i,s,o,a,c,Y)}null!=l&&i&&Gn(l,e&&e.ref,s,t||e,!t)},_=(e,t,r,i)=>{if(null==e)n(t.el=c(t.children),r,i);else{const n=t.el=e.el;t.children!==e.children&&f(n,t.children)}},k=(e,t,r,i)=>{null==e?n(t.el=u(t.children||""),r,i):t.el=e.el},S=(e,t,n,r)=>{[e.el,e.anchor]=w(e.children,t,n,r)},T=({el:e,anchor:t},r,i)=>{let s;while(e&&e!==t)s=m(e),n(e,r,i),e=s;n(t,r,i)},E=({el:e,anchor:t})=>{let n;while(e&&e!==t)n=m(e),i(e),e=n;i(t)},O=(e,t,n,r,i,s,o,a,c)=>{o=o||"svg"===t.type,null==e?C(t,n,r,i,s,o,a,c):P(e,t,i,s,o,a,c)},C=(e,t,i,o,c,u,l,d)=>{let f,p;const{type:m,props:y,shapeFlag:v,transition:b,patchFlag:w,dirs:x}=e;if(e.el&&void 0!==g&&-1===w)f=e.el=g(e.el);else{if(f=e.el=a(e.type,u,y&&y.is,y),8&v?h(f,e.children):16&v&&j(e.children,f,null,o,c,u&&"foreignObject"!==m,l,d),x&&Fn(e,null,o,"created"),y){for(const t in y)Object(r["x"])(t)||s(f,t,null,y[t],u,e.children,o,c,J);(p=y.onVnodeBeforeMount)&&Kn(p,o,e)}I(f,e,e.scopeId,l,o)}x&&Fn(e,null,o,"beforeMount");const _=(!c||c&&!c.pendingBranch)&&b&&!b.persisted;_&&b.beforeEnter(f),n(f,t,i),((p=y&&y.onVnodeMounted)||_||x)&&Vn(()=>{p&&Kn(p,o,e),_&&b.enter(f),x&&Fn(e,null,o,"mounted")},c)},I=(e,t,n,r,i)=>{if(n&&y(e,n),r)for(let s=0;s<r.length;s++)y(e,r[s]);if(i){let n=i.subTree;if(t===n){const t=i.vnode;I(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},j=(e,t,n,r,i,s,o,a,c=0)=>{for(let u=c;u<e.length;u++){const c=e[u]=a?Er(e[u]):Tr(e[u]);x(null,c,t,n,r,i,s,o,a)}},P=(e,t,n,i,a,c,u)=>{const l=t.el=e.el;let{patchFlag:d,dynamicChildren:f,dirs:p}=t;d|=16&e.patchFlag;const m=e.props||r["b"],y=t.props||r["b"];let v;if((v=y.onVnodeBeforeUpdate)&&Kn(v,n,t,e),p&&Fn(t,e,n,"beforeUpdate"),d>0){if(16&d)R(l,t,m,y,n,i,a);else if(2&d&&m.class!==y.class&&s(l,"class",null,y.class,a),4&d&&s(l,"style",m.style,y.style,a),8&d){const r=t.dynamicProps;for(let t=0;t<r.length;t++){const c=r[t],u=m[c],d=y[c];(d!==u||o&&o(l,c))&&s(l,c,u,d,a,e.children,n,i,J)}}1&d&&e.children!==t.children&&h(l,t.children)}else u||null!=f||R(l,t,m,y,n,i,a);const g=a&&"foreignObject"!==t.type;f?M(e.dynamicChildren,f,l,n,i,g,c):u||B(e,t,l,null,n,i,g,c,!1),((v=y.onVnodeUpdated)||p)&&Vn(()=>{v&&Kn(v,n,t,e),p&&Fn(t,e,n,"updated")},i)},M=(e,t,n,r,i,s,o)=>{for(let a=0;a<t.length;a++){const c=e[a],u=t[a],l=c.el&&(c.type===ir||!yr(c,u)||6&c.shapeFlag||64&c.shapeFlag)?p(c.el):n;x(c,u,l,null,r,i,s,o,!0)}},R=(e,t,n,i,a,c,u)=>{if(n!==i){for(const l in i){if(Object(r["x"])(l))continue;const d=i[l],f=n[l];(d!==f||o&&o(e,l))&&s(e,l,f,d,u,t.children,a,c,J)}if(n!==r["b"])for(const o in n)Object(r["x"])(o)||o in i||s(e,o,n[o],null,u,t.children,a,c,J)}},A=(e,t,r,i,s,o,a,u,l)=>{const d=t.el=e?e.el:c(""),f=t.anchor=e?e.anchor:c("");let{patchFlag:h,dynamicChildren:p,slotScopeIds:m}=t;p&&(l=!0),m&&(u=u?u.concat(m):m),null==e?(n(d,r,i),n(f,r,i),j(t.children,r,f,s,o,a,u,l)):h>0&&64&h&&p&&e.dynamicChildren?(M(e.dynamicChildren,p,r,s,o,a,u),(null!=t.key||s&&t===s.subTree)&&Qn(e,t,!0)):B(e,t,r,f,s,o,a,u,l)},D=(e,t,n,r,i,s,o,a,c)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,o,c):N(t,n,r,i,s,o,c):L(e,t,c)},N=(e,t,n,r,i,s,o)=>{const a=e.component=Nr(e,r,i);if(qt(e)&&(a.ctx.renderer=Y),Wr(a),a.asyncDep){if(i&&i.registerDep(a,U),!e.el){const e=a.subTree=wr(or);k(null,e,t,n)}}else U(a,e,t,n,i,s,o)},L=(e,t,n)=>{const r=t.component=e.component;if(vt(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void F(r,t,n);r.next=t,Qe(r.update),r.update()}else t.component=e.component,t.el=e.el,r.vnode=t},U=(e,t,n,i,s,o,a)=>{e.update=l((function(){if(e.isMounted){let t,{next:n,bu:i,u:c,parent:u,vnode:l}=e,d=n;0,n?(n.el=l.el,F(e,n,a)):n=l,i&&Object(r["l"])(i),(t=n.props&&n.props.onVnodeBeforeUpdate)&&Kn(t,u,n,l);const f=pt(e);0;const h=e.subTree;e.subTree=f,x(h,f,p(h.el),K(h),e,s,o),n.el=f.el,null===d&&bt(e,f.el),c&&Vn(c,s),(t=n.props&&n.props.onVnodeUpdated)&&Vn(()=>Kn(t,u,n,l),s)}else{let a;const{el:c,props:u}=t,{bm:l,m:d,parent:f}=e;if(l&&Object(r["l"])(l),(a=u&&u.onVnodeBeforeMount)&&Kn(a,f,t),c&&Z){const n=()=>{e.subTree=pt(e),Z(c,e.subTree,e,s,null)};Bt(t)?t.type.__asyncLoader().then(()=>!e.isUnmounted&&n()):n()}else{0;const r=e.subTree=pt(e);0,x(null,r,n,i,e,s,o),t.el=r.el}if(d&&Vn(d,s),a=u&&u.onVnodeMounted){const e=t;Vn(()=>Kn(a,f,e),s)}256&t.shapeFlag&&e.a&&Vn(e.a,s),e.isMounted=!0,t=n=i=null}}),zn)},F=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,kn(e,t.props,r,n),Ln(e,t.children,n),v(),et(void 0,e.update),b()},B=(e,t,n,r,i,s,o,a,c=!1)=>{const u=e&&e.children,l=e?e.shapeFlag:0,d=t.children,{patchFlag:f,shapeFlag:p}=t;if(f>0){if(128&f)return void $(u,d,n,r,i,s,o,a,c);if(256&f)return void q(u,d,n,r,i,s,o,a,c)}8&p?(16&l&&J(u,i,s),d!==u&&h(n,d)):16&l?16&p?$(u,d,n,r,i,s,o,a,c):J(u,i,s,!0):(8&l&&h(n,""),16&p&&j(d,n,r,i,s,o,a,c))},q=(e,t,n,i,s,o,a,c,u)=>{e=e||r["a"],t=t||r["a"];const l=e.length,d=t.length,f=Math.min(l,d);let h;for(h=0;h<f;h++){const r=t[h]=u?Er(t[h]):Tr(t[h]);x(e[h],r,n,null,s,o,a,c,u)}l>d?J(e,s,o,!0,!1,f):j(t,n,i,s,o,a,c,u,f)},$=(e,t,n,i,s,o,a,c,u)=>{let l=0;const d=t.length;let f=e.length-1,h=d-1;while(l<=f&&l<=h){const r=e[l],i=t[l]=u?Er(t[l]):Tr(t[l]);if(!yr(r,i))break;x(r,i,n,null,s,o,a,c,u),l++}while(l<=f&&l<=h){const r=e[f],i=t[h]=u?Er(t[h]):Tr(t[h]);if(!yr(r,i))break;x(r,i,n,null,s,o,a,c,u),f--,h--}if(l>f){if(l<=h){const e=h+1,r=e<d?t[e].el:i;while(l<=h)x(null,t[l]=u?Er(t[l]):Tr(t[l]),n,r,s,o,a,c,u),l++}}else if(l>h)while(l<=f)z(e[l],s,o,!0),l++;else{const p=l,m=l,y=new Map;for(l=m;l<=h;l++){const e=t[l]=u?Er(t[l]):Tr(t[l]);null!=e.key&&y.set(e.key,l)}let v,g=0;const b=h-m+1;let w=!1,_=0;const k=new Array(b);for(l=0;l<b;l++)k[l]=0;for(l=p;l<=f;l++){const r=e[l];if(g>=b){z(r,s,o,!0);continue}let i;if(null!=r.key)i=y.get(r.key);else for(v=m;v<=h;v++)if(0===k[v-m]&&yr(r,t[v])){i=v;break}void 0===i?z(r,s,o,!0):(k[i-m]=l+1,i>=_?_=i:w=!0,x(r,t[i],n,null,s,o,a,c,u),g++)}const S=w?Yn(k):r["a"];for(v=S.length-1,l=b-1;l>=0;l--){const e=m+l,r=t[e],f=e+1<d?t[e+1].el:i;0===k[l]?x(null,r,n,f,s,o,a,c,u):w&&(v<0||l!==S[v]?W(r,n,f,2):v--)}}},W=(e,t,r,i,s=null)=>{const{el:o,type:a,transition:c,children:u,shapeFlag:l}=e;if(6&l)return void W(e.component.subTree,t,r,i);if(128&l)return void e.suspense.move(t,r,i);if(64&l)return void a.move(e,t,r,Y);if(a===ir){n(o,t,r);for(let e=0;e<u.length;e++)W(u[e],t,r,i);return void n(e.anchor,t,r)}if(a===ar)return void T(e,t,r);const d=2!==i&&1&l&&c;if(d)if(0===i)c.beforeEnter(o),n(o,t,r),Vn(()=>c.enter(o),s);else{const{leave:e,delayLeave:i,afterLeave:s}=c,a=()=>n(o,t,r),u=()=>{e(o,()=>{a(),s&&s()})};i?i(o,a,u):u()}else n(o,t,r)},z=(e,t,n,r=!1,i=!1)=>{const{type:s,props:o,ref:a,children:c,dynamicChildren:u,shapeFlag:l,patchFlag:d,dirs:f}=e;if(null!=a&&Gn(a,null,n,e,!0),256&l)return void t.ctx.deactivate(e);const h=1&l&&f;let p;if((p=o&&o.onVnodeBeforeUnmount)&&Kn(p,t,e),6&l)H(e.component,n,r);else{if(128&l)return void e.suspense.unmount(n,r);h&&Fn(e,null,t,"beforeUnmount"),64&l?e.type.remove(e,t,n,i,Y,r):u&&(s!==ir||d>0&&64&d)?J(u,t,n,!1,!0):(s===ir&&(128&d||256&d)||!i&&16&l)&&J(c,t,n),r&&V(e)}((p=o&&o.onVnodeUnmounted)||h)&&Vn(()=>{p&&Kn(p,t,e),h&&Fn(e,null,t,"unmounted")},n)},V=e=>{const{type:t,el:n,anchor:r,transition:s}=e;if(t===ir)return void G(n,r);if(t===ar)return void E(e);const o=()=>{i(n),s&&!s.persisted&&s.afterLeave&&s.afterLeave()};if(1&e.shapeFlag&&s&&!s.persisted){const{leave:t,delayLeave:r}=s,i=()=>t(n,o);r?r(e.el,o,i):i()}else o()},G=(e,t)=>{let n;while(e!==t)n=m(e),i(e),e=n;i(t)},H=(e,t,n)=>{const{bum:i,effects:s,update:o,subTree:a,um:c}=e;if(i&&Object(r["l"])(i),s)for(let r=0;r<s.length;r++)d(s[r]);o&&(d(o),z(a,e,t,n)),c&&Vn(c,t),Vn(()=>{e.isUnmounted=!0},t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},J=(e,t,n,r=!1,i=!1,s=0)=>{for(let o=s;o<e.length;o++)z(e[o],t,n,r,i)},K=e=>6&e.shapeFlag?K(e.component.subTree):128&e.shapeFlag?e.suspense.next():m(e.anchor||e.el),Q=(e,t,n)=>{null==e?t._vnode&&z(t._vnode,null,null,!0):x(t._vnode||null,e,t,null,null,null,n),tt(),t._vnode=e},Y={p:x,um:z,m:W,r:V,mt:N,mc:j,pc:B,pbc:M,n:K,o:e};let X,Z;return t&&([X,Z]=t(Y)),{render:Q,hydrate:X,createApp:$n(Q,X)}}function Kn(e,t,n,r=null){je(e,t,7,[n,r])}function Qn(e,t,n=!1){const i=e.children,s=t.children;if(Object(r["m"])(i)&&Object(r["m"])(s))for(let r=0;r<i.length;r++){const e=i[r];let t=s[r];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=s[r]=Er(s[r]),t.el=e.el),n||Qn(e,t))}}function Yn(e){const t=e.slice(),n=[0];let r,i,s,o,a;const c=e.length;for(r=0;r<c;r++){const c=e[r];if(0!==c){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}s=0,o=n.length-1;while(s<o)a=(s+o)/2|0,e[n[a]]<c?s=a+1:o=a;c<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}s=n.length,o=n[s-1];while(s-- >0)n[s]=o,o=t[o];return n}const Xn=e=>e.__isTeleport;const Zn="components";function er(e,t){return nr(Zn,e,!0,t)||e}const tr=Symbol();function nr(e,t,n=!0,i=!1){const s=at||Lr;if(s){const n=s.type;if(e===Zn){const e=Qr(n);if(e&&(e===t||e===Object(r["e"])(t)||e===Object(r["f"])(Object(r["e"])(t))))return n}const o=rr(s[e]||n[e],t)||rr(s.appContext[e],t);return!o&&i?n:o}}function rr(e,t){return e&&(e[t]||e[Object(r["e"])(t)]||e[Object(r["f"])(Object(r["e"])(t))])}const ir=Symbol(void 0),sr=Symbol(void 0),or=Symbol(void 0),ar=Symbol(void 0),cr=[];let ur=null;function lr(e=!1){cr.push(ur=e?null:[])}function dr(){cr.pop(),ur=cr[cr.length-1]||null}let fr=1;function hr(e){fr+=e}function pr(e,t,n,i,s){const o=wr(e,t,n,i,s,!0);return o.dynamicChildren=fr>0?ur||r["a"]:null,dr(),fr>0&&ur&&ur.push(o),o}function mr(e){return!!e&&!0===e.__v_isVNode}function yr(e,t){return e.type===t.type&&e.key===t.key}const vr="__vInternal",gr=({key:e})=>null!=e?e:null,br=({ref:e})=>null!=e?Object(r["B"])(e)||ke(e)||Object(r["n"])(e)?{i:at,r:e}:e:null,wr=xr;function xr(e,t=null,n=null,i=0,s=null,o=!1){if(e&&e!==tr||(e=or),mr(e)){const r=_r(e,t,!0);return n&&Or(r,n),r}if(Yr(e)&&(e=e.__vccOpts),t){(we(t)||vr in t)&&(t=Object(r["h"])({},t));let{class:e,style:n}=t;e&&!Object(r["B"])(e)&&(t.class=Object(r["G"])(e)),Object(r["t"])(n)&&(we(n)&&!Object(r["m"])(n)&&(n=Object(r["h"])({},n)),t.style=Object(r["H"])(n))}const a=Object(r["B"])(e)?1:wt(e)?128:Xn(e)?64:Object(r["t"])(e)?4:Object(r["n"])(e)?2:0;const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&gr(t),ref:t&&br(t),scopeId:ct,slotScopeIds:null,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,shapeFlag:a,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null};return Or(c,n),128&a&&e.normalize(c),fr>0&&!o&&ur&&(i>0||6&a)&&32!==i&&ur.push(c),c}function _r(e,t,n=!1){const{props:i,ref:s,patchFlag:o,children:a}=e,c=t?Cr(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&gr(c),ref:t&&t.ref?n&&s?Object(r["m"])(s)?s.concat(br(t)):[s,br(t)]:br(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ir?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&_r(e.ssContent),ssFallback:e.ssFallback&&_r(e.ssFallback),el:e.el,anchor:e.anchor};return u}function kr(e=" ",t=0){return wr(sr,null,e,t)}function Sr(e="",t=!1){return t?(lr(),pr(or,null,e)):wr(or,null,e)}function Tr(e){return null==e||"boolean"===typeof e?wr(or):Object(r["m"])(e)?wr(ir,null,e.slice()):"object"===typeof e?Er(e):wr(sr,null,String(e))}function Er(e){return null===e.el?e:_r(e)}function Or(e,t){let n=0;const{shapeFlag:i}=e;if(null==t)t=null;else if(Object(r["m"])(t))n=16;else if("object"===typeof t){if(1&i||64&i){const n=t.default;return void(n&&(n._c&&(n._d=!1),Or(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||vr in t?3===r&&at&&(1===at.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=at}}else Object(r["n"])(t)?(t={default:t,_ctx:at},n=32):(t=String(t),64&i?(n=16,t=[kr(t)]):n=8);e.children=t,e.shapeFlag|=n}function Cr(...e){const t=Object(r["h"])({},e[0]);for(let n=1;n<e.length;n++){const i=e[n];for(const e in i)if("class"===e)t.class!==i.class&&(t.class=Object(r["G"])([t.class,i.class]));else if("style"===e)t.style=Object(r["H"])([t.style,i.style]);else if(Object(r["u"])(e)){const n=t[e],r=i[e];n!==r&&(t[e]=n?[].concat(n,r):r)}else""!==e&&(t[e]=i[e])}return t}function Ir(e,t){let n;if(Object(r["m"])(e)||Object(r["B"])(e)){n=new Array(e.length);for(let r=0,i=e.length;r<i;r++)n[r]=t(e[r],r)}else if("number"===typeof e){0,n=new Array(e);for(let r=0;r<e;r++)n[r]=t(r+1,r)}else if(Object(r["t"])(e))if(e[Symbol.iterator])n=Array.from(e,t);else{const r=Object.keys(e);n=new Array(r.length);for(let i=0,s=r.length;i<s;i++){const s=r[i];n[i]=t(e[s],s,i)}}else n=[];return n}const jr=e=>e?Br(e)?Jr(e)||e.proxy:jr(e.parent):null,Pr=Object(r["h"])(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>jr(e.parent),$root:e=>jr(e.root),$emit:e=>e.emit,$options:e=>hn(e),$forceUpdate:e=>()=>Je(e.update),$nextTick:e=>Ge.bind(e.proxy),$watch:e=>Ot.bind(e)}),Mr={get({_:e},t){const{ctx:n,setupState:i,data:s,props:o,accessCache:a,type:c,appContext:u}=e;let l;if("$"!==t[0]){const c=a[t];if(void 0!==c)switch(c){case 0:return i[t];case 1:return s[t];case 3:return n[t];case 2:return o[t]}else{if(i!==r["b"]&&Object(r["j"])(i,t))return a[t]=0,i[t];if(s!==r["b"]&&Object(r["j"])(s,t))return a[t]=1,s[t];if((l=e.propsOptions[0])&&Object(r["j"])(l,t))return a[t]=2,o[t];if(n!==r["b"]&&Object(r["j"])(n,t))return a[t]=3,n[t];cn&&(a[t]=4)}}const d=Pr[t];let f,h;return d?("$attrs"===t&&w(e,"get",t),d(e)):(f=c.__cssModules)&&(f=f[t])?f:n!==r["b"]&&Object(r["j"])(n,t)?(a[t]=3,n[t]):(h=u.config.globalProperties,Object(r["j"])(h,t)?h[t]:void 0)},set({_:e},t,n){const{data:i,setupState:s,ctx:o}=e;if(s!==r["b"]&&Object(r["j"])(s,t))s[t]=n;else if(i!==r["b"]&&Object(r["j"])(i,t))i[t]=n;else if(Object(r["j"])(e.props,t))return!1;return("$"!==t[0]||!(t.slice(1)in e))&&(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:s,propsOptions:o}},a){let c;return void 0!==n[a]||e!==r["b"]&&Object(r["j"])(e,a)||t!==r["b"]&&Object(r["j"])(t,a)||(c=o[0])&&Object(r["j"])(c,a)||Object(r["j"])(i,a)||Object(r["j"])(Pr,a)||Object(r["j"])(s.config.globalProperties,a)}};const Rr=Object(r["h"])({},Mr,{get(e,t){if(t!==Symbol.unscopables)return Mr.get(e,t,e)},has(e,t){const n="_"!==t[0]&&!Object(r["o"])(t);return n}});const Ar=Bn();let Dr=0;function Nr(e,t,n){const i=e.type,s=(t?t.appContext:e.appContext)||Ar,o={uid:Dr++,vnode:e,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,update:null,render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,effects:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:En(i,s),emitsOptions:st(i,s),emit:null,emitted:null,propsDefaults:r["b"],inheritAttrs:i.inheritAttrs,ctx:r["b"],data:r["b"],props:r["b"],attrs:r["b"],slots:r["b"],refs:r["b"],setupState:r["b"],setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=it.bind(null,o),o}let Lr=null;const Ur=()=>Lr||at,Fr=e=>{Lr=e};function Br(e){return 4&e.vnode.shapeFlag}let qr,$r=!1;function Wr(e,t=!1){$r=t;const{props:n,children:r}=e.vnode,i=Br(e);_n(e,n,i,t),Nn(e,r);const s=i?zr(e,t):void 0;return $r=!1,s}function zr(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=_e(new Proxy(e.ctx,Mr));const{setup:i}=n;if(i){const n=e.setupContext=i.length>1?Hr(e):null;Lr=e,v();const s=Ie(i,e,0,[e.props,n]);if(b(),Lr=null,Object(r["w"])(s)){const n=()=>{Lr=null};if(s.then(n,n),t)return s.then(n=>{Vr(e,n,t)}).catch(t=>{Pe(t,e,0)});e.asyncDep=s}else Vr(e,s,t)}else Gr(e,t)}function Vr(e,t,n){Object(r["n"])(t)?e.render=t:Object(r["t"])(t)&&(e.setupState=Ee(t)),Gr(e,n)}function Gr(e,t,n){const i=e.type;if(!e.render){if(qr&&!i.render){const t=i.template;if(t){0;const{isCustomElement:n,compilerOptions:s}=e.appContext.config,{delimiters:o,compilerOptions:a}=i,c=Object(r["h"])(Object(r["h"])({isCustomElement:n,delimiters:o},s),a);i.render=qr(t,c)}}e.render=i.render||r["d"],e.render._rc&&(e.withProxy=new Proxy(e.ctx,Rr))}Lr=e,v(),un(e),b(),Lr=null}function Hr(e){const t=t=>{e.exposed=t||{}};return{attrs:e.attrs,slots:e.slots,emit:e.emit,expose:t}}function Jr(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ee(_e(e.exposed)),{get(t,n){return n in t?t[n]:n in Pr?Pr[n](e):void 0}}))}function Kr(e,t=Lr){t&&(t.effects||(t.effects=[])).push(e)}function Qr(e){return Object(r["n"])(e)&&e.displayName||e.name}function Yr(e){return Object(r["n"])(e)&&"__vccOpts"in e}function Xr(e){const t=Ce(e);return Kr(t.effect),t}function Zr(e,t,n){const i=arguments.length;return 2===i?Object(r["t"])(t)&&!Object(r["m"])(t)?mr(t)?wr(e,null,[t]):wr(e,t):wr(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&mr(n)&&(n=[n]),wr(e,t,n))}Symbol("");const ei="3.1.5",ti="http://www.w3.org/2000/svg",ni="undefined"!==typeof document?document:null,ri=new Map,ii={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?ni.createElementNS(ti,e):ni.createElement(e,n?{is:n}:void 0);return"select"===e&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:e=>ni.createTextNode(e),createComment:e=>ni.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ni.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,r){const i=n?n.previousSibling:t.lastChild;let s=ri.get(e);if(!s){const t=ni.createElement("template");if(t.innerHTML=r?`<svg>${e}</svg>`:e,s=t.content,r){const e=s.firstChild;while(e.firstChild)s.appendChild(e.firstChild);s.removeChild(e)}ri.set(e,s)}return t.insertBefore(s.cloneNode(!0),n),[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function si(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function oi(e,t,n){const i=e.style;if(n)if(Object(r["B"])(n)){if(t!==n){const t=i.display;i.cssText=n,"_vod"in e&&(i.display=t)}}else{for(const e in n)ci(i,e,n[e]);if(t&&!Object(r["B"])(t))for(const e in t)null==n[e]&&ci(i,e,"")}else e.removeAttribute("style")}const ai=/\s*!important$/;function ci(e,t,n){if(Object(r["m"])(n))n.forEach(n=>ci(e,t,n));else if(t.startsWith("--"))e.setProperty(t,n);else{const i=di(e,t);ai.test(n)?e.setProperty(Object(r["k"])(i),n.replace(ai,""),"important"):e[i]=n}}const ui=["Webkit","Moz","ms"],li={};function di(e,t){const n=li[t];if(n)return n;let i=Object(r["e"])(t);if("filter"!==i&&i in e)return li[t]=i;i=Object(r["f"])(i);for(let r=0;r<ui.length;r++){const n=ui[r]+i;if(n in e)return li[t]=n}return t}const fi="http://www.w3.org/1999/xlink";function hi(e,t,n,i,s){if(i&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(fi,t.slice(6,t.length)):e.setAttributeNS(fi,t,n);else{const i=Object(r["A"])(t);null==n||i&&!1===n?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function pi(e,t,n,r,i,s,o){if("innerHTML"===t||"textContent"===t)return r&&o(r,i,s),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName){e._value=n;const r=null==n?"":n;return e.value!==r&&(e.value=r),void(null==n&&e.removeAttribute(t))}if(""===n||null==n){const r=typeof e[t];if(""===n&&"boolean"===r)return void(e[t]=!0);if(null==n&&"string"===r)return e[t]="",void e.removeAttribute(t);if("number"===r){try{e[t]=0}catch(a){}return void e.removeAttribute(t)}}try{e[t]=n}catch(c){0}}let mi=Date.now,yi=!1;if("undefined"!==typeof window){mi()>document.createEvent("Event").timeStamp&&(mi=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);yi=!!(e&&Number(e[1])<=53)}let vi=0;const gi=Promise.resolve(),bi=()=>{vi=0},wi=()=>vi||(gi.then(bi),vi=mi());function xi(e,t,n,r){e.addEventListener(t,n,r)}function _i(e,t,n,r){e.removeEventListener(t,n,r)}function ki(e,t,n,r,i=null){const s=e._vei||(e._vei={}),o=s[t];if(r&&o)o.value=r;else{const[n,a]=Ti(t);if(r){const o=s[t]=Ei(r,i);xi(e,n,o,a)}else o&&(_i(e,n,o,a),s[t]=void 0)}}const Si=/(?:Once|Passive|Capture)$/;function Ti(e){let t;if(Si.test(e)){let n;t={};while(n=e.match(Si))e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[Object(r["k"])(e.slice(2)),t]}function Ei(e,t){const n=e=>{const r=e.timeStamp||mi();(yi||r>=n.attached-1)&&je(Oi(e,n.value),t,5,[e])};return n.value=e,n.attached=wi(),n}function Oi(e,t){if(Object(r["m"])(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e(t))}return t}const Ci=/^on[a-z]/,Ii=(e,t)=>"value"===t,ji=(e,t,n,i,s=!1,o,a,c,u)=>{switch(t){case"class":si(e,i,s);break;case"style":oi(e,n,i);break;default:Object(r["u"])(t)?Object(r["s"])(t)||ki(e,t,n,i,a):Pi(e,t,i,s)?pi(e,t,i,o,a,c,u):("true-value"===t?e._trueValue=i:"false-value"===t&&(e._falseValue=i),hi(e,t,i,s));break}};function Pi(e,t,n,i){return i?"innerHTML"===t||!!(t in e&&Ci.test(t)&&Object(r["n"])(n)):"spellcheck"!==t&&"draggable"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!Ci.test(t)||!Object(r["B"])(n))&&t in e))))}const Mi="transition",Ri="animation",Ai=(e,{slots:t})=>Zr(Rt,Ui(e),t);Ai.displayName="Transition";const Di={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Ni=(Ai.props=Object(r["h"])({},Rt.props,Di),(e,t=[])=>{Object(r["m"])(e)?e.forEach(e=>e(...t)):e&&e(...t)}),Li=e=>!!e&&(Object(r["m"])(e)?e.some(e=>e.length>1):e.length>1);function Ui(e){const t={};for(const r in e)r in Di||(t[r]=e[r]);if(!1===e.css)return t;const{name:n="v",type:i,duration:s,enterFromClass:o=n+"-enter-from",enterActiveClass:a=n+"-enter-active",enterToClass:c=n+"-enter-to",appearFromClass:u=o,appearActiveClass:l=a,appearToClass:d=c,leaveFromClass:f=n+"-leave-from",leaveActiveClass:h=n+"-leave-active",leaveToClass:p=n+"-leave-to"}=e,m=Fi(s),y=m&&m[0],v=m&&m[1],{onBeforeEnter:g,onEnter:b,onEnterCancelled:w,onLeave:x,onLeaveCancelled:_,onBeforeAppear:k=g,onAppear:S=b,onAppearCancelled:T=w}=t,E=(e,t,n)=>{$i(e,t?d:c),$i(e,t?l:a),n&&n()},O=(e,t)=>{$i(e,p),$i(e,h),t&&t()},C=e=>(t,n)=>{const r=e?S:b,s=()=>E(t,e,n);Ni(r,[t,s]),Wi(()=>{$i(t,e?u:o),qi(t,e?d:c),Li(r)||Vi(t,i,y,s)})};return Object(r["h"])(t,{onBeforeEnter(e){Ni(g,[e]),qi(e,o),qi(e,a)},onBeforeAppear(e){Ni(k,[e]),qi(e,u),qi(e,l)},onEnter:C(!1),onAppear:C(!0),onLeave(e,t){const n=()=>O(e,t);qi(e,f),Ki(),qi(e,h),Wi(()=>{$i(e,f),qi(e,p),Li(x)||Vi(e,i,v,n)}),Ni(x,[e,n])},onEnterCancelled(e){E(e,!1),Ni(w,[e])},onAppearCancelled(e){E(e,!0),Ni(T,[e])},onLeaveCancelled(e){O(e),Ni(_,[e])}})}function Fi(e){if(null==e)return null;if(Object(r["t"])(e))return[Bi(e.enter),Bi(e.leave)];{const t=Bi(e);return[t,t]}}function Bi(e){const t=Object(r["L"])(e);return t}function qi(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.add(t)),(e._vtc||(e._vtc=new Set)).add(t)}function $i(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.remove(t));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Wi(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let zi=0;function Vi(e,t,n,r){const i=e._endId=++zi,s=()=>{i===e._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:c}=Gi(e,t);if(!o)return r();const u=o+"end";let l=0;const d=()=>{e.removeEventListener(u,f),s()},f=t=>{t.target===e&&++l>=c&&d()};setTimeout(()=>{l<c&&d()},a+1),e.addEventListener(u,f)}function Gi(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||"").split(", "),i=r(Mi+"Delay"),s=r(Mi+"Duration"),o=Hi(i,s),a=r(Ri+"Delay"),c=r(Ri+"Duration"),u=Hi(a,c);let l=null,d=0,f=0;t===Mi?o>0&&(l=Mi,d=o,f=s.length):t===Ri?u>0&&(l=Ri,d=u,f=c.length):(d=Math.max(o,u),l=d>0?o>u?Mi:Ri:null,f=l?l===Mi?s.length:c.length:0);const h=l===Mi&&/\b(transform|all)(,|$)/.test(n[Mi+"Property"]);return{type:l,timeout:d,propCount:f,hasTransform:h}}function Hi(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map((t,n)=>Ji(t)+Ji(e[n])))}function Ji(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Ki(){return document.body.offsetHeight}new WeakMap,new WeakMap;const Qi=e=>{const t=e.props["onUpdate:modelValue"];return Object(r["m"])(t)?e=>Object(r["l"])(t,e):t};function Yi(e){e.target.composing=!0}function Xi(e){const t=e.target;t.composing&&(t.composing=!1,Zi(t,"input"))}function Zi(e,t){const n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}const es={created(e,{modifiers:{lazy:t,trim:n,number:i}},s){e._assign=Qi(s);const o=i||"number"===e.type;xi(e,t?"change":"input",t=>{if(t.target.composing)return;let i=e.value;n?i=i.trim():o&&(i=Object(r["L"])(i)),e._assign(i)}),n&&xi(e,"change",()=>{e.value=e.value.trim()}),t||(xi(e,"compositionstart",Yi),xi(e,"compositionend",Xi),xi(e,"change",Xi))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,modifiers:{trim:n,number:i}},s){if(e._assign=Qi(s),e.composing)return;if(document.activeElement===e){if(n&&e.value.trim()===t)return;if((i||"number"===e.type)&&Object(r["L"])(e.value)===t)return}const o=null==t?"":t;e.value!==o&&(e.value=o)}};const ts={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ns=(e,t)=>n=>{if(!("key"in n))return;const i=Object(r["k"])(n.key);return t.some(e=>e===i||ts[e]===i)?e(n):void 0};const rs=Object(r["h"])({patchProp:ji,forcePatchProp:Ii},ii);let is;function ss(){return is||(is=Hn(rs))}const os=(...e)=>{const t=ss().createApp(...e);const{mount:n}=t;return t.mount=e=>{const i=as(e);if(!i)return;const s=t._component;Object(r["n"])(s)||s.render||s.template||(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function as(e){if(Object(r["B"])(e)){const t=document.querySelector(e);return t}return e}},"7b0b":function(e,t,n){var r=n("1d80");e.exports=function(e){return Object(r(e))}},"7c73":function(e,t,n){var r,i=n("825a"),s=n("37e8"),o=n("7839"),a=n("d012"),c=n("1be4"),u=n("cc12"),l=n("f772"),d=">",f="<",h="prototype",p="script",m=l("IE_PROTO"),y=function(){},v=function(e){return f+p+d+e+f+"/"+p+d},g=function(e){e.write(v("")),e.close();var t=e.parentWindow.Object;return e=null,t},b=function(){var e,t=u("iframe"),n="java"+p+":";if(t.style)return t.style.display="none",c.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(v("document.F=Object")),e.close(),e.F},w=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}w=document.domain&&r?g(r):b()||g(r);var e=o.length;while(e--)delete w[h][o[e]];return w()};a[m]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(y[h]=i(e),n=new y,y[h]=null,n[m]=e):n=w(),void 0===t?n:s(n,t)}},"7db0":function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").find,s=n("44d2"),o="find",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s(o)},"7dd0":function(e,t,n){"use strict";var r=n("23e7"),i=n("9ed3"),s=n("e163"),o=n("d2bb"),a=n("d44e"),c=n("9112"),u=n("6eeb"),l=n("b622"),d=n("c430"),f=n("3f8c"),h=n("ae93"),p=h.IteratorPrototype,m=h.BUGGY_SAFARI_ITERATORS,y=l("iterator"),v="keys",g="values",b="entries",w=function(){return this};e.exports=function(e,t,n,l,h,x,_){i(n,t,l);var k,S,T,E=function(e){if(e===h&&P)return P;if(!m&&e in I)return I[e];switch(e){case v:return function(){return new n(this,e)};case g:return function(){return new n(this,e)};case b:return function(){return new n(this,e)}}return function(){return new n(this)}},O=t+" Iterator",C=!1,I=e.prototype,j=I[y]||I["@@iterator"]||h&&I[h],P=!m&&j||E(h),M="Array"==t&&I.entries||j;if(M&&(k=s(M.call(new e)),p!==Object.prototype&&k.next&&(d||s(k)===p||(o?o(k,p):"function"!=typeof k[y]&&c(k,y,w)),a(k,O,!0,!0),d&&(f[O]=w))),h==g&&j&&j.name!==g&&(C=!0,P=function(){return j.call(this)}),d&&!_||I[y]===P||c(I,y,P),f[t]=P,h)if(S={values:E(g),keys:x?P:E(v),entries:E(b)},_)for(T in S)(m||C||!(T in I))&&u(I,T,S[T]);else r({target:t,proto:!0,forced:m||C},S);return S}},"7f9a":function(e,t,n){var r=n("da84"),i=n("8925"),s=r.WeakMap;e.exports="function"===typeof s&&/native code/.test(i(s))},"7fd0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("5c7d");function i(e,t){return[`${(new Date).toISOString()} MCS Client ${e}:`].concat(Array.from(t))}class s{constructor(e){this.prefix="",this.prefix=null!==e&&void 0!==e&&e.length>0?e+" ":""}static scope(e){return new s(e)}setLevel(e){r.setLevel(e)}static setLevel(e){r.setLevel(e)}trace(...e){r.trace.apply(null,i(this.prefix+"T",e))}debug(...e){r.debug.apply(null,i(this.prefix+"D",e))}info(...e){r.info.apply(null,i(this.prefix+"I",e))}warn(...e){r.warn.apply(null,i(this.prefix+"W",e))}error(...e){r.error.apply(null,i(this.prefix+"E",e))}static trace(...e){r.trace.apply(null,i("T",e))}static debug(...e){r.debug.apply(null,i("D",e))}static info(...e){r.info.apply(null,i("I",e))}static warn(...e){r.warn.apply(null,i("W",e))}static error(...e){r.error.apply(null,i("E",e))}}t.Logger=s},"81d5":function(e,t,n){"use strict";var r=n("7b0b"),i=n("23cb"),s=n("50c4");e.exports=function(e){var t=r(this),n=s(t.length),o=arguments.length,a=i(o>1?arguments[1]:void 0,n),c=o>2?arguments[2]:void 0,u=void 0===c?n:i(c,n);while(u>a)t[a++]=e;return t}},"825a":function(e,t,n){var r=n("861d");e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},"82b0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("3e62");class i{constructor(e,t,n,r,i,s){this.start=e,this.end=t,this.title=n,this.details=r,this.id=i,this.type=s}}t.TelemetryEvent=i;class s extends r.AbstractMessage{constructor(e){super(),this.method="telemetry.v1",this.events=e}}t.Telemetry=s},"82f8":function(e,t,n){"use strict";var r=n("ebb5"),i=n("4d64").includes,s=r.aTypedArray,o=r.exportTypedArrayMethod;o("includes",(function(e){return i(s(this),e,arguments.length>1?arguments[1]:void 0)}))},"832d":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});class n{static get sessionStorage(){try{return e["sessionStorage"]}catch(t){return null}}static get window(){try{return e["window"]}catch(t){return null}}static storeToken(e,t){n.canStore&&n.sessionStorage.setItem(n.getKeyName(t),e)}static getStoredToken(e){return n.canStore?n.sessionStorage.getItem(n.getKeyName(e)):null}static initialize(){if(n.canStore){const e=n.sessionStorage.getItem(n.initializedFlag);e&&this.clear(),n.sessionStorage.setItem(n.initializedFlag,"true"),n.window.addEventListener("unload",()=>{n.sessionStorage.removeItem(n.initializedFlag)})}}static clear(){if(n.canStore){let e=[];for(let t=0;t<n.sessionStorage.length;t++){const r=n.sessionStorage.key(t);0===r.indexOf(n.tokenStoragePrefix)&&e.push(r)}e.forEach(e=>n.sessionStorage.removeItem(e)),n.sessionStorage.removeItem(n.initializedFlag)}}static getKeyName(e){return`${n.tokenStoragePrefix}${e}`}static get canStore(){return n.sessionStorage&&n.window}}t.TokenStorage=n,n.initializedFlag="twilio_twilsock_token_storage",n.tokenStoragePrefix="twilio_continuation_token_",n.initialize()}).call(this,n("c8ba"))},"83ab":function(e,t,n){var r=n("d039");e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(e,t,n){"use strict";var r=n("a04b"),i=n("9bf2"),s=n("5c6c");e.exports=function(e,t,n){var o=r(t);o in e?i.f(e,o,s(0,n)):e[o]=n}},8515:function(e){e.exports=JSON.parse('{"name":"twilio-sync","version":"1.0.0","description":"Twilio Sync client library","main":"lib/index.js","types":"./lib/index.d.ts","author":"Twilio","license":"MIT","dependencies":{"twilio-notifications":"^0.5.12","twilsock":"^0.6.2","loglevel":"^1.6.3","operation-retrier":"^3.0.0","platform":"^1.3.6","uuid":"^3.3.2"},"devDependencies":{"@types/chai":"^4.1.7","@types/chai-as-promised":"7.1.0","@types/chai-string":"^1.4.1","@types/mocha":"^5.2.7","@types/node":"^12.0.4","@types/sinon":"^7.0.12","@types/sinon-chai":"^3.2.2","async-test-tools":"^1.0.7","babel-core":"^6.26.0","babel-plugin-transform-builtin-extend":"^1.1.2","babel-plugin-transform-runtime":"^6.23.0","babel-preset-env":"^1.6.1","babel-runtime":"^6.26.0","babelify":"^8.0.0","browserify":"^16.2.3","chai":"^4.2.0","chai-as-promised":"^7.1.1","chai-string":"^1.5.0","cheerio":"^1.0.0-rc.2","cross-env":"^5.2.0","del":"^4.1.1","fancy-log":"^1.3.3","fs":"0.0.2","gulp":"^4.0.2","gulp-babel":"^7.0.1","gulp-derequire":"^2.1.0","gulp-if":"^2.0.2","gulp-insert":"^0.5.0","gulp-rename":"^1.4.0","gulp-sourcemaps":"^2.6.5","gulp-tap":"^1.0.1","gulp-tslint":"^8.1.4","gulp-typescript":"^5.0.1","gulp-uglify-es":"^1.0.4","ink-docstrap":"^1.3.2","jsdoc":"~3.5.5","jsonwebtoken":"^8.5.1","karma":"^4.1.0","karma-browserify":"^6.0.0","karma-browserstack-launcher":"^1.5.1","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.5","mocha":"^6.1.4","nyc":"^14.1.1","path":"^0.12.7","sinon":"^7.3.2","sinon-chai":"^3.3.0","ts-node":"^8.2.0","tslint":"^5.17.0","twilio":"^3.31.1","typescript":"^3.5.1","uglify-es":"^3.3.10","uglify-save-license":"^0.4.1","underscore":"^1.9.1","vinyl-buffer":"^1.0.1","vinyl-source-stream":"^2.0.0","watchify":"^3.11.1"},"browserify":{"transform":["babelify"]},"scripts":{"unitTest":"npx gulp unitTest","integrationTest":"npx gulp integrationTest"},"engines":{"node":">=8"}}')},"861d":function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},8653:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("faa1");function i(e){return void 0!==e&&null!==e}class s extends r.EventEmitter{constructor(e){if(super(),e=e||{},i(e.initialDelay)&&e.initialDelay<1)throw new Error("The initial timeout must be equal to or greater than 1.");if(i(e.maxDelay)&&e.maxDelay<=1)throw new Error("The maximal timeout must be greater than 1.");if(i(e.randomisationFactor)&&(e.randomisationFactor<0||e.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");if(i(e.factor)&&e.factor<=1)throw new Error("Exponential factor should be greater than 1.");if(this.initialDelay=e.initialDelay||100,this.maxDelay=e.maxDelay||1e4,this.maxDelay<=this.initialDelay)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");this.randomisationFactor=e.randomisationFactor||0,this.factor=e.factor||2,this.maxNumberOfRetry=-1,this.reset()}static exponential(e){return new s(e)}backoff(e){null==this.timeoutID&&(this.backoffNumber===this.maxNumberOfRetry?(this.emit("fail",e),this.reset()):(this.backoffDelay=this.next(),this.timeoutID=setTimeout(this.onBackoff.bind(this),this.backoffDelay),this.emit("backoff",this.backoffNumber,this.backoffDelay,e)))}reset(){this.backoffDelay=0,this.nextBackoffDelay=this.initialDelay,this.backoffNumber=0,clearTimeout(this.timeoutID),this.timeoutID=null}failAfter(e){if(e<=0)throw new Error("Expected a maximum number of retry greater than 0 but got "+e);this.maxNumberOfRetry=e}next(){this.backoffDelay=Math.min(this.nextBackoffDelay,this.maxDelay),this.nextBackoffDelay=this.backoffDelay*this.factor;let e=1+Math.random()*this.randomisationFactor;return Math.min(this.maxDelay,Math.round(this.backoffDelay*e))}onBackoff(){this.timeoutID=null,this.emit("ready",this.backoffNumber,this.backoffDelay),this.backoffNumber++}}t.Backoff=s,t.default=s},"88bd":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r="0.6.2";class i{constructor(e,t,n={}){this.confirmedCapabilities=new Set,this.activeGrant=t,this._token=e;const i=n.region||"us1",s=`wss://tsock.${i}.twilio.com/v3/wsconnect`;let o=n.twilsock||n.Twilsock||{};this.url=o.uri||s,this._continuationToken=n.continuationToken?n.continuationToken:null,this.logLevel=n.logLevel?n.logLevel:"error",this.retryPolicy=n.retryPolicy?n.retryPolicy:{min:1e3,max:12e4,randomness:.2},this.clientMetadata=n.clientMetadata?n.clientMetadata:{},this.clientMetadata.ver=r,this.initRegistrations=n.initRegistrations?n.initRegistrations:null,this.tweaks=n.tweaks?n.tweaks:null}get token(){return this._token}get continuationToken(){return this._continuationToken}updateToken(e){this._token=e}updateContinuationToken(e){this._continuationToken=e}}t.Configuration=i},8925:function(e,t,n){var r=n("c6cd"),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},"8a85":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("319d");function i(e){let t=encodeURIComponent(e),n=t.replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode("0x"+t));return n.length}function s(e){let t=encodeURIComponent(e),n=t.replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode("0x"+t)),r=new Uint8Array(n.length);return Array.prototype.forEach.call(n,(e,t)=>{r[t]=e.charCodeAt(0)}),r}function o(e){let t=Array.prototype.map.call(e,e=>String.fromCharCode(e)).join(""),n=t.replace(/(.)/g,(e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n});return decodeURIComponent(n)}function a(e){return JSON.parse(o(e))}function c(e){let t="",n=0;for(;n<e.length;++n){const r=String.fromCharCode(e[n]);if(t+=r,"\r"===r){n+=2;break}}const r=t.split(" ");return{size:n,protocol:r[0],version:r[1],headerSize:Number(r[2])}}class u{constructor(){}static parse(e){const t=2,n=new Uint8Array(e),i=c(n);if("TWILSOCK"!==i.protocol||"V3.0"!==i.version)return void r.log.error(`unsupported protocol: ${i.protocol} ver ${i.version}`);let s=null;try{s=a(n.subarray(i.size,i.size+i.headerSize))}catch(l){return void r.log.error("failed to parse message header",l,e)}r.log.debug("message received: ",s.method),r.log.trace("message received: ",s);let u=null;if(s.payload_size>0){const c=t+i.size+i.headerSize,d=s.payload_size;if(s.hasOwnProperty("payload_type")&&0!==s.payload_type.indexOf("application/json"))0===s.payload_type.indexOf("text/plain")&&(u=o(n.subarray(c,c+d)));else try{u=a(n.subarray(c,c+d))}catch(l){return void r.log.error("failed to parse message body",l,e)}}return{method:s.method,header:s,payload:u}}static createPacket(e,t=""){e.payload_size=i(t);let n=JSON.stringify(e)+"\r\n",o="TWILSOCK V3.0 "+(i(n)-2)+"\r\n";r.log.debug("send request:",o+n+t);let a=s(o+n+t);return a.buffer}}t.Parser=u},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"8aa7":function(e,t,n){var r=n("da84"),i=n("d039"),s=n("1c7e"),o=n("ebb5").NATIVE_ARRAY_BUFFER_VIEWS,a=r.ArrayBuffer,c=r.Int8Array;e.exports=!o||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!s((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new a(2),1,void 0).length}))},"8ba4":function(e,t,n){var r=n("23e7"),i=n("5e89");r({target:"Number",stat:!0},{isInteger:i})},"8bd1":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("f85b");t.Retrier=r.Retrier;const i=n("ca64");t.Backoff=i.Backoff,t.default=r.Retrier},"90e3":function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},9112:function(e,t,n){var r=n("83ab"),i=n("9bf2"),s=n("5c6c");e.exports=r?function(e,t,n){return i.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},"914c":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("f9f1");t.TwilsockClient=r.TwilsockClient,t.Twilsock=r.TwilsockClient;const i=n("6ab6");t.TwilsockError=i.TwilsockError;const s=n("a2f2");t.TransportUnavailableError=s.TransportUnavailableError},9263:function(e,t,n){"use strict";var r=n("577e"),i=n("ad6d"),s=n("9f7f"),o=n("5692"),a=n("7c73"),c=n("69f3").get,u=n("fce3"),l=n("107c"),d=RegExp.prototype.exec,f=o("native-string-replace",String.prototype.replace),h=d,p=function(){var e=/a/,t=/b*/g;return d.call(e,"a"),d.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),m=s.UNSUPPORTED_Y||s.BROKEN_CARET,y=void 0!==/()??/.exec("")[1],v=p||y||m||u||l;v&&(h=function(e){var t,n,s,o,u,l,v,g=this,b=c(g),w=r(e),x=b.raw;if(x)return x.lastIndex=g.lastIndex,t=h.call(x,w),g.lastIndex=x.lastIndex,t;var _=b.groups,k=m&&g.sticky,S=i.call(g),T=g.source,E=0,O=w;if(k&&(S=S.replace("y",""),-1===S.indexOf("g")&&(S+="g"),O=w.slice(g.lastIndex),g.lastIndex>0&&(!g.multiline||g.multiline&&"\n"!==w.charAt(g.lastIndex-1))&&(T="(?: "+T+")",O=" "+O,E++),n=new RegExp("^(?:"+T+")",S)),y&&(n=new RegExp("^"+T+"$(?!\\s)",S)),p&&(s=g.lastIndex),o=d.call(k?n:g,O),k?o?(o.input=o.input.slice(E),o[0]=o[0].slice(E),o.index=g.lastIndex,g.lastIndex+=o[0].length):g.lastIndex=0:p&&o&&(g.lastIndex=g.global?o.index+o[0].length:s),y&&o&&o.length>1&&f.call(o[0],n,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(o[u]=void 0)})),o&&_)for(o.groups=l=a(null),u=0;u<_.length;u++)v=_[u],l[v[0]]=o[v[1]];return o}),e.exports=h},9325:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("0546"),i=n("20c9"),s=n("3c45");class o extends r.SyncEntity{constructor(e,t,n){super(e,n),this.descriptor=t}get uri(){return this.descriptor.url}get links(){return this.descriptor.links}static get type(){return"stream"}get dateExpires(){return this.descriptor.date_expires}get type(){return"stream"}get lastEventId(){return null}get indexName(){}get queryString(){}get sid(){return this.descriptor.sid}get uniqueName(){return this.descriptor.unique_name||null}async publishMessage(e){const t={data:e},n=await this.services.network.post(this.links.messages,t),r=n.body,i=this._handleMessagePublished(r.sid,e,!1);return i}async setTtl(e){i.validateMandatoryTtl(e);try{const t={ttl:e},n=await this.services.network.post(this.uri,t);this.descriptor.date_expires=n.body.date_expires}catch(t){throw 404===t.status&&this.onRemoved(!1),t}}async removeStream(){await this.services.network.delete(this.uri),this.onRemoved(!0)}_update(e){switch(e.type){case"stream_message_published":this._handleMessagePublished(e.message_sid,e.message_data,!0);break;case"stream_removed":this.onRemoved(!1);break}}_handleMessagePublished(e,t,n){const r={sid:e,value:t};return this.broadcastEventToListeners("messagePublished",{message:r,isLocal:!n}),r}onRemoved(e){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:e})}}t.SyncStreamImpl=o;class a extends s.default{constructor(e){super(),this.syncStreamImpl=e,this.syncStreamImpl.attach(this)}get uri(){return this.syncStreamImpl.uri}get links(){return this.syncStreamImpl.links}static get type(){return o.type}get dateExpires(){return this.syncStreamImpl.dateExpires}get type(){return o.type}get lastEventId(){return null}get sid(){return this.syncStreamImpl.sid}get uniqueName(){return this.syncStreamImpl.uniqueName}async publishMessage(e){return this.ensureNotClosed(),this.syncStreamImpl.publishMessage(e)}async setTtl(e){return this.ensureNotClosed(),this.syncStreamImpl.setTtl(e)}async removeStream(){return this.ensureNotClosed(),this.syncStreamImpl.removeStream()}close(){super.close(),this.syncStreamImpl.detach(this.listenerUuid)}}t.SyncStream=a,t.default=a},"94ca":function(e,t,n){var r=n("d039"),i=/#|\.prototype\./,s=function(e,t){var n=a[o(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},o=s.normalize=function(e){return String(e).replace(i,".").toLowerCase()},a=s.data={},c=s.NATIVE="N",u=s.POLYFILL="P";e.exports=s},9523:function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},"96cf":function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(M){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,s=Object.create(i.prototype),o=new I(r||[]);return s._invoke=T(e,n,o),s}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(M){return{type:"throw",arg:M}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",h="executing",p="completed",m={};function y(){}function v(){}function g(){}var b={};c(b,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(j([])));x&&x!==n&&r.call(x,s)&&(b=x);var _=g.prototype=y.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,s,o,a){var c=l(e[i],e,s);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"===typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,a)}))}a(c.arg)}var i;function s(e,r){function s(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(s,s):s()}this._invoke=s}function T(e,t,n){var r=d;return function(i,s){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw s;return P()}n.method=i,n.arg=s;while(1){var o=n.delegate;if(o){var a=E(o,n);if(a){if(a===m)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?p:f,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator["return"]&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function j(e){if(e){var n=e[s];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){while(++i<e.length)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:P}}function P(){return{value:t,done:!0}}return v.prototype=g,c(_,"constructor",g),c(g,"constructor",v),v.displayName=c(g,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,a,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},k(S.prototype),c(S.prototype,o,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new S(u(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(_),c(_,a,"Generator"),c(_,s,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=j,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return a.type="throw",a.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:j(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=r}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},"970b":function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},9756:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("5ab9");t.Retrier=r.Retrier;const i=n("62eb");t.Backoff=i.Backoff,t.default=r.Retrier},"981f":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;const r=n("faa1"),i=n("914c"),s=n("0f48"),o=n("a63b"),a=n("437c");class c extends r.EventEmitter{constructor(e,t={}){if(super(),!e||0===e.length)throw new Error("Token is required for Notifications client");t.logLevel=t.logLevel||"error",a.log.setLevel(t.logLevel);t.minTokenRefreshInterval;const n=t.productId||"notifications";t.twilsockClient=t.twilsockClient||new i.TwilsockClient(e,n,t),t.transport=t.transport||t.twilsockClient,this.services={twilsock:t.twilsockClient,transport:t.transport,config:new s.Configuration(null,t)},this.registrar=new o.Registrar(n,this.services.transport,this.services.twilsock,this.services.config),this.reliableTransportState={overall:!1,transport:!1,registration:!1,lastEmitted:null},this._onTransportStateChange(this.services.twilsock.isConnected),this.registrar.on("transportReady",e=>{this._onRegistrationStateChange(e?"registered":"")}),this.registrar.on("stateChanged",e=>{this._onRegistrationStateChange(e)}),this.registrar.on("needReliableTransport",this._onNeedReliableTransport.bind(this)),this.services.twilsock.on("message",(e,t)=>this._routeMessage(e,t)),this.services.twilsock.on("connected",e=>{this._onTransportStateChange(!0),this.registrar.setNotificationId("twilsock",e)}),this.services.twilsock.on("disconnected",()=>{this._onTransportStateChange(!1)}),this.services.config.updateToken(e),this.registrar.updateToken(e)}get connectionState(){return"disconnected"===this.services.twilsock.state?"disconnected":"disconnecting"===this.services.twilsock.state?"disconnecting":"connected"===this.services.twilsock.state&&this.reliableTransportState.registration?"connected":"rejected"===this.services.twilsock.state?"denied":"connecting"}_routeMessage(e,t){a.log.trace("Message arrived: ",e,t),this.emit("message",e,t)}_onNeedReliableTransport(e){e?this.services.twilsock.connect():this.services.twilsock.disconnect()}_onRegistrationStateChange(e){this.reliableTransportState.registration="registered"===e,this._updateTransportState()}_onTransportStateChange(e){this.reliableTransportState.transport=e,this._updateTransportState()}_updateTransportState(){const e=this.reliableTransportState.transport&&this.reliableTransportState.registration;this.reliableTransportState.overall!==e&&(this.reliableTransportState.overall=e,a.log.info("Transport ready:",e),this.emit("transportReady",e)),this.reliableTransportState.lastEmitted!==this.connectionState&&(this.reliableTransportState.lastEmitted=this.connectionState,this.emit("connectionStateChanged",this.connectionState))}subscribe(e,t="twilsock"){return a.log.trace("Add subscriptions for message type: ",e,t),this.registrar.subscribe(e,t)}unsubscribe(e,t="twilsock"){return a.log.trace("Remove subscriptions for message type: ",e,t),this.registrar.unsubscribe(e,t)}handlePushNotification(e){return{messageType:e.twi_message_type,payload:e.payload}}setPushRegistrationId(e,t){a.log.trace("Set push registration id",e,t),this.registrar.setNotificationId(t,e)}async updateToken(e){a.log.info("authTokenUpdated"),this.services.config.token!==e&&(await this.services.twilsock.updateToken(e),this.services.config.updateToken(e),this.registrar.updateToken(e))}}t.Client=c},"98ae":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.descriptor=e}get uri(){return this.descriptor.url}get revision(){return this.descriptor.revision}get lastEventId(){return this.descriptor.last_event_id}get dateExpires(){return this.descriptor.date_expires}get key(){return this.descriptor.key}get data(){return this.descriptor.data}get dateUpdated(){return this.descriptor.date_updated}update(e,t,n,r){return this.descriptor.last_event_id=e,this.descriptor.revision=t,this.descriptor.data=n,this.descriptor.date_updated=r,this}updateDateExpires(e){this.descriptor.date_expires=e}}t.MapItem=r},9969:function(e,t,n){"use strict";
/*
@license
The following license applies to all parts of this software except as
documented below.

    Copyright (c) 2019, Twilio, inc.
    All rights reserved.

    Redistribution and use in source and binary forms, with or without
    modification, are permitted provided that the following conditions are
    met:

      1. Redistributions of source code must retain the above copyright
         notice, this list of conditions and the following disclaimer.

      2. Redistributions in binary form must reproduce the above copyright
         notice, this list of conditions and the following disclaimer in
         the documentation and/or other materials provided with the
         distribution.

      3. Neither the name of Twilio nor the names of its contributors may
         be used to endorse or promote products derived from this software
         without specific prior written permission.

    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
    "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
    LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
    A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
    HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
    SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
    LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
    DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
    THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
    (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
    OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

This software includes javascript-state-machine under the following license.

    Copyright (c) 2012, 2013, 2014, 2015, Jake Gordon and contributors

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all
    copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE

This software includes loglevel under the following license.

    Copyright (c) 2013 Tim Perry

    Permission is hereby granted, free of charge, to any person
    obtaining a copy of this software and associated documentation
    files (the "Software"), to deal in the Software without
    restriction, including without limitation the rights to use,
    copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the
    Software is furnished to do so, subject to the following
    conditions:

    The above copyright notice and this permission notice shall be
    included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
    OTHER DEALINGS IN THE SOFTWARE.

This software includes q under the following license.

    Copyright 2009–2014 Kristopher Michael Kowal. All rights reserved.
    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to
    deal in the Software without restriction, including without limitation the
    rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
    sell copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in
    all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
    IN THE SOFTWARE.

This software includes platform.js under the following license.

    Copyright 2014 Benjamin Tan <https://d10.github.io/>
    Copyright 2011-2015 John-David Dalton <http://allyoucanleet.com/>

    Permission is hereby granted, free of charge, to any person obtaining
    a copy of this software and associated documentation files (the
    "Software"), to deal in the Software without restriction, including
    without limitation the rights to use, copy, modify, merge, publish,
    distribute, sublicense, and/or sell copies of the Software, and to
    permit persons to whom the Software is furnished to do so, subject to
    the following conditions:

    The above copyright notice and this permission notice shall be
    included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
    MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
    LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
    OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
    WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

*/Object.defineProperty(t,"__esModule",{value:!0}),n("4ae1"),n("b64b"),n("a4d3"),n("4de4"),n("e439"),n("dbb4");var r=n("c973"),i=n("5bc3"),s=n("3c96"),o=n("ed6d"),a=n("6b58"),c=n("36c6"),u=n("9523"),l=n("970b"),d=n("a34a");n("159b"),n("e260"),n("d3b7"),n("e6cf"),n("3ca3"),n("ddb0"),n("cca6"),n("a9e3");var f=n("7037");n("99af"),n("a630");var h=n("5c7d");n("d81d"),n("ac1f"),n("5319"),n("a15b");var p=n("2f95"),m=n("9e8c");n("fb6a"),n("b0c0"),n("e01a"),n("d28b");var y=n("278c");n("4ec9");var v=n("600a"),g=n("914c"),b=n("fcbb"),w=n("4b03"),x=n("9c0e"),_=n("11c1"),k=n("faac"),S=n("a128"),T=n("e66e");n("6062");var E=n("448a");n("8ba4"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("c19f"),n("4e82"),n("25f0"),n("7db0"),n("a434");var O=n("cbfd");function C(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}function I(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t["default"]=e,Object.freeze(t)}var j,P=C(r),M=C(i),R=C(s),A=C(o),D=C(a),N=C(c),L=C(u),U=C(l),F=C(d),B=C(f),q=I(h),$=I(p),W=C(y),z=I(_),V=I(k),G=C(S),H=C(E);function J(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":B["default"](Reflect))&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function K(e,t){if("object"===("undefined"===typeof Reflect?"undefined":B["default"](Reflect))&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function Q(){}function Y(){Y.init.call(this)}function X(e){return void 0===e._maxListeners?Y.defaultMaxListeners:e._maxListeners}function Z(e,t,n){if(t)e.call(n);else for(var r=e.length,i=ue(e,r),s=0;s<r;++s)i[s].call(n)}function ee(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,s=ue(e,i),o=0;o<i;++o)s[o].call(n,r)}function te(e,t,n,r,i){if(t)e.call(n,r,i);else for(var s=e.length,o=ue(e,s),a=0;a<s;++a)o[a].call(n,r,i)}function ne(e,t,n,r,i,s){if(t)e.call(n,r,i,s);else for(var o=e.length,a=ue(e,o),c=0;c<o;++c)a[c].call(n,r,i,s)}function re(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,s=ue(e,i),o=0;o<i;++o)s[o].apply(n,r)}function ie(e,t,n,r){var i,s,o;if("function"!==typeof n)throw new TypeError('"listener" argument must be a function');if(s=e._events,s?(s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]):(s=e._events=new Q,e._eventsCount=0),o){if("function"===typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(i=X(e),i&&i>0&&o.length>i)){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,se(a)}}else o=s[t]=n,++e._eventsCount;return e}function se(e){"function"===typeof console.warn?console.warn(e):console.log(e)}function oe(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}function ae(e){var t=this._events;if(t){var n=t[e];if("function"===typeof n)return 1;if(n)return n.length}return 0}function ce(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function ue(e,t){var n=new Array(t);while(t--)n[t]=e[t];return n}function le(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function de(e,t){return["".concat((new Date).toISOString()," Conversations ").concat(e,":")].concat(Array.from(t))}Q.prototype=Object.create(null),Y.EventEmitter=Y,Y.usingDomains=!1,Y.prototype.domain=void 0,Y.prototype._events=void 0,Y.prototype._maxListeners=void 0,Y.defaultMaxListeners=10,Y.init=function(){this.domain=null,Y.usingDomains&&j.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Q,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Y.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},Y.prototype.getMaxListeners=function(){return X(this)},Y.prototype.emit=function(e){var t,n,r,i,s,o,a,c="error"===e;if(o=this._events,o)c=c&&null==o.error;else if(!c)return!1;if(a=this.domain,c){if(t=arguments[1],!a){if(t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=a,t.domainThrown=!1,a.emit("error",t),!1}if(n=o[e],!n)return!1;var l="function"===typeof n;switch(r=arguments.length,r){case 1:Z(n,l,this);break;case 2:ee(n,l,this,arguments[1]);break;case 3:te(n,l,this,arguments[1],arguments[2]);break;case 4:ne(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),s=1;s<r;s++)i[s-1]=arguments[s];re(n,l,this,i)}return!0},Y.prototype.addListener=function(e,t){return ie(this,e,t,!1)},Y.prototype.on=Y.prototype.addListener,Y.prototype.prependListener=function(e,t){return ie(this,e,t,!0)},Y.prototype.once=function(e,t){if("function"!==typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,oe(this,e,t)),this},Y.prototype.prependOnceListener=function(e,t){if("function"!==typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,oe(this,e,t)),this},Y.prototype.removeListener=function(e,t){var n,r,i,s,o;if("function"!==typeof t)throw new TypeError('"listener" argument must be a function');if(r=this._events,!r)return this;if(n=r[e],!n)return this;if(n===t||n.listener&&n.listener===t)0===--this._eventsCount?this._events=new Q:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(i=-1,s=n.length;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0===--this._eventsCount)return this._events=new Q,this;delete r[e]}else ce(n,i);r.removeListener&&this.emit("removeListener",e,o||t)}return this},Y.prototype.off=function(e,t){return this.removeListener(e,t)},Y.prototype.removeAllListeners=function(e){var t,n;if(n=this._events,!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=new Q,this._eventsCount=0):n[e]&&(0===--this._eventsCount?this._events=new Q:delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),s=0;s<i.length;++s)r=i[s],"removeListener"!==r&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new Q,this._eventsCount=0,this}if(t=n[e],"function"===typeof t)this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},Y.prototype.listeners=function(e){var t,n,r=this._events;return r?(t=r[e],n=t?"function"===typeof t?[t.listener||t]:le(t):[]):n=[],n},Y.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):ae.call(e,t)},Y.prototype.listenerCount=ae,Y.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var fe=q.getLogger("twilio-conversations"),he=function(){function e(t){U["default"](this,e),L["default"](this,"prefix",""),this.prefix=null!==t&&void 0!==t&&t.length>0?t+" ":""}return M["default"](e,[{key:"setLevel",value:function(e){fe.setLevel(e)}},{key:"trace",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];fe.trace.apply(null,de(this.prefix+"T",t))}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];fe.debug.apply(null,de(this.prefix+"D",t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];fe.info.apply(null,de(this.prefix+"I",t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];fe.warn.apply(null,de(this.prefix+"W",t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];fe.error.apply(null,de(this.prefix+"E",t))}}],[{key:"scope",value:function(t){return new e(t)}},{key:"setLevel",value:function(e){fe.setLevel(e)}},{key:"trace",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];fe.trace.apply(null,de("T",t))}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];fe.debug.apply(null,de("D",t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];fe.info.apply(null,de("I",t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];fe.warn.apply(null,de("W",t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];fe.error.apply(null,de("E",t))}}]),e}(),pe="/v1/typing",me=5,ye="PT5S",ve="PT5S",ge=100,be=1e3,we=4e3,xe=3,_e=!0,ke=function(){function e(t){U["default"](this,e),t=t||{};var n=t.Chat||t.IPMessaging||t||{};this.region=n.region||t.region,this.baseUrl=n.apiUri||n.typingUri||(this.region&&"us1"!==this.region?"https://aim.".concat(this.region,".twilio.com"):"https://aim.twilio.com"),this.typingIndicatorUri=this.baseUrl+pe,this.typingIndicatorTimeoutOverride=n.typingIndicatorTimeoutOverride,this.httpCacheIntervalOverride=n.httpCacheIntervalOverride,this.consumptionReportIntervalOverride=n.consumptionReportIntervalOverride,this.userInfosToSubscribeOverride=n.userInfosToSubscribeOverride,this.retryWhenThrottledOverride=n.retryWhenThrottledOverride,this.backoffConfigOverride=n.backoffConfigOverride,this.productId=t.productId}return M["default"](e,[{key:"typingIndicatorTimeoutDefault",get:function(){return 1e3*me}},{key:"httpCacheIntervalDefault",get:function(){return ye}},{key:"consumptionReportIntervalDefault",get:function(){return ve}},{key:"userInfosToSubscribeDefault",get:function(){return ge}},{key:"retryWhenThrottledDefault",get:function(){return _e}},{key:"backoffConfigDefault",get:function(){return{min:be,max:we,maxAttemptsCount:xe}}}]),e}();function Se(e,t){return 0===$.createPatch(e,t).length}function Te(e){return JSON.parse(JSON.stringify(e))}function Ee(e){return"undefined"===typeof e||isNaN(Number(e))?null:Number(e)}function Oe(e){try{return new Date(e)}catch(t){return null}}function Ce(e,t,n){var r={};if(e)try{r=JSON.parse(e)}catch(i){n.warn(t,i)}return r}var Ie=function(){function e(t){U["default"](this,e),this.base=t.replace(/\/$/,""),this.args=[],this.paths=[]}return M["default"](e,[{key:"arg",value:function(e,t){return"undefined"!==typeof t&&this.args.push(encodeURIComponent(e)+"="+encodeURIComponent(t)),this}},{key:"path",value:function(e){return this.paths.push(encodeURIComponent(e)),this}},{key:"build",value:function(){var e=this.base;return this.paths.length&&(e+="/"+this.paths.join("/")),this.args.length&&(e+="?"+this.args.join("&")),e}}]),e}();function je(e){var t=Pe();return function(){var n,r=N["default"](e);if(t){var i=N["default"](this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D["default"](this,n)}}function Pe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Me=he.scope("User"),Re=function(e){A["default"](n,e);var t=je(n);function n(e,r,i){var s;return U["default"](this,n),s=t.call(this),s.subscribed="initializing",s.setMaxListeners(0),s.services=i,s.state={identity:e,entityName:r,friendlyName:null,attributes:{},online:null,notifiable:null},s}return M["default"](n,[{key:"identity",get:function(){return this.state.identity},set:function(e){this.state.identity=e}},{key:"entityName",set:function(e){this.state.entityName=e}},{key:"attributes",get:function(){return this.state.attributes}},{key:"friendlyName",get:function(){return this.state.friendlyName}},{key:"isOnline",get:function(){return this.state.online}},{key:"isNotifiable",get:function(){return this.state.notifiable}},{key:"isSubscribed",get:function(){return"subscribed"==this.subscribed}},{key:"_update",value:function(e,t){var n=[];switch(Me.debug("User for",this.state.identity,"updated:",e,t),e){case"friendlyName":this.state.friendlyName!==t.value&&(n.push("friendlyName"),this.state.friendlyName=t.value);break;case"attributes":var r=Ce(t.value,"Retrieved malformed attributes from the server for user: ".concat(this.state.identity),Me);Se(this.state.attributes,r)||(this.state.attributes=r,n.push("attributes"));break;case"reachability":this.state.online!==t.online&&(this.state.online=t.online,n.push("reachabilityOnline")),this.state.notifiable!==t.notifiable&&(this.state.notifiable=t.notifiable,n.push("reachabilityNotifiable"));break;default:return}n.length>0&&this.emit("updated",{user:this,updateReasons:n})}},{key:"_updateReachabilityInfo",value:function(e,t){var n=this;return this.services.session.reachabilityEnabled?e.get("reachability").then(t).catch((function(e){Me.warn("Failed to get reachability info for ",n.state.identity,e)})):Promise.resolve()}},{key:"_fetch",value:function(){var e=P["default"](F["default"].mark((function e(){var t=this;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.state.entityName){e.next=2;break}return e.abrupt("return",this);case 2:return this.promiseToFetch=this.services.syncClient.map({id:this.state.entityName,mode:"open_existing",includeItems:!0}).then((function(e){return t.entity=e,e.on("itemUpdated",(function(e){return Me.debug(t.state.entityName+" ("+t.state.identity+") itemUpdated: "+e.item.key),t._update(e.item.key,e.item.data)})),Promise.all([e.get("friendlyName").then((function(e){return t._update(e.key,e.data)})),e.get("attributes").then((function(e){return t._update(e.key,e.data)})),t._updateReachabilityInfo(e,(function(e){return t._update(e.key,e.data)}))])})).then((function(){return Me.debug("Fetched for",t.identity),t.subscribed="subscribed",t.emit("userSubscribed",t),t})).catch((function(e){throw t.promiseToFetch=null,e})),e.abrupt("return",this.promiseToFetch);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_ensureFetched",value:function(){return this.promiseToFetch||this._fetch()}},{key:"updateAttributes",value:function(){var e=P["default"](F["default"].mark((function e(t){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("unsubscribed"!=this.subscribed){e.next=2;break}throw new Error("Can't modify unsubscribed object");case 2:return e.next=4,this.services.session.addCommand("editUserAttributes",{username:this.state.identity,attributes:JSON.stringify(t)});case 4:return e.abrupt("return",this);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateFriendlyName",value:function(){var e=P["default"](F["default"].mark((function e(t){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("unsubscribed"!=this.subscribed){e.next=2;break}throw new Error("Can't modify unsubscribed object");case 2:return e.next=4,this.services.session.addCommand("editUserFriendlyName",{username:this.state.identity,friendlyName:t});case 4:return e.abrupt("return",this);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unsubscribe",value:function(){var e=P["default"](F["default"].mark((function e(){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.promiseToFetch){e.next=7;break}return e.next=3,this.promiseToFetch;case 3:this.entity.close(),this.promiseToFetch=null,this.subscribed="unsubscribed",this.emit("userUnsubscribed",this);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(Y);function Ae(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=De(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function De(e,t){if(e){if("string"===typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(e,t):void 0}}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}J([m.validateTypesAsync(["string","number","boolean","object",m.literal(null)]),K("design:type",Function),K("design:paramtypes",[Object]),K("design:returntype",Promise)],Re.prototype,"updateAttributes",null),J([m.validateTypesAsync(["string",m.literal(null)]),K("design:type",Function),K("design:paramtypes",[String]),K("design:returntype",Promise)],Re.prototype,"updateFriendlyName",null);var Le=function(){function e(t,n){var r=this;U["default"](this,e),this.config=t,this.services=n,this.cache=new Map,this.cacheLifetime=0,this.services.session.getHttpCacheInterval().then((function(e){r.cacheLifetime=1e3*e,r.cleanupCache()}))}return M["default"](e,[{key:"backoffConfig",value:function(){return Object.assign(this.config.backoffConfigDefault,this.config.backoffConfigOverride)}},{key:"retryWhenThrottled",value:function(){return"undefined"!==typeof this.config.retryWhenThrottledOverride?this.config.retryWhenThrottledOverride:"undefined"!==typeof this.config.retryWhenThrottledDefault&&this.config.retryWhenThrottledDefault}},{key:"isExpired",value:function(e){return!this.cacheLifetime||Date.now()-e>this.cacheLifetime}},{key:"cleanupCache",value:function(){var e,t=Ae(this.cache);try{for(t.s();!(e=t.n()).done;){var n=W["default"](e.value,2),r=n[0],i=n[1];this.isExpired(i.timestamp)&&this.cache.delete(r)}}catch(s){t.e(s)}finally{t.f()}0===this.cache.size&&clearInterval(this.timer)}},{key:"pokeTimer",value:function(){var e=this;this.timer=this.timer||setInterval((function(){return e.cleanupCache()}),2*this.cacheLifetime)}},{key:"executeWithRetry",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(r,i){var s=[502,503,504];n&&s.push(429);var o=new v.Retrier(t.backoffConfig());o.on("attempt",(function(){e().then((function(e){return o.succeeded(e)})).catch((function(e){s.indexOf(e.status)>-1||"Twilsock disconnected"===e.message?o.failed(e):(o.removeAllListeners(),o.cancel(),i(e))}))})),o.on("succeeded",(function(e){r(e)})),o.on("cancelled",(function(e){return i(e)})),o.on("failed",(function(e){return i(e)})),o.start()}))}},{key:"get",value:function(){var e=P["default"](F["default"].mark((function e(t){var n,r,i,s=this;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.cache.get(t),!n||this.isExpired(n.timestamp)){e.next=3;break}return e.abrupt("return",n.response);case 3:return r={},e.next=6,this.executeWithRetry((function(){return s.services.transport.get(t,r,s.config.productId)}),this.retryWhenThrottled());case 6:return i=e.sent,this.cache.set(t,{response:i,timestamp:Date.now()}),this.pokeTimer(),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Ue=function e(){U["default"](this,e)};L["default"](Ue,"TYPING_INDICATOR","twilio.ipmsg.typing_indicator"),L["default"](Ue,"NEW_MESSAGE","twilio.conversations.new_message"),L["default"](Ue,"ADDED_TO_CONVERSATION","twilio.conversations.added_to_conversation"),L["default"](Ue,"REMOVED_FROM_CONVERSATION","twilio.conversations.removed_from_conversation"),L["default"](Ue,"CONSUMPTION_UPDATE","twilio.channel.consumption_update");var Fe=function(){function e(t,n,r,i){U["default"](this,e),this.state={prevToken:r,nextToken:i,source:n,items:t}}return M["default"](e,[{key:"hasNextPage",get:function(){return!!this.state.nextToken}},{key:"hasPrevPage",get:function(){return!!this.state.prevToken}},{key:"items",get:function(){return this.state.items}},{key:"nextPage",value:function(){return this.hasNextPage?this.state.source(this.state.nextToken):Promise.reject(new Error("No next page"))}},{key:"prevPage",value:function(){return this.hasPrevPage?this.state.source(this.state.prevToken):Promise.reject(new Error("No previous page"))}}]),e}(),Be=function e(t){U["default"](this,e),this.channel_sid=t.channel_sid,this.status=t.status,this.channel=t.channel,this.messages=t.messages,this.roster=t.roster,this.lastConsumedMessageIndex=t.last_consumed_message_index,this.notificationLevel=t.notification_level,this.descriptor=t},qe=function(){function e(t){U["default"](this,e),this.services=t}return M["default"](e,[{key:"getPage",value:function(){var e=P["default"](F["default"].mark((function e(t){var n,r,i,s=this;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=t||{},e.next=3,this.services.session.getSessionLinks();case 3:return n=e.sent,r=new Ie(n.syncListUrl).arg("PageToken",t.pageToken).build(),e.next=7,this.services.network.get(r);case 7:return i=e.sent,e.abrupt("return",new Fe(i.body.channels.map((function(e){return new Be(e)})),(function(e){return s.getPage({pageToken:e})}),i.body.meta.previous_token,i.body.meta.next_token));case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),$e=function e(){U["default"](this,e)};function We(e){var t=ze();return function(){var n,r=N["default"](e);if(t){var i=N["default"](this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D["default"](this,n)}}function ze(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}L["default"]($e,"HTTP_200_OK",200),L["default"]($e,"HTTP_400_BAD_REQUEST",400),L["default"]($e,"HTTP_404_NOT_FOUND",404),L["default"]($e,"ACCESS_FORBIDDEN_FOR_IDENTITY",54007),L["default"]($e,"LIST_NOT_FOUND",54150);var Ve=function(e){A["default"](n,e);var t=We(n);function n(e,r){var i;return U["default"](this,n),i=t.call(this),i.name=i.constructor.name,i.message=e,i.code=r,Error.captureStackTrace?Error.captureStackTrace(R["default"](i),i.constructor):i.stack=(new Error).stack,i}return n}(G["default"](Error)),Ge=function(){function e(){var t=this;U["default"](this,e),this._promise=new Promise((function(e,n){t._resolve=e,t._reject=n}))}return M["default"](e,[{key:"promise",get:function(){return this._promise}},{key:"update",value:function(e){this._resolve(e)}},{key:"set",value:function(e){this.current=e,this._resolve(e)}},{key:"fail",value:function(e){this._reject(e)}}]),e}(),He="1.2.3",Je=He,Ke="com.twilio.rtd.ipmsg",Qe=he.scope("Session"),Ye=function e(){U["default"](this,e)};function Xe(e,t){return!t.some((function(t){return!e.hasOwnProperty(t)}))}var Ze=function(){function e(t,n){U["default"](this,e);var r="undefined"!==typeof navigator?V.parse(navigator.userAgent):V;this.services=t,this.config=n,this.sessionInfo=new Ge,this.currentContext={},this.pendingCommands=new Map,this.sessionStreamPromise=null,this.endpointPlatform=["JS",Je,r.os,r.name,r.version].join("|")}return M["default"](e,[{key:"identity",get:function(){return this.sessionInfo.current.identity}},{key:"reachabilityEnabled",get:function(){return this.currentContext.reachabilityEnabled}},{key:"handleContextUpdate",value:function(e){Qe.info("Session context updated"),Qe.debug("new session context:",e),this.currentContext=e,Xe(e,["identity","userInfo","links","myChannels","channels"])&&(Qe.info("new session context accepted"),this.sessionInfo.set(e))}},{key:"initialize",value:function(){var e=this,t={type:"IpMsgSession",apiVersion:"4",endpointPlatform:this.endpointPlatform};return this.sessionStreamPromise=this.services.syncClient.list({purpose:Ke,context:t}).then((function(t){return Qe.info("Session created",t.sid),t.on("itemAdded",(function(t){return e.processCommandResponse(t.item)})),t.on("itemUpdated",(function(t){return e.processCommandResponse(t.item)})),t.on("contextUpdated",(function(t){return e.handleContextUpdate(t.context)})),t})).catch((function(e){throw Qe.error("Failed to create session",e),e})),this.sessionStreamPromise}},{key:"addCommand",value:function(e,t){return this.processCommand(e,t)}},{key:"processCommand",value:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=new Ye;return i.request=t,i.request.action=e,i.commandId=z.v4(),Qe.info("Adding command: ",e,i.commandId),Qe.debug("command arguments:",t,r),new Promise((function(s,o){n.sessionStreamPromise.then((function(e){return n.pendingCommands.set(i.commandId,{resolve:s,reject:o,commandId:i.commandId,request:i.request}),e.push(i)})).then((function(){return Qe.debug("Command accepted by server",i.commandId)})).catch((function(a){n.pendingCommands.delete(i.commandId),Qe.error("Failed to add a command to the session",a),a.code!=$e.ACCESS_FORBIDDEN_FOR_IDENTITY&&a.code!==$e.LIST_NOT_FOUND||!r?o(new Error("Can't add command: "+a.message)):(Qe.info("recreating session..."),n.initialize(),s(n.processCommand(e,t,!1)))}))}))}},{key:"processCommandResponse",value:function(e){if(e.data.hasOwnProperty("response")&&e.data.hasOwnProperty("commandId")&&this.pendingCommands.has(e.data.commandId)){var t=e.data,n=t.commandId;if(t.response.status===$e.HTTP_200_OK){Qe.debug("Command succeeded: ",t);var r=this.pendingCommands.get(n).resolve;this.pendingCommands.delete(n),r(t.response)}else{Qe.error("Command failed: ",t);var i=this.pendingCommands.get(n).reject;this.pendingCommands.delete(n),i(new Ve(t.response.statusText,t.response.status))}}}},{key:"getSessionContext",value:function(){return this.sessionStreamPromise.then((function(e){return e.getContext()}))}},{key:"getSessionLinks",value:function(){var e=P["default"](F["default"].mark((function e(){var t;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.sessionInfo.promise;case 2:return t=e.sent,e.abrupt("return",{publicChannelsUrl:this.config.baseUrl+t.links.publicChannelsUrl,myChannelsUrl:this.config.baseUrl+t.links.myChannelsUrl,typingUrl:this.config.baseUrl+t.links.typingUrl,syncListUrl:this.config.baseUrl+t.links.syncListUrl,usersUrl:this.config.baseUrl+t.links.usersUrl,mediaServiceUrl:t.links.mediaServiceUrl,messagesReceiptsUrl:this.config.baseUrl+t.links.messagesReceiptsUrl});case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getConversationsId",value:function(){var e=P["default"](F["default"].mark((function e(){var t;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.sessionInfo.promise;case 2:return t=e.sent,e.abrupt("return",t.channels);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMyConversationsId",value:function(){var e=P["default"](F["default"].mark((function e(){var t;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.sessionInfo.promise;case 2:return t=e.sent,e.abrupt("return",t.myChannels);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMaxUserInfosToSubscribe",value:function(){var e=P["default"](F["default"].mark((function e(){var t;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.sessionInfo.promise;case 2:return t=e.sent,e.abrupt("return",this.config.userInfosToSubscribeOverride||t.userInfosToSubscribe||this.config.userInfosToSubscribeDefault);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUsersData",value:function(){return this.sessionInfo.promise.then((function(e){return{user:e.userInfo,identity:e.identity}}))}},{key:"getConsumptionReportInterval",value:function(){var e=P["default"](F["default"].mark((function e(){var t,n;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getSessionContext();case 2:return t=e.sent,n=this.config.consumptionReportIntervalOverride||t.consumptionReportInterval||this.config.consumptionReportIntervalDefault,e.prev=4,e.abrupt("return",T.toSeconds(T.parse(n)));case 8:return e.prev=8,e.t0=e["catch"](4),Qe.error("Failed to parse consumption report interval",n,"using default value",this.config.consumptionReportIntervalDefault),e.abrupt("return",T.toSeconds(T.parse(this.config.consumptionReportIntervalDefault)));case 12:case"end":return e.stop()}}),e,this,[[4,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getHttpCacheInterval",value:function(){var e=P["default"](F["default"].mark((function e(){var t,n;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getSessionContext();case 2:return t=e.sent,n=this.config.httpCacheIntervalOverride||t.httpCacheInterval||this.config.httpCacheIntervalDefault,e.prev=4,e.abrupt("return",T.toSeconds(T.parse(n)));case 8:return e.prev=8,e.t0=e["catch"](4),Qe.error("Failed to parse cache interval",n,"using default value",this.config.httpCacheIntervalDefault),e.abrupt("return",T.toSeconds(T.parse(this.config.httpCacheIntervalDefault)));case 12:case"end":return e.stop()}}),e,this,[[4,8]])})));function t(){return e.apply(this,arguments)}return t}()}]),e}();function et(e){var t=tt();return function(){var n,r=N["default"](e);if(t){var i=N["default"](this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D["default"](this,n)}}function tt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var nt=he.scope("Participant"),rt=function(e){A["default"](n,e);var t=et(n);function n(e,r,i,s){var o;if(U["default"](this,n),o=t.call(this),o.conversation=r,o.services=e,o.state={attributes:Ce(i.attributes,"Retrieved malformed attributes from the server for participant: "+s,nt),dateCreated:i.dateCreated?Oe(i.dateCreated):null,dateUpdated:i.dateCreated?Oe(i.dateUpdated):null,sid:s,typingTimeout:null,isTyping:!1,identity:i.identity||null,roleSid:i.roleSid||null,lastReadMessageIndex:Number.isInteger(i.lastConsumedMessageIndex)?i.lastConsumedMessageIndex:null,lastReadTimestamp:i.lastConsumptionTimestamp?Oe(i.lastConsumptionTimestamp):null,type:i.type||"chat",userInfo:i.userInfo},!i.identity&&!i.type)throw new Error("Received invalid Participant object from server: Missing identity or type of Participant.");return o}return M["default"](n,[{key:"sid",get:function(){return this.state.sid}},{key:"attributes",get:function(){return this.state.attributes}},{key:"dateCreated",get:function(){return this.state.dateCreated}},{key:"dateUpdated",get:function(){return this.state.dateUpdated}},{key:"identity",get:function(){return this.state.identity}},{key:"isTyping",get:function(){return this.state.isTyping}},{key:"lastReadMessageIndex",get:function(){return this.state.lastReadMessageIndex}},{key:"lastReadTimestamp",get:function(){return this.state.lastReadTimestamp}},{key:"roleSid",get:function(){return this.state.roleSid}},{key:"type",get:function(){return this.state.type}},{key:"_startTyping",value:function(e){var t=this;return clearTimeout(this.state.typingTimeout),this.state.isTyping=!0,this.emit("typingStarted",this),this.conversation.emit("typingStarted",this),this.state.typingTimeout=setTimeout((function(){return t._endTyping()}),e),this}},{key:"_endTyping",value:function(){this.state.typingTimeout&&(this.state.isTyping=!1,this.emit("typingEnded",this),this.conversation.emit("typingEnded",this),clearInterval(this.state.typingTimeout),this.state.typingTimeout=null)}},{key:"_update",value:function(e){var t=[],n=Ce(e.attributes,"Retrieved malformed attributes from the server for participant: "+this.state.sid,nt);e.attributes&&!Se(this.state.attributes,n)&&(this.state.attributes=n,t.push("attributes"));var r=Oe(e.dateUpdated);e.dateUpdated&&r.getTime()!==(this.state.dateUpdated&&this.state.dateUpdated.getTime())&&(this.state.dateUpdated=r,t.push("dateUpdated"));var i=Oe(e.dateCreated);if(e.dateCreated&&i.getTime()!==(this.state.dateCreated&&this.state.dateCreated.getTime())&&(this.state.dateCreated=i,t.push("dateCreated")),e.roleSid&&this.state.roleSid!==e.roleSid&&(this.state.roleSid=e.roleSid,t.push("roleSid")),!Number.isInteger(e.lastConsumedMessageIndex)&&null!==e.lastConsumedMessageIndex||this.state.lastReadMessageIndex===e.lastConsumedMessageIndex||(this.state.lastReadMessageIndex=e.lastConsumedMessageIndex,t.push("lastReadMessageIndex")),e.lastConsumptionTimestamp){var s=new Date(e.lastConsumptionTimestamp);this.state.lastReadTimestamp&&this.state.lastReadTimestamp.getTime()===s.getTime()||(this.state.lastReadTimestamp=s,t.push("lastReadTimestamp"))}return t.length>0&&this.emit("updated",{participant:this,updateReasons:t}),this}},{key:"getUser",value:function(){var e=P["default"](F["default"].mark((function e(){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("chat"==this.type){e.next=2;break}throw new Error("Getting User is not supported for this Participant type: "+this.type);case 2:return e.abrupt("return",this.services.users.getUser(this.state.identity,this.state.userInfo));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"remove",value:function(){var e=P["default"](F["default"].mark((function e(){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.conversation.removeParticipant(this));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateAttributes",value:function(){var e=P["default"](F["default"].mark((function e(t){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("editMemberAttributes",{channelSid:this.conversation.sid,memberSid:this.sid,attributes:JSON.stringify(t)});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(Y);function it(e){var t=st();return function(){var n,r=N["default"](e);if(t){var i=N["default"](this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D["default"](this,n)}}function st(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}J([m.validateTypesAsync(["string","number","boolean","object",m.literal(null)]),K("design:type",Function),K("design:paramtypes",[Object]),K("design:returntype",Promise)],rt.prototype,"updateAttributes",null);var ot=he.scope("Participants"),at=function(e){A["default"](n,e);var t=it(n);function n(e,r,i){var s;return U["default"](this,n),s=t.call(this),s.services=r,s.conversation=e,s.participants=i,s}return M["default"](n,[{key:"unsubscribe",value:function(){var e=P["default"](F["default"].mark((function e(){var t;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.rosterEntityPromise){e.next=6;break}return e.next=3,this.rosterEntityPromise;case 3:t=e.sent,t.close(),this.rosterEntityPromise=null;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"subscribe",value:function(e){var t=this;return this.rosterEntityPromise=this.rosterEntityPromise||this.services.syncClient.map({id:e,mode:"open_existing"}).then((function(e){e.on("itemAdded",(function(e){ot.debug(t.conversation.sid+" itemAdded: "+e.item.key),t.upsertParticipant(e.item.key,e.item.data).then((function(e){t.emit("participantJoined",e)}))})),e.on("itemRemoved",(function(e){ot.debug(t.conversation.sid+" itemRemoved: "+e.key);var n=e.key;if(t.participants.has(n)){var r=t.participants.get(n);t.participants.delete(n),t.emit("participantLeft",r)}})),e.on("itemUpdated",(function(e){ot.debug(t.conversation.sid+" itemUpdated: "+e.item.key),t.upsertParticipant(e.item.key,e.item.data)}));var n=[],r=t,i=function e(t){return t.items.forEach((function(e){n.push(r.upsertParticipant(e.key,e.data))})),t.hasNextPage?t.nextPage().then(e):null};return e.getItems().then(i).then((function(){return Promise.all(n)})).then((function(){return e}))})).catch((function(e){throw t.rosterEntityPromise=null,"disconnected"!=t.services.syncClient.connectionState&&ot.error("Failed to get roster object for conversation",t.conversation.sid,e),ot.debug("ERROR: Failed to get roster object for conversation",t.conversation.sid,e),e}))}},{key:"upsertParticipant",value:function(){var e=P["default"](F["default"].mark((function e(t,n){var r,i=this;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.participants.get(t),!r){e.next=3;break}return e.abrupt("return",r._update(n));case 3:return r=new rt(this.services,this.conversation,n,t),this.participants.set(t,r),r.on("updated",(function(e){return i.emit("participantUpdated",e)})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getParticipants",value:function(){var e=this;return this.rosterEntityPromise.then((function(){var t=[];return e.participants.forEach((function(e){return t.push(e)})),t}))}},{key:"getParticipantBySid",value:function(){var e=P["default"](F["default"].mark((function e(t){var n=this;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.rosterEntityPromise.then((function(){var e=n.participants.get(t);if(!e)throw new Error("Participant with SID "+t+" was not found");return e})));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getParticipantByIdentity",value:function(){var e=P["default"](F["default"].mark((function e(t){var n,r=this;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=null,e.abrupt("return",this.rosterEntityPromise.then((function(){if(r.participants.forEach((function(e){e.identity===t&&(n=e)})),!n)throw new Error("Participant with identity "+t+" was not found");return n})));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"add",value:function(e,t){return this.services.session.addCommand("addMemberV2",{channelSid:this.conversation.sid,attributes:JSON.stringify(t),username:e})}},{key:"addNonChatParticipant",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.services.session.addCommand("addNonChatParticipant",{conversationSid:this.conversation.sid,proxyAddress:e,attributes:JSON.stringify(n),address:t})}},{key:"invite",value:function(e){return this.services.session.addCommand("inviteMember",{channelSid:this.conversation.sid,username:e})}},{key:"removeByIdentity",value:function(e){return this.services.session.addCommand("removeMember",{channelSid:this.conversation.sid,username:e})}},{key:"removeBySid",value:function(e){return this.services.session.addCommand("removeMember",{channelSid:this.conversation.sid,memberSid:e})}}]),n}(Y),ct=function(){function e(t,n){U["default"](this,e),L["default"](this,"mcsMedia",null),this.services=n,this.state={sid:t.sid,filename:t.filename,contentType:t.contentType,size:t.size}}return M["default"](e,[{key:"sid",get:function(){return this.state.sid}},{key:"filename",get:function(){return this.state.filename}},{key:"contentType",get:function(){return this.state.contentType}},{key:"size",get:function(){return this.state.size}},{key:"getContentTemporaryUrl",value:function(){var e=P["default"](F["default"].mark((function e(){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.mcsMedia){e.next=8;break}if(!this.services.mcsClient){e.next=7;break}return e.next=4,this.services.mcsClient.get(this.state.sid);case 4:this.mcsMedia=e.sent,e.next=8;break;case 7:throw new Error("Media Content Service is unavailable");case 8:return e.abrupt("return",this.mcsMedia.getContentUrl());case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),ut=function(){function e(t){U["default"](this,e),this.state=t}return M["default"](e,[{key:"total",get:function(){return this.state.total}},{key:"sent",get:function(){return this.state.sent}},{key:"delivered",get:function(){return this.state.delivered}},{key:"read",get:function(){return this.state.read}},{key:"undelivered",get:function(){return this.state.undelivered}},{key:"failed",get:function(){return this.state.failed}},{key:"_update",value:function(e){this.state=e}},{key:"_isEquals",value:function(e){var t=this.total===e.total,n=this.sent===e.sent,r=this.delivered===e.delivered,i=this.read===e.read,s=this.undelivered===e.undelivered,o=this.failed===e.failed;return t&&n&&r&&i&&s&&o}}]),e}(),lt=function e(t){U["default"](this,e),this.sid=t.sid,this.messageSid=t.message_sid,this.conversationSid=t.conversation_sid,this.channelMessageSid=t.channel_message_sid,this.participantSid=t.participant_sid,this.status=t.status||"queued",this.errorCode=t.error_code||0,this.dateCreated=t.date_created,this.dateUpdated=t.date_updated};function dt(e){var t=ft();return function(){var n,r=N["default"](e);if(t){var i=N["default"](this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D["default"](this,n)}}function ft(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var ht=he.scope("Message"),pt=function(e){A["default"](n,e);var t=dt(n);function n(e,r,i,s){var o;return U["default"](this,n),o=t.call(this),o.conversation=e,o.services=r,o.state={sid:s.sid,index:i,author:null==s.author?null:s.author,subject:null==s.subject?null:s.subject,body:s.text,timestamp:s.timestamp?new Date(s.timestamp):null,dateUpdated:s.dateUpdated?new Date(s.dateUpdated):null,lastUpdatedBy:s.lastUpdatedBy?s.lastUpdatedBy:null,attributes:Ce(s.attributes,"Got malformed attributes for the message ".concat(s.sid),ht),type:s.type?s.type:"text",media:s.type&&"media"===s.type&&s.media?new ct(s.media,o.services):null,participantSid:null==s.memberSid?null:s.memberSid,aggregatedDeliveryReceipt:s.delivery?new ut(s.delivery):null},o}return M["default"](n,[{key:"sid",get:function(){return this.state.sid}},{key:"author",get:function(){return this.state.author}},{key:"subject",get:function(){return this.state.subject}},{key:"body",get:function(){return"media"===this.type?null:this.state.body}},{key:"dateUpdated",get:function(){return this.state.dateUpdated}},{key:"index",get:function(){return this.state.index}},{key:"lastUpdatedBy",get:function(){return this.state.lastUpdatedBy}},{key:"dateCreated",get:function(){return this.state.timestamp}},{key:"attributes",get:function(){return this.state.attributes}},{key:"type",get:function(){return this.state.type}},{key:"media",get:function(){return this.state.media}},{key:"participantSid",get:function(){return this.state.participantSid}},{key:"aggregatedDeliveryReceipt",get:function(){return this.state.aggregatedDeliveryReceipt}},{key:"_update",value:function(e){var t=[];!e.text&&"string"!==typeof e.text||e.text===this.state.body||(this.state.body=e.text,t.push("body")),e.subject&&e.subject!==this.state.subject&&(this.state.subject=e.subject,t.push("subject")),e.lastUpdatedBy&&e.lastUpdatedBy!==this.state.lastUpdatedBy&&(this.state.lastUpdatedBy=e.lastUpdatedBy,t.push("lastUpdatedBy")),e.author&&e.author!==this.state.author&&(this.state.author=e.author,t.push("author")),e.dateUpdated&&new Date(e.dateUpdated).getTime()!==(this.state.dateUpdated&&this.state.dateUpdated.getTime())&&(this.state.dateUpdated=new Date(e.dateUpdated),t.push("dateUpdated")),e.timestamp&&new Date(e.timestamp).getTime()!==(this.state.timestamp&&this.state.timestamp.getTime())&&(this.state.timestamp=new Date(e.timestamp),t.push("dateCreated"));var n=Ce(e.attributes,"Got malformed attributes for the message ".concat(this.sid),ht);Se(this.state.attributes,n)||(this.state.attributes=n,t.push("attributes"));var r=e.delivery,i=this.state.aggregatedDeliveryReceipt,s=!!r&&!!r.total&&!!r.delivered&&!!r.failed&&!!r.read&&!!r.sent&&!!r.undelivered;s&&(i?i._isEquals(r)||(i._update(r),t.push("deliveryReceipt")):(this.state.aggregatedDeliveryReceipt=new ut(r),t.push("deliveryReceipt"))),t.length>0&&this.emit("updated",{message:this,updateReasons:t})}},{key:"getParticipant",value:function(){var e=P["default"](F["default"].mark((function e(){var t,n,r=this;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=null,!this.state.participantSid){e.next=5;break}return e.next=4,this.conversation.getParticipantBySid(this.participantSid).catch((function(){return ht.debug('Participant with sid "'+r.participantSid+'" not found for message '+r.sid),null}));case 4:t=e.sent;case 5:if(t||!this.state.author){e.next=9;break}return e.next=8,this.conversation.getParticipantByIdentity(this.state.author).catch((function(){return ht.debug('Participant with identity "'+r.author+'" not found for message '+r.sid),null}));case 8:t=e.sent;case 9:if(!t){e.next=11;break}return e.abrupt("return",t);case 11:throw n="Participant with ",this.state.participantSid&&(n+="SID '"+this.state.participantSid+"' "),this.state.author&&(this.state.participantSid&&(n+="or "),n+="identity '"+this.state.author+"' "),"Participant with "===n&&(n="Participant "),n+="was not found",new Error(n);case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDetailedDeliveryReceipts",value:function(){var e=P["default"](F["default"].mark((function e(){var t,n;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._getDetailedDeliveryReceiptsPaginator();case 2:t=e.sent,n=[];case 4:if(n=[].concat(H["default"](n),H["default"](t.items)),t.hasNextPage){e.next=8;break}return e.abrupt("break",13);case 8:return e.next=10,t.nextPage();case 10:t=e.sent,e.next=4;break;case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"remove",value:function(){var e=P["default"](F["default"].mark((function e(){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("deleteMessage",{channelSid:this.conversation.sid,messageIdx:this.index.toString()});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateBody",value:function(){var e=P["default"](F["default"].mark((function e(t){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("editMessage",{channelSid:this.conversation.sid,messageIdx:this.index.toString(),text:t});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateAttributes",value:function(){var e=P["default"](F["default"].mark((function e(t){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("editMessageAttributes",{channelSid:this.conversation.sid,messageIdx:this.index,attributes:JSON.stringify(t)});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_getDetailedDeliveryReceiptsPaginator",value:function(){var e=P["default"](F["default"].mark((function e(t){var n,r,i,s,o=this;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.getSessionLinks();case 2:return n=e.sent,r=n.messagesReceiptsUrl.replace("%s",this.conversation.sid).replace("%s",this.sid),i=new Ie(r).arg("PageToken",null===t||void 0===t?void 0:t.pageToken).arg("PageSize",null===t||void 0===t?void 0:t.pageSize).build(),e.next=7,this.services.network.get(i);case 7:return s=e.sent,e.abrupt("return",new Fe(s.body.delivery_receipts.map((function(e){return new lt(e)})),(function(e,t){return o._getDetailedDeliveryReceiptsPaginator({pageToken:e,pageSize:t})}),s.body.meta.previous_token,s.body.meta.next_token));case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(Y);function mt(e){var t=yt();return function(){var n,r=N["default"](e);if(t){var i=N["default"](this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D["default"](this,n)}}function yt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}J([m.validateTypesAsync("string"),K("design:type",Function),K("design:paramtypes",[String]),K("design:returntype",Promise)],pt.prototype,"updateBody",null),J([m.validateTypesAsync(["string","number","boolean","object",m.literal(null)]),K("design:type",Function),K("design:paramtypes",[Object]),K("design:returntype",Promise)],pt.prototype,"updateAttributes",null);var vt=he.scope("Messages"),gt=function(e){A["default"](n,e);var t=mt(n);function n(e,r){var i;return U["default"](this,n),i=t.call(this),i.conversation=e,i.services=r,i.messagesByIndex=new Map,i.messagesListPromise=null,i}return M["default"](n,[{key:"subscribe",value:function(e){var t=this;return this.messagesListPromise=this.messagesListPromise||this.services.syncClient.list({id:e,mode:"open_existing"}).then((function(e){return e.on("itemAdded",(function(e){vt.debug(t.conversation.sid+" itemAdded: "+e.item.index);var n=new pt(t.conversation,t.services,e.item.index,e.item.data);t.messagesByIndex.has(n.index)?vt.debug("Message arrived, but already known and ignored",t.conversation.sid,n.index):(t.messagesByIndex.set(n.index,n),n.on("updated",(function(e){return t.emit("messageUpdated",e)})),t.emit("messageAdded",n))})),e.on("itemRemoved",(function(e){vt.debug(t.conversation.sid+" itemRemoved: "+e.index);var n=e.index;if(t.messagesByIndex.has(n)){var r=t.messagesByIndex.get(n);t.messagesByIndex.delete(r.index),r.removeAllListeners("updated"),t.emit("messageRemoved",r)}})),e.on("itemUpdated",(function(e){vt.debug(t.conversation.sid+" itemUpdated: "+e.item.index);var n=t.messagesByIndex.get(e.item.index);n&&n._update(e.item.data)})),e})).catch((function(e){throw t.messagesListPromise=null,"disconnected"!=t.services.syncClient.connectionState&&vt.error("Failed to get messages object for conversation",t.conversation.sid,e),vt.debug("ERROR: Failed to get messages object for conversation",t.conversation.sid,e),e}))}},{key:"unsubscribe",value:function(){var e=P["default"](F["default"].mark((function e(){var t;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.messagesListPromise){e.next=6;break}return e.next=3,this.messagesListPromise;case 3:t=e.sent,t.close(),this.messagesListPromise=null;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"send",value:function(){var e=P["default"](F["default"].mark((function e(t){var n,r,i=arguments;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=i.length>2?i[2]:void 0,vt.debug("Sending text message",t,n,r),e.abrupt("return",this.services.session.addCommand("sendMessage",{channelSid:this.conversation.sid,text:t,attributes:JSON.stringify(n),subject:null===r||void 0===r?void 0:r.subject}));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendMedia",value:function(){var e=P["default"](F["default"].mark((function e(t){var n,r,i,s,o=arguments;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},r=o.length>2?o[2]:void 0,vt.debug("Sending media message",t,n,r),!("undefined"!==typeof FormData&&t instanceof FormData)){e.next=10;break}return vt.debug("Sending media message as FormData",t,n),e.next=7,this.services.mcsClient.postFormData(t);case 7:i=e.sent,e.next=17;break;case 10:if(vt.debug("Sending media message as SendMediaOptions",t,n),s=t,s.contentType&&s.media){e.next=14;break}throw new Error("Media content <Conversation#SendMediaOptions> must contain non-empty contentType and media");case 14:return e.next=16,this.services.mcsClient.post(s.contentType,s.media);case 16:i=e.sent;case 17:return e.abrupt("return",this.services.session.addCommand("sendMediaMessage",{channelSid:this.conversation.sid,mediaSid:i.sid,attributes:JSON.stringify(n)}));case 18:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getMessages",value:function(e,t,n){return t="undefined"!==typeof t?t:"end",n=n||"backwards",this._getMessages(e,t,n)}},{key:"wrapPaginator",value:function(e,t,n){var r=this,i="desc"===e,s=function(){return t.nextPage().then((function(t){return r.wrapPaginator(e,t,n)}))},o=function(){return t.prevPage().then((function(t){return r.wrapPaginator(e,t,n)}))};return n(t.items).then((function(e){return{items:e.sort((function(e,t){return e.index-t.index})),hasPrevPage:i?t.hasNextPage:t.hasPrevPage,hasNextPage:i?t.hasPrevPage:t.hasNextPage,prevPage:i?s:o,nextPage:i?o:s}}))}},{key:"_upsertMessage",value:function(e,t){var n=this,r=this.messagesByIndex.get(e);if(r)return r;var i=new pt(this.conversation,this.services,e,t);return this.messagesByIndex.set(i.index,i),i.on("updated",(function(e){return n.emit("messageUpdated",e)})),i}},{key:"_getMessages",value:function(e,t,n){var r=this;t="undefined"!==typeof t?t:"end",e=e||30;var i="backwards"===n?"desc":"asc";return this.messagesListPromise.then((function(n){return n.getItems({from:"end"!==t?t:void 0,pageSize:e,order:i})})).then((function(e){return r.wrapPaginator(i,e,(function(e){return Promise.all(e.map((function(e){return r._upsertMessage(e.index,e.data)})))}))}))}}]),n}(Y);function bt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=wt(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function wt(e,t){if(e){if("string"===typeof e)return xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xt(e,t):void 0}}function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _t(e){var t=kt();return function(){var n,r=N["default"](e);if(t){var i=N["default"](this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D["default"](this,n)}}function kt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var St=he.scope("Conversation"),Tt={lastMessage:"lastMessage",attributes:"attributes",createdBy:"createdBy",dateCreated:"dateCreated",dateUpdated:"dateUpdated",friendlyName:"friendlyName",lastConsumedMessageIndex:"lastConsumedMessageIndex",notificationLevel:"notificationLevel",sid:"sid",status:"status",uniqueName:"uniqueName",state:"state"};function Et(e){try{return new Date(e)}catch(t){return null}}var Ot=function(e){A["default"](n,e);var t=_t(n);function n(e,r,i){var s;U["default"](this,n),s=t.call(this);var o=r.attributes||{},a=r.createdBy,c=Et(r.dateCreated),u=Et(r.dateUpdated),l=r.friendlyName||null,d=Number.isInteger(r.lastConsumedMessageIndex)?r.lastConsumedMessageIndex:null,f=r.uniqueName||null;try{JSON.stringify(o)}catch(h){throw new Error("Attributes must be a valid JSON object.")}return s.services=e,s.sid=i,s.entityName=r.channel,s.channelState={uniqueName:f,status:"notParticipating",attributes:o,createdBy:a,dateCreated:c,dateUpdated:u,friendlyName:l,lastReadMessageIndex:d},r.notificationLevel&&(s.channelState.notificationLevel=r.notificationLevel),s.participants=new Map,s.participantsEntity=new at(R["default"](s),s.services,s.participants),s.participantsEntity.on("participantJoined",s.emit.bind(R["default"](s),"participantJoined")),s.participantsEntity.on("participantLeft",s.emit.bind(R["default"](s),"participantLeft")),s.participantsEntity.on("participantUpdated",(function(e){return s.emit("participantUpdated",e)})),s.messagesEntity=new gt(R["default"](s),e),s.messagesEntity.on("messageAdded",(function(e){return s._onMessageAdded(e)})),s.messagesEntity.on("messageUpdated",(function(e){return s.emit("messageUpdated",e)})),s.messagesEntity.on("messageRemoved",s.emit.bind(R["default"](s),"messageRemoved")),s}return M["default"](n,[{key:"uniqueName",get:function(){return this.channelState.uniqueName}},{key:"status",get:function(){return this.channelState.status}},{key:"friendlyName",get:function(){return this.channelState.friendlyName}},{key:"dateUpdated",get:function(){return this.channelState.dateUpdated}},{key:"dateCreated",get:function(){return this.channelState.dateCreated}},{key:"createdBy",get:function(){return this.channelState.createdBy}},{key:"attributes",get:function(){return this.channelState.attributes}},{key:"lastReadMessageIndex",get:function(){return this.channelState.lastReadMessageIndex}},{key:"lastMessage",get:function(){return this.channelState.lastMessage}},{key:"notificationLevel",get:function(){return this.channelState.notificationLevel}},{key:"state",get:function(){return this.channelState.state}},{key:"_subscribe",value:function(){var e=this;return this.entityPromise?this.entityPromise:this.entityPromise=this.entityPromise||this.services.syncClient.document({id:this.entityName,mode:"open_existing"}).then((function(t){return e.entity=t,e.entity.on("updated",(function(t){e._update(t.data)})),e.entity.on("removed",(function(){return e.emit("removed",e)})),e._update(e.entity.data),t})).catch((function(t){throw e.entity=null,e.entityPromise=null,"disconnected"!=e.services.syncClient.connectionState&&St.error("Failed to get conversation object",t),St.debug("ERROR: Failed to get conversation object",t),t}))}},{key:"_subscribeStreams",value:function(){var e=P["default"](F["default"].mark((function e(){var t,n;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._subscribe();case 3:return St.trace("_subscribeStreams, this.entity.data=",this.entity.data),t=this.entity.data.messages,n=this.entity.data.roster,e.next=8,Promise.all([this.messagesEntity.subscribe(t),this.participantsEntity.subscribe(n)]);case 8:e.next=15;break;case 10:throw e.prev=10,e.t0=e["catch"](0),"disconnected"!==this.services.syncClient.connectionState&&St.error("Failed to subscribe on conversation objects",this.sid,e.t0),St.debug("ERROR: Failed to subscribe on conversation objects",this.sid,e.t0),e.t0;case 15:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"_unsubscribe",value:function(){var e=P["default"](F["default"].mark((function e(){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.entity){e.next=5;break}return e.next=3,this.entity.close();case 3:this.entity=null,this.entityPromise=null;case 5:return e.abrupt("return",Promise.all([this.participantsEntity.unsubscribe(),this.messagesEntity.unsubscribe()]));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_setStatus",value:function(e,t){var n=this;this.statusSource=t,this.channelState.status!==e&&(this.channelState.status=e,"joined"===e?this._subscribeStreams().catch((function(t){if(St.debug("ERROR while setting conversation status "+e,t),"disconnected"!==n.services.syncClient.connectionState)throw t})):this.entityPromise&&this._unsubscribe().catch((function(t){if(St.debug("ERROR while setting conversation status "+e,t),"disconnected"!==n.services.syncClient.connectionState)throw t})))}},{key:"_statusSource",value:function(){return this.statusSource}},{key:"_update",value:function(e){var t,r,i,s,o;St.trace("_update",e),n.preprocessUpdate(e,this.sid);for(var a=new Set,c=0,u=Object.keys(e);c<u.length;c++){var l=u[c],d=Tt[l];if(d)switch(d){case Tt.status:if(!e.status||"unknown"===e.status||this.channelState.status===e.status)break;this.channelState.status=e.status,a.add(d);break;case Tt.attributes:if(Se(this.channelState.attributes,e.attributes))break;this.channelState.attributes=e.attributes,a.add(d);break;case Tt.lastConsumedMessageIndex:if(void 0===e.lastConsumedMessageIndex||e.lastConsumedMessageIndex===this.channelState.lastReadMessageIndex)break;this.channelState.lastReadMessageIndex=e.lastConsumedMessageIndex,a.add("lastReadMessageIndex");break;case Tt.lastMessage:if(this.channelState.lastMessage&&!e.lastMessage){delete this.channelState.lastMessage,a.add(d);break}this.channelState.lastMessage=this.channelState.lastMessage||{},void 0!==(null===(t=e.lastMessage)||void 0===t?void 0:t.index)&&e.lastMessage.index!==this.channelState.lastMessage.index&&(this.channelState.lastMessage.index=e.lastMessage.index,a.add(d)),void 0!==(null===(r=e.lastMessage)||void 0===r?void 0:r.timestamp)&&(null===(i=this.channelState.lastMessage)||void 0===i||null===(s=i.dateCreated)||void 0===s?void 0:s.getTime())!==e.lastMessage.timestamp.getTime()&&(this.channelState.lastMessage.dateCreated=e.lastMessage.timestamp,a.add(d)),Se(this.channelState.lastMessage,{})&&delete this.channelState.lastMessage;break;case Tt.state:var f=e.state||void 0;if(void 0!==f&&(f.dateUpdated=new Date(f.dateUpdated)),Se(this.channelState.state,f))break;this.channelState.state=f,a.add(d);break;default:var h=e[l]instanceof Date,p=h&&(null===(o=this.channelState[d])||void 0===o?void 0:o.getTime())===e[l].getTime(),m=!h&&this[d]===e[l];if(p||m)break;this.channelState[d]=e[l],a.add(d)}}a.size>0&&this.emit("updated",{conversation:this,updateReasons:H["default"](a)})}},{key:"_onMessageAdded",value:function(e){var t,n=bt(this.participants.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.identity===e.author){r._endTyping();break}}}catch(i){n.e(i)}finally{n.f()}this.emit("messageAdded",e)}},{key:"add",value:function(){var e=P["default"](F["default"].mark((function e(t,n){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.participantsEntity.add(t,n));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"addNonChatParticipant",value:function(){var e=P["default"](F["default"].mark((function e(t,n){var r,i=arguments;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.abrupt("return",this.participantsEntity.addNonChatParticipant(t,n,r));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"advanceLastReadMessageIndex",value:function(){var e=P["default"](F["default"].mark((function e(t){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._subscribeStreams();case 2:return e.abrupt("return",this.services.readHorizon.advanceLastReadMessageIndexForConversation(this.sid,t,this.lastReadMessageIndex));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"delete",value:function(){var e=P["default"](F["default"].mark((function e(){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("destroyChannel",{channelSid:this.sid});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAttributes",value:function(){var e=P["default"](F["default"].mark((function e(){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._subscribe();case 2:return e.abrupt("return",this.attributes);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMessages",value:function(){var e=P["default"](F["default"].mark((function e(t,n,r){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._subscribeStreams();case 2:return e.abrupt("return",this.messagesEntity.getMessages(t,n,r));case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"getParticipants",value:function(){var e=P["default"](F["default"].mark((function e(){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._subscribeStreams();case 2:return e.abrupt("return",this.participantsEntity.getParticipants());case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getParticipantsCount",value:function(){var e=P["default"](F["default"].mark((function e(){var t,n,r;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.getSessionLinks();case 2:return t=e.sent,n=new Ie(t.publicChannelsUrl).path(this.sid).build(),e.next=6,this.services.network.get(n);case 6:return r=e.sent,e.abrupt("return",r.body.members_count);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getParticipantBySid",value:function(){var e=P["default"](F["default"].mark((function e(t){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.participantsEntity.getParticipantBySid(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getParticipantByIdentity",value:function(){var e=P["default"](F["default"].mark((function e(t){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.participantsEntity.getParticipantByIdentity(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getMessagesCount",value:function(){var e=P["default"](F["default"].mark((function e(){var t,n,r;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.getSessionLinks();case 2:return t=e.sent,n=new Ie(t.publicChannelsUrl).path(this.sid).build(),e.next=6,this.services.network.get(n);case 6:return r=e.sent,e.abrupt("return",r.body.messages_count);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUnreadMessagesCount",value:function(){var e=P["default"](F["default"].mark((function e(){var t,n,r;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.getSessionLinks();case 2:return t=e.sent,n=new Ie(t.myChannelsUrl).arg("ChannelSid",this.sid).build(),e.next=6,this.services.network.get(n);case 6:if(r=e.sent,!r.body.channels.length||r.body.channels[0].channel_sid!=this.sid){e.next=11;break}if("undefined"===typeof r.body.channels[0].unread_messages_count||null==r.body.channels[0].unread_messages_count){e.next=10;break}return e.abrupt("return",r.body.channels[0].unread_messages_count);case 10:return e.abrupt("return",null);case 11:throw new Error("Conversation is not in user conversations list");case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"join",value:function(){var e=P["default"](F["default"].mark((function e(){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("joinChannelV2",{channelSid:this.sid});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"leave",value:function(){var e=P["default"](F["default"].mark((function e(){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("joined"!==this.channelState.status){e.next=3;break}return e.next=3,this.services.session.addCommand("leaveChannel",{channelSid:this.sid});case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"removeParticipant",value:function(){var e=P["default"](F["default"].mark((function e(t){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t instanceof rt)){e.next=4;break}return e.next=3,this.participantsEntity.removeBySid(t.sid);case 3:return e.abrupt("return");case 4:return e.next=6,this.participantsEntity.removeByIdentity(t);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendMessage",value:function(){var e=P["default"](F["default"].mark((function e(t,n,r){var i,s;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"!==typeof t&&null!==t){e.next=5;break}return e.next=3,this.messagesEntity.send(t,n,r);case 3:return i=e.sent,e.abrupt("return",Ee(i.messageId));case 5:return e.next=7,this.messagesEntity.sendMedia(t,n,r);case 7:return s=e.sent,e.abrupt("return",Ee(s.messageId));case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"setAllMessagesRead",value:function(){var e=P["default"](F["default"].mark((function e(){var t;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._subscribeStreams();case 2:return e.next=4,this.getMessages(1);case 4:if(t=e.sent,!(t.items.length>0)){e.next=7;break}return e.abrupt("return",this.advanceLastReadMessageIndex(t.items[0].index));case 7:return e.abrupt("return",Promise.resolve(0));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setAllMessagesUnread",value:function(){var e=P["default"](F["default"].mark((function e(){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._subscribeStreams();case 2:return e.abrupt("return",this.services.readHorizon.updateLastReadMessageIndexForConversation(this.sid,null));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setUserNotificationLevel",value:function(){var e=P["default"](F["default"].mark((function e(t){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("editNotificationLevel",{channelSid:this.sid,notificationLevel:t});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"typing",value:function(){return this.services.typingIndicator.send(this.sid)}},{key:"updateAttributes",value:function(){var e=P["default"](F["default"].mark((function e(t){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("editAttributes",{channelSid:this.sid,attributes:JSON.stringify(t)});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateFriendlyName",value:function(){var e=P["default"](F["default"].mark((function e(t){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.channelState.friendlyName===t){e.next=3;break}return e.next=3,this.services.session.addCommand("editFriendlyName",{channelSid:this.sid,friendlyName:t});case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateLastReadMessageIndex",value:function(){var e=P["default"](F["default"].mark((function e(t){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._subscribeStreams();case 2:return e.abrupt("return",this.services.readHorizon.updateLastReadMessageIndexForConversation(this.sid,t));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateUniqueName",value:function(){var e=P["default"](F["default"].mark((function e(t){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.channelState.uniqueName===t){e.next=4;break}return t||(t=""),e.next=4,this.services.session.addCommand("editUniqueName",{channelSid:this.sid,uniqueName:t});case 4:return e.abrupt("return",this);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"preprocessUpdate",value:function(e,t){try{"string"===typeof e.attributes?e.attributes=JSON.parse(e.attributes):e.attributes&&JSON.stringify(e.attributes)}catch(n){St.warn("Retrieved malformed attributes from the server for conversation: "+t),e.attributes={}}try{e.dateCreated&&(e.dateCreated=new Date(e.dateCreated))}catch(n){St.warn("Retrieved malformed dateCreated from the server for conversation: "+t),delete e.dateCreated}try{e.dateUpdated&&(e.dateUpdated=new Date(e.dateUpdated))}catch(n){St.warn("Retrieved malformed dateUpdated from the server for conversation: "+t),delete e.dateUpdated}try{e.lastMessage&&e.lastMessage.timestamp&&(e.lastMessage.timestamp=new Date(e.lastMessage.timestamp))}catch(n){St.warn("Retrieved malformed lastMessage.timestamp from the server for conversation: "+t),delete e.lastMessage.timestamp}}}]),n}(Y);function Ct(e){var t=It();return function(){var n,r=N["default"](e);if(t){var i=N["default"](this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D["default"](this,n)}}function It(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}J([m.validateTypesAsync(m.nonEmptyString,["undefined","string","number","boolean","object",m.literal(null)]),K("design:type",Function),K("design:paramtypes",[String,Object]),K("design:returntype",Promise)],Ot.prototype,"add",null),J([m.validateTypesAsync(m.nonEmptyString,m.nonEmptyString,["undefined","object"]),K("design:type",Function),K("design:paramtypes",[String,String,Object]),K("design:returntype",Promise)],Ot.prototype,"addNonChatParticipant",null),J([m.validateTypesAsync(m.nonNegativeInteger),K("design:type",Function),K("design:paramtypes",[Number]),K("design:returntype",Promise)],Ot.prototype,"advanceLastReadMessageIndex",null),J([m.validateTypesAsync(["undefined",m.nonNegativeInteger],["undefined",m.nonNegativeInteger],["undefined",m.literal("backwards","forward")]),K("design:type",Function),K("design:paramtypes",[Number,Number,String]),K("design:returntype",Promise)],Ot.prototype,"getMessages",null),J([m.validateTypesAsync(m.nonEmptyString),K("design:type",Function),K("design:paramtypes",[String]),K("design:returntype",Promise)],Ot.prototype,"getParticipantBySid",null),J([m.validateTypesAsync(m.nonEmptyString),K("design:type",Function),K("design:paramtypes",[String]),K("design:returntype",Promise)],Ot.prototype,"getParticipantByIdentity",null),J([m.validateTypesAsync([m.nonEmptyString,rt]),K("design:type",Function),K("design:paramtypes",[Object]),K("design:returntype",Promise)],Ot.prototype,"removeParticipant",null),J([m.validateTypesAsync(["string",m.literal(null),m.custom((function(e){return[e instanceof FormData,"an instance of FormData"]})),m.objectSchema("media options",{contentType:m.nonEmptyString,media:m.custom((function(e){var t="string"===typeof e&&e.length>0||e instanceof Uint8Array||e instanceof ArrayBuffer;return"function"===typeof Blob&&(t=t||e instanceof Blob),[t,"a non-empty string, an instance of Buffer or an instance of Blob"]}))})],["undefined","string","number","boolean","object",m.literal(null)],["undefined",m.literal(null),m.objectSchema("email attributes",{subject:[m.nonEmptyString,"undefined"]})]),K("design:type",Function),K("design:paramtypes",[Object,Object,Object]),K("design:returntype",Promise)],Ot.prototype,"sendMessage",null),J([m.validateTypesAsync(m.literal("default","muted")),K("design:type",Function),K("design:paramtypes",[String]),K("design:returntype",Promise)],Ot.prototype,"setUserNotificationLevel",null),J([m.validateTypesAsync(["string","number","boolean","object",m.literal(null)]),K("design:type",Function),K("design:paramtypes",[Object]),K("design:returntype",Promise)],Ot.prototype,"updateAttributes",null),J([m.validateTypesAsync(["string",m.literal(null)]),K("design:type",Function),K("design:paramtypes",[String]),K("design:returntype",Promise)],Ot.prototype,"updateFriendlyName",null),J([m.validateTypesAsync([m.literal(null),m.nonNegativeInteger]),K("design:type",Function),K("design:paramtypes",[Number]),K("design:returntype",Promise)],Ot.prototype,"updateLastReadMessageIndex",null),J([m.validateTypesAsync(["string",m.literal(null)]),K("design:type",Function),K("design:paramtypes",[String]),K("design:returntype",Promise)],Ot.prototype,"updateUniqueName",null);var jt=he.scope("Conversations"),Pt=function(e){A["default"](n,e);var t=Ct(n);function n(e){var r;return U["default"](this,n),r=t.call(this),r.services=e,r.conversations=new Map,r.thumbstones=new Set,r.syncListFetched=!1,r.syncListRead=new Ge,r}return M["default"](n,[{key:"getMap",value:function(){var e=this;return this.services.session.getMyConversationsId().then((function(t){return e.services.syncClient.map({id:t,mode:"open_existing"})}))}},{key:"addConversation",value:function(){var e=P["default"](F["default"].mark((function e(t){var n,r,i,s,o,a;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="undefined"===typeof t.attributes?{}:t.attributes,e.next=3,this.services.session.addCommand("createConversation",{friendlyName:t.friendlyName,uniqueName:t.uniqueName,attributes:JSON.stringify(n)});case 3:if(r=e.sent,i="conversationSid"in r?r["conversationSid"]:null,s="conversation"in r?r["conversation"]:null,o=this.conversations.get(i),!o){e.next=11;break}return e.next=10,o._subscribe();case 10:return e.abrupt("return",o);case 11:return a=new Ot(this.services,{channel:s,entityName:null,uniqueName:null,attributes:null,createdBy:null,friendlyName:null,lastConsumedMessageIndex:null,dateCreated:null,dateUpdated:null},i),this.conversations.set(a.sid,a),this.registerForEvents(a),e.next=16,a._subscribe();case 16:return this.emit("conversationAdded",a),e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"fetchConversations",value:function(){var e=this;this.getMap().then(function(){var t=P["default"](F["default"].mark((function t(n){var r,i,s;return F["default"].wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n.on("itemAdded",(function(t){jt.debug("itemAdded: "+t.item.key),e.upsertConversation("sync",t.item.key,t.item.data)})),n.on("itemRemoved",(function(t){jt.debug("itemRemoved: "+t.key);var n=t.key;e.syncListFetched||e.thumbstones.add(n);var r=e.conversations.get(n);r&&(r&&"joined"===r.status&&(r._setStatus("notParticipating","sync"),e.emit("conversationLeft",r)),e.conversations.delete(n),e.emit("conversationRemoved",r),r.emit("removed",r))})),n.on("itemUpdated",(function(t){jt.debug("itemUpdated: "+t.item.key),e.upsertConversation("sync",t.item.key,t.item.data)})),r=[],t.next=6,e.services.syncList.getPage();case 6:i=t.sent,s=i.items,s.forEach((function(t){r.push(e.upsertConversation("synclist",t.channel_sid,t))}));case 9:if(!i.hasNextPage){t.next=16;break}return t.next=12,i.nextPage();case 12:i=t.sent,i.items.forEach((function(t){r.push(e.upsertConversation("synclist",t.channel_sid,t))})),t.next=9;break;case 16:return e.syncListRead.set(!0),t.abrupt("return",Promise.all(r));case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(){e.syncListFetched=!0,e.thumbstones.clear(),jt.debug("Conversations list fetched")})).then((function(){return e})).catch((function(t){throw"disconnected"!=e.services.syncClient.connectionState&&jt.error("Failed to get conversations list",t),jt.debug("ERROR: Failed to get conversations list",t),t}))}},{key:"_wrapPaginator",value:function(e,t){var n=this;return t(e.items).then((function(r){return{items:r,hasNextPage:e.hasNextPage,hasPrevPage:e.hasPrevPage,nextPage:function(){return e.nextPage().then((function(e){return n._wrapPaginator(e,t)}))},prevPage:function(){return e.prevPage().then((function(e){return n._wrapPaginator(e,t)}))}}}))}},{key:"getConversations",value:function(e){var t=this;return this.getMap().then((function(t){return t.getItems(e)})).then((function(e){return t._wrapPaginator(e,(function(e){return Promise.all(e.map((function(e){return t.upsertConversation("sync",e.key,e.data)})))}))}))}},{key:"getConversation",value:function(e){var t=this;return this.getMap().then((function(t){return t.getItems({key:e})})).then((function(e){return e.items.map((function(e){return t.upsertConversation("sync",e.key,e.data)}))})).then((function(e){return e.length>0?e[0]:null}))}},{key:"getConversationByUniqueName",value:function(){var e=P["default"](F["default"].mark((function e(t){var n,r,i,s,o,a;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.getSessionLinks();case 2:return n=e.sent,r=new Ie(n.myChannelsUrl).path(t).build(),e.next=6,this.services.network.get(r);case 6:return i=e.sent,s=i.body,o=s.channel_sid,a={entityName:null,lastConsumedMessageIndex:s.last_consumed_message_index,status:(null===s||void 0===s?void 0:s.status)||"unknown",friendlyName:s.friendly_name,dateUpdated:s.date_updated,dateCreated:s.date_created,uniqueName:s.unique_name,createdBy:s.created_by,attributes:s.attributes,channel:"".concat(o,".channel"),notificationLevel:null===s||void 0===s?void 0:s.notification_level,sid:o},e.abrupt("return",this.upsertConversation("sync",o,a));case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getWhisperConversation",value:function(){var e=P["default"](F["default"].mark((function e(t){var n,r,i,s,o,a,c,u;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.getSessionLinks();case 2:return i=e.sent,s=new Ie(i.publicChannelsUrl).path(t).build(),e.next=6,this.services.network.get(s);case 6:if(o=e.sent,a=o.body,"private"===a.type){e.next=10;break}return e.abrupt("return");case 10:if("string"===typeof a.state&&(c=JSON.parse(a.state)),"object"===B["default"](a.state)&&null!==a.state&&(c=a.state),"closed"!==(null===(n=c)||void 0===n||null===(r=n["state.v1"])||void 0===r?void 0:r.current)){e.next=14;break}return e.abrupt("return");case 14:return u={entityName:null,lastConsumedMessageIndex:a.last_consumed_message_index,status:(null===a||void 0===a?void 0:a.status)||"unknown",friendlyName:a.friendly_name,dateUpdated:a.date_updated,dateCreated:a.date_created,uniqueName:a.unique_name,createdBy:a.created_by,attributes:a.attributes,channel:"".concat(t,".channel"),notificationLevel:null===a||void 0===a?void 0:a.notification_level,sid:t},e.abrupt("return",this.upsertConversation("sync",t,u));case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"upsertConversation",value:function(e,t,n){var r=this;jt.trace("upsertConversation(sid="+t+", data=",n);var i=this.conversations.get(t);if(i){if(jt.trace("upsertConversation: conversation "+t+" is known and it's status is known from source "+i._statusSource()+" and update came from source "+e,i),"undefined"===typeof i._statusSource()||e===i._statusSource()||"synclist"===e&&"sync"!==i._statusSource()||"sync"===e)if("joined"===n.status&&"joined"!==i.status){i._setStatus("joined",e);var s={};"undefined"!==typeof n.notificationLevel&&(s.notificationLevel=n.notificationLevel),"undefined"!==typeof n.lastConsumedMessageIndex&&(s.lastConsumedMessageIndex=n.lastConsumedMessageIndex),Se(s,{})||i._update(s),i._subscribe().then((function(){r.emit("conversationJoined",i)}))}else"notParticipating"===n.status&&"joined"===i.status?(i._setStatus("notParticipating",e),i._update(n),i._subscribe().then((function(){r.emit("conversationLeft",i)}))):"notParticipating"===n.status?i._subscribe():i._update(n);else jt.trace("upsertConversation: conversation is known from sync and came from chat, ignoring",{sid:t,data:n.status,conversation:i.status});return i._subscribe().then((function(){return i}))}if("chat"!==e&&"synclist"!==e||!this.thumbstones.has(t))return jt.trace("upsertConversation: creating local conversation object with sid "+t,n),i=new Ot(this.services,n,t),this.conversations.set(t,i),i._subscribe().then((function(){return r.registerForEvents(i),r.emit("conversationAdded",i),"joined"===n.status&&(i._setStatus("joined",e),r.emit("conversationJoined",i)),i}));jt.trace("upsertConversation: conversation is deleted and came again from chat, ignoring",t)}},{key:"onConversationRemoved",value:function(e){var t=this.conversations.get(e);t&&(this.conversations.delete(e),this.emit("conversationRemoved",t))}},{key:"registerForEvents",value:function(e){var t=this;e.on("removed",(function(){return t.onConversationRemoved(e.sid)})),e.on("updated",(function(e){return t.emit("conversationUpdated",e)})),e.on("participantJoined",this.emit.bind(this,"participantJoined")),e.on("participantLeft",this.emit.bind(this,"participantLeft")),e.on("participantUpdated",(function(e){return t.emit("participantUpdated",e)})),e.on("messageAdded",this.emit.bind(this,"messageAdded")),e.on("messageUpdated",(function(e){return t.emit("messageUpdated",e)})),e.on("messageRemoved",this.emit.bind(this,"messageRemoved")),e.on("typingStarted",this.emit.bind(this,"typingStarted")),e.on("typingEnded",this.emit.bind(this,"typingEnded"))}}]),n}(Y);function Mt(e){var t=Rt();return function(){var n,r=N["default"](e);if(t){var i=N["default"](this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D["default"](this,n)}}function Rt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var At=function(e){A["default"](n,e);var t=Mt(n);function n(e){var r;return U["default"](this,n),r=t.call(this),r.services=e,r.fifoStack=[],r.fifoStackMaxLength=100,r.myself=new Re(null,null,r.services),r.myself.on("updated",(function(e){return r.emit("userUpdated",e)})),r.myself.on("userSubscribed",(function(){return r.emit("userSubscribed",r.myself)})),r.myself.on("userUnsubscribed",(function(){r.emit("userUnsubscribed",r.myself),r.myself._ensureFetched()})),r.services=e,r.subscribedUsers=new Map,r.userUrlPromise=r.services.session.getSessionLinks().then((function(e){return r.userUrl=e.usersUrl,r.userUrl})),r.services.session.getMaxUserInfosToSubscribe().then((function(e){r.fifoStackMaxLength=e})),r.services.session.getUsersData().then((function(e){return r.myself.identity=e.identity,r.myself.entityName=e.user,r.myself._ensureFetched()})),r}return M["default"](n,[{key:"handleUnsubscribeUser",value:function(e){this.subscribedUsers.has(e.identity)&&this.subscribedUsers.delete(e.identity);var t=-1,n=this.fifoStack.find((function(n,r){return n==e.identity&&(t=r,!0)}));n&&this.fifoStack.splice(t,1),this.emit("userUnsubscribed",e)}},{key:"handleSubscribeUser",value:function(e){this.subscribedUsers.has(e.identity)||(this.fifoStack.length>=this.fifoStackMaxLength&&this.subscribedUsers.get(this.fifoStack.shift()).unsubscribe(),this.fifoStack.push(e.identity),this.subscribedUsers.set(e.identity,e),this.emit("userSubscribed",e))}},{key:"getUser",value:function(){var e=P["default"](F["default"].mark((function e(t){var n,r,i=this,s=arguments;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:null,e.next=3,this.services.session.getUsersData();case 3:return e.next=5,this.myself._ensureFetched();case 5:if(t!=this.myself.identity){e.next=7;break}return e.abrupt("return",this.myself);case 7:if(r=this.subscribedUsers.get(t),r){e.next=19;break}if(n){e.next=13;break}return e.next=12,this.getSyncUniqueName(t);case 12:n=e.sent;case 13:return r=new Re(t,n,this.services),r.on("updated",(function(e){return i.emit("userUpdated",e)})),r.on("userSubscribed",(function(){return i.handleSubscribeUser(r)})),r.on("userUnsubscribed",(function(){return i.handleUnsubscribeUser(r)})),e.next=19,r._ensureFetched();case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSubscribedUsers",value:function(){var e=P["default"](F["default"].mark((function e(){var t;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.getUsersData();case 2:return e.next=4,this.myself._ensureFetched();case 4:return t=[this.myself],this.subscribedUsers.forEach((function(e){return t.push(e)})),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSyncUniqueName",value:function(){var e=P["default"](F["default"].mark((function e(t){var n,r;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new Ie(this.userUrl).path(t).build(),e.next=3,this.services.network.get(n);case 3:return r=e.sent,e.abrupt("return",r.body.sync_unique_name);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(Y),Dt=he.scope("TypingIndicator"),Nt=function(){function e(t,n,r){U["default"](this,e),this.config=t,this.services=n,this.getConversation=r,this.serviceTypingTimeout=null,this.sentUpdates=new Map}return M["default"](e,[{key:"typingTimeout",get:function(){return this.config.typingIndicatorTimeoutOverride||this.serviceTypingTimeout||this.config.typingIndicatorTimeoutDefault}},{key:"initialize",value:function(){var e=this;this.services.notificationClient.subscribe(Ue.TYPING_INDICATOR,"twilsock"),this.services.notificationClient.on("message",(function(t,n){t===Ue.TYPING_INDICATOR&&e.handleRemoteTyping(n)}))}},{key:"handleRemoteTyping",value:function(e){var t=this;Dt.trace("Got new typing indicator ",e),this.getConversation(e.channel_sid).then((function(n){n&&n.participants.forEach((function(n){if(n.identity===e.identity){var r=t.config.typingIndicatorTimeoutOverride+1e3||1e3*e.typing_timeout;n._startTyping(r)}}))})).catch((function(e){throw Dt.error(e),e}))}},{key:"send",value:function(e){var t=this.sentUpdates.get(e);return t&&t>Date.now()-this.typingTimeout?Promise.resolve():(this.sentUpdates.set(e,Date.now()),this._send(e))}},{key:"_send",value:function(e){var t=this;Dt.trace("Sending typing indicator");var n=this.config.typingIndicatorUri,r={"Content-Type":"application/x-www-form-urlencoded"},i="ChannelSid="+e;return this.services.transport.post(n,r,i,this.config.productId).then((function(e){e.body.hasOwnProperty("typing_timeout")&&(t.serviceTypingTimeout=1e3*e.body.typing_timeout)})).catch((function(e){throw Dt.error("Failed to send typing indicator:",e),e}))}}]),e}(),Lt=function(){function e(t){U["default"](this,e),this.services=t,this.readHorizonRequests=new Map,this.readHorizonUpdateTimer=null}return M["default"](e,[{key:"getReportInterval",value:function(){return this.services.session.getConsumptionReportInterval().then((function(e){return 1e3*e}))}},{key:"delayedSendReadHorizon",value:function(e){var t=this;null===this.readHorizonUpdateTimer&&(this.sendConsumptionReport(!0),this.readHorizonUpdateTimer=setTimeout((function(){t.sendConsumptionReport(!1)}),e))}},{key:"sendConsumptionReport",value:function(e){var t=this,n=[],r=new Map;this.readHorizonRequests.forEach((function(e,t){n.push(e.entry),r.set(t,e.promises)})),n.length>0&&this.services.session.addCommand("consumptionReportV2",{report:n}).then((function(e){return t.processConsumptionReportResponse(e,r)})).catch((function(e){return t.processConsumptionReportError(e,r)})),e||(this.readHorizonUpdateTimer=null),this.readHorizonRequests.clear()}},{key:"processConsumptionReportResponse",value:function(e,t){e&&e.report&&Array.isArray(e.report)&&e.report.length>0&&e.report.forEach((function(e){var n=e;if(t.has(n.channelSid)){var r=null;"undefined"!==typeof n.unreadMessagesCount&&null!=n.unreadMessagesCount&&(r=n.unreadMessagesCount),t.get(n.channelSid).forEach((function(e){return e.resolve(r)})),t.delete(n.channelSid)}})),this.processConsumptionReportError(new Ve("Error while setting LastReadMessageIndex",null),t)}},{key:"processConsumptionReportError",value:function(e,t){t.forEach((function(t){return t.forEach((function(t){return t.reject(e)}))}))}},{key:"updateLastReadMessageIndexForConversation",value:function(e,t){var n=this;return new Promise((function(r,i){n.addPendingConsumptionHorizonRequest(e,{channelSid:e,messageIdx:t},{resolve:r,reject:i}),n.getReportInterval().then((function(e){return n.delayedSendReadHorizon(e)}))}))}},{key:"advanceLastReadMessageIndexForConversation",value:function(e,t,n){var r=this,i=this.readHorizonRequests.get(e);return new Promise((function(s,o){i&&i.entry?i.entry.messageIdx>=t?r.addPendingConsumptionHorizonRequest(e,i.entry,{resolve:s,reject:o}):r.addPendingConsumptionHorizonRequest(e,{channelSid:e,messageIdx:t},{resolve:s,reject:o}):null!==n&&t<n?r.addPendingConsumptionHorizonRequest(e,{channelSid:e,messageIdx:n},{resolve:s,reject:o}):r.addPendingConsumptionHorizonRequest(e,{channelSid:e,messageIdx:t},{resolve:s,reject:o}),r.getReportInterval().then((function(e){return r.delayedSendReadHorizon(e)}))}))}},{key:"addPendingConsumptionHorizonRequest",value:function(e,t,n){if(this.readHorizonRequests.has(e)){var r=this.readHorizonRequests.get(e);r.entry=t,r.promises.push(n)}else this.readHorizonRequests.set(e,{entry:t,promises:[n]})}}]),e}(),Ut=function e(t){U["default"](this,e),this.title=t.title||null,this.body=t.body||null,this.sound=t.sound||null,this.badge=t.badge||null,this.action=t.action||null,this.type=t.type||null,this.data=t.data||{}};function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){L["default"](e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qt(e){var t=$t();return function(){var n,r=N["default"](e);if(t){var i=N["default"](this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D["default"](this,n)}}function $t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Wt=he.scope("Client"),zt=He,Vt=function e(){U["default"](this,e)},Gt=function(e){A["default"](n,e);var t=qt(n);function n(e,r){var i;if(U["default"](this,n),i=t.call(this),L["default"](R["default"](i),"connectionState","connecting"),L["default"](R["default"](i),"sessionPromise",null),L["default"](R["default"](i),"conversationsPromise",null),L["default"](R["default"](i),"version",zt),L["default"](R["default"](i),"parsePushNotification",n.parsePushNotification),i.options=r||{},!i.options.disableDeepClone){var s=Bt(Bt({},i.options),{},{transport:void 0,twilsockClient:void 0});s=Te(s),s.transport=i.options.transport,s.twilsockClient=i.options.twilsockClient,i.options=s}i.options.logLevel=i.options.logLevel||"silent",Wt.setLevel(i.options.logLevel);var o=i.options.productId="ip_messaging";if(i.options.clientMetadata=i.options.clientMetadata||{},i.options.clientMetadata.hasOwnProperty("type")||(i.options.clientMetadata.type="conversations"),i.options.clientMetadata.hasOwnProperty("sdk")||(i.options.clientMetadata.sdk="JS",i.options.clientMetadata.sdkv=zt),i.options.Sync=i.options.Sync||{},"undefined"===typeof i.options.Sync.enableSessionStorage&&(i.options.Sync.enableSessionStorage=!0),i.options.region&&(i.options.Sync.region=i.options.region),!e)throw new Error("A valid Twilio token should be provided");return i.services=new Vt,i.config=new ke(i.options),i.options.twilsockClient=i.options.twilsockClient||new g.Twilsock(e,o,i.options),i.options.transport=i.options.transport||i.options.twilsockClient,i.options.notificationsClient=i.options.notificationsClient||new b.Notifications(e,i.options),i.options.syncClient=i.options.syncClient||new w.SyncClient(e,i.options),i.services.syncClient=i.options.syncClient,i.services.transport=i.options.transport,i.services.twilsockClient=i.options.twilsockClient,i.services.notificationClient=i.options.notificationsClient,i.services.session=new Ze(i.services,i.config),i.sessionPromise=i.services.session.initialize(),i.services.network=new Le(i.config,i.services),i.services.users=new At({session:i.services.session,network:i.services.network,syncClient:i.services.syncClient}),i.services.users.on("userSubscribed",i.emit.bind(R["default"](i),"userSubscribed")),i.services.users.on("userUpdated",(function(e){return i.emit("userUpdated",e)})),i.services.users.on("userUnsubscribed",i.emit.bind(R["default"](i),"userUnsubscribed")),i.services.twilsockClient.on("tokenAboutToExpire",(function(e){return i.emit("tokenAboutToExpire",e)})),i.services.twilsockClient.on("tokenExpired",(function(){return i.emit("tokenExpired")})),i.services.twilsockClient.on("connectionError",(function(e){return i.emit("connectionError",e)})),i.services.readHorizon=new Lt(i.services),i.services.typingIndicator=new Nt(i.config,{transport:i.services.twilsockClient,notificationClient:i.services.notificationClient},i.getConversationBySid.bind(R["default"](i))),i.services.syncList=new qe(i.services),i.conversations=new Pt(i.services),i.conversationsPromise=i.sessionPromise.then((function(){return i.conversations.on("conversationAdded",i.emit.bind(R["default"](i),"conversationAdded")),i.conversations.on("conversationRemoved",i.emit.bind(R["default"](i),"conversationRemoved")),i.conversations.on("conversationJoined",i.emit.bind(R["default"](i),"conversationJoined")),i.conversations.on("conversationLeft",i.emit.bind(R["default"](i),"conversationLeft")),i.conversations.on("conversationUpdated",(function(e){return i.emit("conversationUpdated",e)})),i.conversations.on("participantJoined",i.emit.bind(R["default"](i),"participantJoined")),i.conversations.on("participantLeft",i.emit.bind(R["default"](i),"participantLeft")),i.conversations.on("participantUpdated",(function(e){return i.emit("participantUpdated",e)})),i.conversations.on("messageAdded",i.emit.bind(R["default"](i),"messageAdded")),i.conversations.on("messageUpdated",(function(e){return i.emit("messageUpdated",e)})),i.conversations.on("messageRemoved",i.emit.bind(R["default"](i),"messageRemoved")),i.conversations.on("typingStarted",i.emit.bind(R["default"](i),"typingStarted")),i.conversations.on("typingEnded",i.emit.bind(R["default"](i),"typingEnded")),i.conversations.fetchConversations()})).then((function(){return i.conversations})),i.services.notificationClient.on("connectionStateChanged",(function(e){var t=null;switch(e){case"connected":t="connected";break;case"denied":t="denied";break;case"disconnecting":t="disconnecting";break;case"disconnected":t="disconnected";break;default:t="connecting"}t!==i.connectionState&&(i.connectionState=t,i.emit("connectionStateChanged",i.connectionState))})),i.fpaToken=e,i}return M["default"](n,[{key:"user",get:function(){return this.services.users.myself}},{key:"reachabilityEnabled",get:function(){return this.services.session.reachabilityEnabled}},{key:"token",get:function(){return this.fpaToken}},{key:"subscribeToPushNotifications",value:function(e){var t=this,n=[];return[Ue.NEW_MESSAGE,Ue.ADDED_TO_CONVERSATION,Ue.REMOVED_FROM_CONVERSATION,Ue.TYPING_INDICATOR,Ue.CONSUMPTION_UPDATE].forEach((function(r){n.push(t.services.notificationClient.subscribe(r,e))})),Promise.all(n)}},{key:"unsubscribeFromPushNotifications",value:function(e){var t=this,n=[];return[Ue.NEW_MESSAGE,Ue.ADDED_TO_CONVERSATION,Ue.REMOVED_FROM_CONVERSATION,Ue.TYPING_INDICATOR,Ue.CONSUMPTION_UPDATE].forEach((function(r){n.push(t.services.notificationClient.unsubscribe(r,e))})),Promise.all(n)}},{key:"initialize",value:function(){var e=P["default"](F["default"].mark((function e(){var t,r,i=this;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.sessionPromise;case 2:return n.supportedPushChannels.forEach((function(e){return i.subscribeToPushNotifications(e)})),e.next=5,this.services.session.getSessionLinks();case 5:return t=e.sent,r=Object.assign(this.options),r.transport=null,this.services.mcsClient=new x.McsClient(this.fpaToken,t.mediaServiceUrl,r),e.next=11,this.services.typingIndicator.initialize();case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"shutdown",value:function(){var e=P["default"](F["default"].mark((function e(){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.services.twilsockClient.disconnect();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateToken",value:function(){var e=P["default"](F["default"].mark((function e(t){var n=this;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Wt.info("updateToken"),this.fpaToken!==t){e.next=3;break}return e.abrupt("return",this);case 3:return e.next=5,this.services.twilsockClient.updateToken(t).then((function(){return n.fpaToken=t})).then((function(){return n.services.mcsClient.updateToken(t)})).then((function(){return n.sessionPromise}));case 5:return e.abrupt("return",this);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getConversationBySid",value:function(){var e=P["default"](F["default"].mark((function e(t){var n;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.conversations.syncListRead.promise;case 2:return e.next=4,this.conversations.getConversation(t);case 4:if(n=e.sent,n){e.next=9;break}return e.next=8,this.conversations.getWhisperConversation(t);case 8:n=e.sent;case 9:if(n){e.next=11;break}throw new Error("Conversation with SID ".concat(t," is not found."));case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getConversationByUniqueName",value:function(){var e=P["default"](F["default"].mark((function e(t){var n;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.conversations.syncListRead.promise;case 2:return e.next=4,this.conversations.getConversationByUniqueName(t);case 4:if(n=e.sent,n){e.next=7;break}throw new Error("Conversation with unique name ".concat(t," is not found."));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSubscribedConversations",value:function(e){return this.conversationsPromise.then((function(t){return t.getConversations(e)}))}},{key:"createConversation",value:function(e){return e=e||{},this.conversationsPromise.then((function(t){return t.addConversation(e)}))}},{key:"setPushRegistrationId",value:function(){var e=P["default"](F["default"].mark((function e(t,n){var r=this;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.subscribeToPushNotifications(t).then((function(){return r.services.notificationClient.setPushRegistrationId(n,t)}));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"unsetPushRegistrationId",value:function(){var e=P["default"](F["default"].mark((function e(t){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(-1!==n.supportedPushChannels.indexOf(t)){e.next=2;break}throw new Error("Invalid or unsupported channelType: "+t);case 2:return e.next=4,this.unsubscribeFromPushNotifications(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handlePushNotification",value:function(){var e=P["default"](F["default"].mark((function e(t){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:Wt.debug("handlePushNotification, notificationPayload=",t),this.emit("pushNotification",n.parsePushNotification(t));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUser",value:function(e){return this.services.users.getUser(e)}},{key:"getSubscribedUsers",value:function(){var e=P["default"](F["default"].mark((function e(){return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.services.users.getSubscribedUsers());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}],[{key:"create",value:function(){var e=P["default"](F["default"].mark((function e(t,r){var i,s;return F["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=new n(t,r),s="conversations.client.startup",i.services.twilsockClient.addPartialTelemetryEvent(new O.TelemetryEventDescription(s,"Conversations client startup",new Date),s,O.TelemetryPoint.Start),e.next=5,i.initialize();case 5:return i.services.twilsockClient.addPartialTelemetryEvent(new O.TelemetryEventDescription("","",new Date),s,O.TelemetryPoint.End),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"parsePushNotificationChatData",value:function(e){var t={};for(var r in n.supportedPushDataFields)"undefined"!==typeof e[r]&&null!==e[r]&&("message_index"===r?null!==Ee(e[r])&&(t[n.supportedPushDataFields[r]]=Number(e[r])):t[n.supportedPushDataFields[r]]=e[r]);return t}},{key:"parsePushNotification",value:function(e){if(Wt.debug("parsePushNotification, notificationPayload=",e),"undefined"!==typeof e.aps){if(!e.twi_message_type)throw new Error("Provided push notification payload does not contain Programmable Chat push notification type");var t=n.parsePushNotificationChatData(e),r=e.aps,i=null,s=null;return"string"===typeof r.alert?i=r.alert||null:(i=r.alert.body||null,s=r.alert.title||null),new Ut({title:s,body:i,sound:r.sound||null,badge:r.badge||null,action:r.category||null,type:e.twi_message_type,data:t})}if("undefined"!==typeof e.data){var o=e.data;if(!o.twi_message_type)throw new Error("Provided push notification payload does not contain Programmable Chat push notification type");var a=n.parsePushNotificationChatData(e.data);return new Ut({title:o.twi_title||null,body:o.twi_body||null,sound:o.twi_sound||null,badge:null,action:o.twi_action||null,type:o.twi_message_type,data:a})}throw new Error("Provided push notification payload is not Programmable Chat notification")}}]),n}(Y);L["default"](Gt,"version",zt),L["default"](Gt,"supportedPushChannels",["fcm","apn"]),L["default"](Gt,"supportedPushDataFields",{conversation_sid:"conversationSid",message_sid:"messageSid",message_index:"messageIndex"}),J([m.validateTypesAsync(m.nonEmptyString),K("design:type",Function),K("design:paramtypes",[String]),K("design:returntype",Promise)],Gt.prototype,"updateToken",null),J([m.validateTypesAsync(m.nonEmptyString),K("design:type",Function),K("design:paramtypes",[String]),K("design:returntype",Promise)],Gt.prototype,"getConversationBySid",null),J([m.validateTypesAsync(m.nonEmptyString),K("design:type",Function),K("design:paramtypes",[String]),K("design:returntype",Promise)],Gt.prototype,"getConversationByUniqueName",null),J([m.validateTypesAsync(["undefined",m.objectSchema("conversation options",{friendlyName:["string","undefined"],isPrivate:["boolean","undefined"],uniqueName:["string","undefined"]})]),K("design:type",Function),K("design:paramtypes",[Object]),K("design:returntype",Promise)],Gt.prototype,"createConversation",null),J([m.validateTypesAsync(m.literal("fcm","apn"),"string"),K("design:type",Function),K("design:paramtypes",[String,String]),K("design:returntype",Promise)],Gt.prototype,"setPushRegistrationId",null),J([m.validateTypesAsync(m.literal("fcm","apn")),K("design:type",Function),K("design:paramtypes",[String]),K("design:returntype",Promise)],Gt.prototype,"unsetPushRegistrationId",null),J([m.validateTypesAsync(m.pureObject),K("design:type",Function),K("design:paramtypes",[Object]),K("design:returntype",Promise)],Gt.prototype,"handlePushNotification",null),J([m.validateTypesAsync(m.nonEmptyString),K("design:type",Function),K("design:paramtypes",[String]),K("design:returntype",Promise)],Gt.prototype,"getUser",null),J([m.validateTypesAsync("string",["undefined",m.pureObject]),K("design:type",Function),K("design:paramtypes",[String,Object]),K("design:returntype",Promise)],Gt,"create",null),J([m.validateTypes(m.pureObject),K("design:type",Function),K("design:paramtypes",[Object]),K("design:returntype",Ut)],Gt,"parsePushNotification",null),t.Client=Gt,t.PushNotification=Ut,t.User=Re,t.default=Gt},"99af":function(e,t,n){"use strict";var r=n("23e7"),i=n("d039"),s=n("e8b5"),o=n("861d"),a=n("7b0b"),c=n("50c4"),u=n("8418"),l=n("65f0"),d=n("1dde"),f=n("b622"),h=n("2d00"),p=f("isConcatSpreadable"),m=9007199254740991,y="Maximum allowed index exceeded",v=h>=51||!i((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),g=d("concat"),b=function(e){if(!o(e))return!1;var t=e[p];return void 0!==t?!!t:s(e)},w=!v||!g;r({target:"Array",proto:!0,forced:w},{concat:function(e){var t,n,r,i,s,o=a(this),d=l(o,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(s=-1===t?o:arguments[t],b(s)){if(i=c(s.length),f+i>m)throw TypeError(y);for(n=0;n<i;n++,f++)n in s&&u(d,f,s[n])}else{if(f>=m)throw TypeError(y);u(d,f++,s)}return d.length=f,d}})},"9a25":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("3e62");class i extends r.AbstractMessage{constructor(e){super(e),this.method="reply",this.payload_type="application/json",this.status={code:200,status:"OK"}}}t.Reply=i},"9a8c":function(e,t,n){"use strict";var r=n("ebb5"),i=n("145e"),s=r.aTypedArray,o=r.exportTypedArrayMethod;o("copyWithin",(function(e,t){return i.call(s(this),e,t,arguments.length>2?arguments[2]:void 0)}))},"9b42":function(e,t,n){function r(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0)if(s.push(r.value),t&&s.length===t)break}catch(c){a=!0,i=c}finally{try{o||null==n["return"]||n["return"]()}finally{if(a)throw i}}return s}}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),e.exports=r,e.exports["default"]=e.exports,e.exports.__esModule=!0},"9bdd":function(e,t,n){var r=n("825a"),i=n("2a62");e.exports=function(e,t,n,s){try{return s?t(r(n)[0],n[1]):t(n)}catch(o){throw i(e),o}}},"9bf2":function(e,t,n){var r=n("83ab"),i=n("0cfb"),s=n("825a"),o=n("a04b"),a=Object.defineProperty;t.f=r?a:function(e,t,n){if(s(e),t=o(t),s(n),i)try{return a(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"9c0e":function(e,t,n){"use strict";const r=n("e37a");e.exports=r},"9e8c":function(e,t,n){"use strict";
/*
@license
Copyright (c) 2021 Twilio Inc.

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.


*/Object.defineProperty(t,"__esModule",{value:!0}),n("fb6a"),n("d3b7"),n("a630"),n("3ca3"),n("a4d3"),n("e01a"),n("d28b"),n("e260"),n("ddb0");var r=n("7037");n("b0c0"),n("8ba4"),n("a9e3");var i=n("278c");n("4fad"),n("99af"),n("4ae1");var s=n("448a"),o=n("970b"),a=n("ed6d"),c=n("6b58"),u=n("36c6");function l(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}n("caad"),n("e6cf"),n("a15b");var d=l(r),f=l(i),h=l(s),p=l(o),m=l(a),y=l(c),v=l(u),g=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{checks:t}};function b(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=w(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function w(e,t){if(e){if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g((function(e){var n,r=!1,i=[],s=b(t);try{for(s.s();!(n=s.n()).done;){var o=n.value;"string"!==typeof o?(r=r||e instanceof o,i.push("an instance of ".concat(o.name))):(r=r||d["default"](e)===o,i.push("of type ".concat(o)))}}catch(a){s.e(a)}finally{s.f()}return[r,i]}))};function k(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=S(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function S(e,t){if(e){if("string"===typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g((function(e){var n,r=!1,i=[],s=k(t);try{for(s.s();!(n=s.n()).done;){var o=n.value;r=r||e===o,i.push("string"===typeof o?'"'.concat(o,'"'):"".concat(o))}}catch(a){s.e(a)}finally{s.f()}return[r,i]}))},O=g((function(e){return["string"===typeof e&&e.length>0,"a non-empty string"]})),C=g((function(e){return["number"===typeof e&&Number.isInteger(e)&&e>=0,"a non-negative integer"]})),I=g((function(e){return["object"===d["default"](e)&&null!==e&&!Array.isArray(e),"a pure object (non-null and non-array)"]}));function j(e){var t=P();return function(){var n,r=v["default"](e);if(t){var i=v["default"](this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y["default"](this,n)}}function P(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function M(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=R(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function R(e,t){if(e){if("string"===typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=function(e,t){if(t.length>e.length)throw new Error("Expected at most ".concat(e.length," argument(s), but got ").concat(t.length));while(t.length<e.length)t.push(void 0);var n,r=M(t.entries());try{for(r.s();!(n=r.n()).done;){var i=f["default"](n.value,2),s=i[0],o=i[1],a=$(e[s],o),c=f["default"](a,4),u=c[0],l=c[1],d=c[2],h=c[3];if(!u){var p=s+1;throw new Error("Argument ".concat(p," is expected to be ").concat(d).concat(h," but got ").concat(l))}}}catch(m){r.e(m)}finally{r.f()}},N=function(e){var t,n,r,i=["undefined","boolean","number","bigint","string"];(i.includes(d["default"](e))&&(n="string"===typeof e?'"'.concat(e,'"'):"".concat(e)),"object"===d["default"](e)&&"Object"!==(null===e||void 0===e||null===(t=e.constructor)||void 0===t?void 0:t.name))&&(n=null===e?"null":"instance of ".concat(null===e||void 0===e||null===(r=e.constructor)||void 0===r?void 0:r.name));return n||(n=d["default"](e)),n},L=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=B(t);return function(e){return function(e){m["default"](n,e);var t=j(n);function n(){p["default"](this,n);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return D(r,i),t.call.apply(t,[this].concat(i))}return n}(e)}},U=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=B(t);return function(e,t,n){if("function"!==typeof n.value)throw new Error("The validateTypes decorator can only be applied to methods");var i=n.value;n.value=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return D(r,t),i.apply(this,t)}}},F=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=B(t);return function(e,t,n){if("function"!==typeof n.value)throw new Error("The validateTypesAsync decorator can only be applied to methods");var i=n.value;n.value=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];try{D(r,t)}catch(s){return Promise.reject(s)}return i.apply(this,t)}}},B=function(e){var t,n=[],r=M(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(q(i))}}catch(s){r.e(s)}finally{r.f()}return n},q=function(e){var t,n=[],r=Array.isArray(e)?e:[e],i=M(r);try{for(i.s();!(t=i.n()).done;){var s=t.value;"string"!==typeof s&&"function"!==typeof s?n.push(s):n.push(_(s))}}catch(o){i.e(o)}finally{i.f()}return n},$=function(e,t){var n,r,i=[],s=!1,o=M(e);try{for(o.s();!(r=o.n()).done;){var a,c=r.value,u=M(c.checks);try{for(u.s();!(a=u.n()).done;){var l=a.value,d=l(t),p=f["default"](d,3),m=p[0],y=p[1],v=p[2];s=s||m,!n&&v&&(n=v),y&&(i=[].concat(h["default"](i),"string"===typeof y?[y]:h["default"](y)))}}catch(x){u.e(x)}finally{u.f()}}}catch(x){o.e(x)}finally{o.f()}if(s)return[!0];var g=n||N(t),b=i.length-1,w=b>0?"".concat(i.slice(0,b).join(", ")," or ").concat(i[b]):i.join(", ");return[!1,g,w,b>1?";":","]},W=function(e,t){return g((function(n){if("object"!==d["default"](n)||null===n||Array.isArray(n))return[!1,"valid ".concat(e," (should be a pure object)")];for(var r=0,i=Object.entries(t);r<i.length;r++){var s=f["default"](i[r],2),o=s[0],a=s[1],c=$(q(a),n[o]),u=f["default"](c,3),l=u[0],h=u[1],p=u[2];if(!l)return[!1,"valid ".concat(e,' (key "').concat(o,'" should be ').concat(p,")"),"malformed ".concat(e,' (key "').concat(o,'" is ').concat(h,")")]}return[!0]}))};function z(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=V(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function V(e,t){if(e){if("string"===typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H=function(e,t){return g((function(n){if(!Array.isArray(n))return[!1,"an array of ".concat(e)];var r,i=z(n.entries());try{for(i.s();!(r=i.n()).done;){var s=f["default"](r.value,2),o=s[0],a=s[1],c=$(q(t),a),u=f["default"](c,3),l=u[0],d=u[1],h=u[2];if(!l)return[!1,"a valid array of ".concat(e," (index ").concat(o," should be ").concat(h,")"),"malformed array of ".concat(e," (index ").concat(o," is ").concat(d,")")]}}catch(p){i.e(p)}finally{i.f()}return[!0]}))};t.array=H,t.custom=g,t.literal=E,t.nonEmptyString=O,t.nonNegativeInteger=C,t.objectSchema=W,t.pureObject=I,t.runtimeTypeValidation=D,t.stringifyReceivedType=N,t.type=_,t.validateConstructorTypes=L,t.validateTypes=U,t.validateTypesAsync=F},"9ed3":function(e,t,n){"use strict";var r=n("ae93").IteratorPrototype,i=n("7c73"),s=n("5c6c"),o=n("d44e"),a=n("3f8c"),c=function(){return this};e.exports=function(e,t,n){var u=t+" Iterator";return e.prototype=i(r,{next:s(1,n)}),o(e,u,!1,!0),a[u]=c,e}},"9f7f":function(e,t,n){var r=n("d039"),i=function(e,t){return RegExp(e,t)};t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},"9ff4":function(e,t,n){"use strict";(function(e){function r(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return T})),n.d(t,"d",(function(){return S})),n.d(t,"e",(function(){return Q})),n.d(t,"f",(function(){return Z})),n.d(t,"g",(function(){return re})),n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return te})),n.d(t,"j",(function(){return M})),n.d(t,"k",(function(){return X})),n.d(t,"l",(function(){return ne})),n.d(t,"m",(function(){return R})),n.d(t,"n",(function(){return L})),n.d(t,"o",(function(){return s})),n.d(t,"p",(function(){return m})),n.d(t,"q",(function(){return G})),n.d(t,"r",(function(){return A})),n.d(t,"s",(function(){return C})),n.d(t,"t",(function(){return B})),n.d(t,"u",(function(){return O})),n.d(t,"v",(function(){return V})),n.d(t,"w",(function(){return q})),n.d(t,"x",(function(){return H})),n.d(t,"y",(function(){return y})),n.d(t,"z",(function(){return D})),n.d(t,"A",(function(){return a})),n.d(t,"B",(function(){return U})),n.d(t,"C",(function(){return F})),n.d(t,"D",(function(){return g})),n.d(t,"E",(function(){return b})),n.d(t,"F",(function(){return r})),n.d(t,"G",(function(){return f})),n.d(t,"H",(function(){return c})),n.d(t,"I",(function(){return j})),n.d(t,"J",(function(){return w})),n.d(t,"K",(function(){return ee})),n.d(t,"L",(function(){return ie})),n.d(t,"M",(function(){return z}));const i="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",s=r(i);const o="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",a=r(o);function c(e){if(R(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=c(U(r)?d(r):r);if(i)for(const e in i)t[e]=i[e]}return t}if(B(e))return e}const u=/;(?![^(]*\))/g,l=/:(.+)/;function d(e){const t={};return e.split(u).forEach(e=>{if(e){const n=e.split(l);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function f(e){let t="";if(U(e))t=e;else if(R(e))for(let n=0;n<e.length;n++){const r=f(e[n]);r&&(t+=r+" ")}else if(B(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const h="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",p="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",m=r(h),y=r(p);function v(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=g(e[r],t[r]);return n}function g(e,t){if(e===t)return!0;let n=N(e),r=N(t);if(n||r)return!(!n||!r)&&e.getTime()===t.getTime();if(n=R(e),r=R(t),n||r)return!(!n||!r)&&v(e,t);if(n=B(e),r=B(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,s=Object.keys(t).length;if(i!==s)return!1;for(const n in e){const r=e.hasOwnProperty(n),i=t.hasOwnProperty(n);if(r&&!i||!r&&i||!g(e[n],t[n]))return!1}}return String(e)===String(t)}function b(e,t){return e.findIndex(e=>g(e,t))}const w=e=>null==e?"":B(e)?JSON.stringify(e,x,2):String(e),x=(e,t)=>A(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,n])=>(e[t+" =>"]=n,e),{})}:D(t)?{[`Set(${t.size})`]:[...t.values()]}:!B(t)||R(t)||V(t)?t:String(t),_={},k=[],S=()=>{},T=()=>!1,E=/^on[^a-z]/,O=e=>E.test(e),C=e=>e.startsWith("onUpdate:"),I=Object.assign,j=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},P=Object.prototype.hasOwnProperty,M=(e,t)=>P.call(e,t),R=Array.isArray,A=e=>"[object Map]"===W(e),D=e=>"[object Set]"===W(e),N=e=>e instanceof Date,L=e=>"function"===typeof e,U=e=>"string"===typeof e,F=e=>"symbol"===typeof e,B=e=>null!==e&&"object"===typeof e,q=e=>B(e)&&L(e.then)&&L(e.catch),$=Object.prototype.toString,W=e=>$.call(e),z=e=>W(e).slice(8,-1),V=e=>"[object Object]"===W(e),G=e=>U(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,H=r(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),J=e=>{const t=Object.create(null);return n=>{const r=t[n];return r||(t[n]=e(n))}},K=/-(\w)/g,Q=J(e=>e.replace(K,(e,t)=>t?t.toUpperCase():"")),Y=/\B([A-Z])/g,X=J(e=>e.replace(Y,"-$1").toLowerCase()),Z=J(e=>e.charAt(0).toUpperCase()+e.slice(1)),ee=J(e=>e?"on"+Z(e):""),te=(e,t)=>e!==t&&(e===e||t===t),ne=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},re=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},ie=e=>{const t=parseFloat(e);return isNaN(t)?e:t}}).call(this,n("c8ba"))},a04b:function(e,t,n){var r=n("c04e"),i=n("d9b5");e.exports=function(e){var t=r(e,"string");return i(t)?t:String(t)}},a078:function(e,t,n){var r=n("7b0b"),i=n("50c4"),s=n("35a1"),o=n("e95a"),a=n("0366"),c=n("ebb5").aTypedArrayConstructor;e.exports=function(e){var t,n,u,l,d,f,h=r(e),p=arguments.length,m=p>1?arguments[1]:void 0,y=void 0!==m,v=s(h);if(void 0!=v&&!o(v)){d=v.call(h),f=d.next,h=[];while(!(l=f.call(d)).done)h.push(l.value)}for(y&&p>2&&(m=a(m,arguments[2],2)),n=i(h.length),u=new(c(this))(n),t=0;n>t;t++)u[t]=y?m(h[t],t):h[t];return u}},a128:function(e,t,n){n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0");var r=n("36c6"),i=n("4a4b"),s=n("c5f7"),o=n("b17c");function a(t){var n="function"===typeof Map?new Map:void 0;return e.exports=a=function(e){if(null===e||!s(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports["default"]=e.exports,e.exports.__esModule=!0,a(t)}e.exports=a,e.exports["default"]=e.exports,e.exports.__esModule=!0},a149:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("3f22"),i=n("20c9"),s=n("3da9"),o=n("0546"),a=n("a1a5"),c=n("3c45");class u extends o.SyncEntity{constructor(e,t,n){super(e,n),this.isDeleted=!1;const r=(e,t)=>"number"===typeof t.ttl?{ttl:t.ttl}:e;this.updateMergingQueue=new a.MergingQueue(r),this.descriptor=t,this.descriptor.data=this.descriptor.data||{},this.descriptor.date_updated=new Date(this.descriptor.date_updated)}get uri(){return this.descriptor.url}get revision(){return this.descriptor.revision}get lastEventId(){return this.descriptor.last_event_id}get dateExpires(){return this.descriptor.date_expires}static get type(){return"document"}get type(){return"document"}get indexName(){}get queryString(){}get sid(){return this.descriptor.sid}get data(){return this.descriptor.data}get dateUpdated(){return this.descriptor.date_updated}get uniqueName(){return this.descriptor.unique_name||null}_update(e){switch(e.date_created=new Date(e.date_created),e.type){case"document_updated":if(e.id<=this.lastEventId){s.default.trace("Document update skipped, current:",this.lastEventId,", remote:",e.id);break}const t=void 0!==this.descriptor.data?i.deepClone(this.descriptor.data):null;this.descriptor.last_event_id=e.id,this.descriptor.revision=e.document_revision,this.descriptor.date_updated=e.date_created,this.descriptor.data=e.document_data,this.broadcastEventToListeners("updated",{data:e.document_data,isLocal:!1,previousData:t}),this.services.storage.update(this.type,this.sid,this.uniqueName,{last_event_id:e.id,revision:e.document_revision,date_updated:e.date_created,data:e.document_data});break;case"document_removed":this.onRemoved(!1);break}}async set(e,t){const n=t||{};return i.validateOptionalTtl(n.ttl),this.updateMergingQueue.squashAndAdd(n,t=>this._setUnconditionally(e,t.ttl))}async mutate(e,t){const n=t||{};return i.validateOptionalTtl(n.ttl),this.updateMergingQueue.add(n,t=>this._setWithIfMatch(e,t.ttl))}async update(e,t){return this.mutate(t=>Object.assign(t,e),t)}async setTtl(e){i.validateMandatoryTtl(e);const t=await this._postUpdateToServer({ttl:e});this.descriptor.date_expires=t.date_expires}async _setUnconditionally(e,t){let n=await this._postUpdateToServer({data:e,revision:void 0,ttl:t});return this._handleSuccessfulUpdateResult(n),this.descriptor.data}async _setWithIfMatch(e,t){let n=e(i.deepClone(this.descriptor.data));if(!n)return this.descriptor.data;{let i=this.revision;try{let e=await this._postUpdateToServer({data:n,revision:i,ttl:t});return this._handleSuccessfulUpdateResult(e),this.descriptor.data}catch(r){if(412===r.status)return await this._softSync(),this._setWithIfMatch(e);throw r}}}_handleSuccessfulUpdateResult(e){if(e.last_event_id<=this.descriptor.last_event_id)return;const t=void 0!==this.descriptor.data?i.deepClone(this.descriptor.data):null;this.descriptor.revision=e.revision,this.descriptor.data=e.data,this.descriptor.last_event_id=e.last_event_id,this.descriptor.date_expires=e.date_expires,this.descriptor.date_updated=new Date(e.date_updated),this.services.storage.update(this.type,this.sid,this.uniqueName,{last_event_id:e.last_event_id,revision:e.revision,date_updated:e.date_updated,data:e.data}),this.broadcastEventToListeners("updated",{data:this.descriptor.data,isLocal:!0,previousData:t})}async _postUpdateToServer(e){if(this.isDeleted)return Promise.reject(new r.SyncError("The Document has been removed",404,54100));{const n={data:e.data};void 0!==e.ttl&&(n.ttl=e.ttl);const r=e.revision;try{const t=await this.services.network.post(this.uri,n,r);return{revision:t.body.revision,data:e.data,last_event_id:t.body.last_event_id,date_updated:t.body.date_updated,date_expires:t.body.date_expires}}catch(t){throw 404===t.status&&this.onRemoved(!1),t}}}async _softSync(){return this.services.network.get(this.uri).then(e=>{const t={type:"document_updated",id:e.body.last_event_id,document_revision:e.body.revision,document_data:e.body.data,date_created:e.body.date_updated};return this._update(t),this}).catch(e=>{404===e.status?this.onRemoved(!1):s.default.error(`Can't get updates for ${this.sid}:`,e)})}onRemoved(e){if(this.isDeleted)return;const t=void 0!==this.descriptor.data?i.deepClone(this.descriptor.data):null;this.isDeleted=!0,this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:e,previousData:t})}async removeDocument(){if(this.isDeleted)return Promise.reject(new r.SyncError("The Document has been removed",404,54100));await this.services.network.delete(this.uri),this.onRemoved(!0)}}t.SyncDocumentImpl=u;class l extends c.default{constructor(e){super(),this.syncDocumentImpl=e,this.syncDocumentImpl.attach(this)}get uri(){return this.syncDocumentImpl.uri}get revision(){return this.syncDocumentImpl.revision}get lastEventId(){return this.syncDocumentImpl.lastEventId}get dateExpires(){return this.syncDocumentImpl.dateExpires}static get type(){return u.type}get type(){return u.type}get sid(){return this.syncDocumentImpl.sid}get data(){return this.syncDocumentImpl.data}get dateUpdated(){return this.syncDocumentImpl.dateUpdated}get uniqueName(){return this.syncDocumentImpl.uniqueName}async set(e,t){return this.ensureNotClosed(),this.syncDocumentImpl.set(e,t)}async mutate(e,t){return this.ensureNotClosed(),this.syncDocumentImpl.mutate(e,t)}async update(e,t){return this.ensureNotClosed(),this.syncDocumentImpl.update(e,t)}async setTtl(e){return this.ensureNotClosed(),this.syncDocumentImpl.setTtl(e)}async removeDocument(){return this.ensureNotClosed(),this.syncDocumentImpl.removeDocument()}close(){super.close(),this.syncDocumentImpl.detach(this.listenerUuid)}}t.SyncDocument=l,t.default=l},a15b:function(e,t,n){"use strict";var r=n("23e7"),i=n("44ad"),s=n("fc6a"),o=n("a640"),a=[].join,c=i!=Object,u=o("join",",");r({target:"Array",proto:!0,forced:c||!u},{join:function(e){return a.call(s(this),void 0===e?",":e)}})},a1a5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.queuedRequests=[],this.isRequestInFlight=!1,this.inputMergingFunction=e}add(e,t){let n=new Promise((n,r)=>this.queuedRequests.push({input:e,requestFunction:t,resolve:n,reject:r}));return this.wakeupQueue(),n}squashAndAdd(e,t){let n,r=this.queuedRequests;this.queuedRequests=[],r.length>0?(n=r.map(e=>e.input).reduce(this.inputMergingFunction),n=this.inputMergingFunction(n,e)):n=e;let i=this.add(n,t);return r.forEach(e=>i.then(e.resolve,e.reject)),i}isEmpty(){return 0===this.queuedRequests.length&&!this.isRequestInFlight}wakeupQueue(){if(0!==this.queuedRequests.length&&!this.isRequestInFlight){let e=this.queuedRequests.shift();this.isRequestInFlight=!0,e.requestFunction(e.input).then(e.resolve,e.reject).then(e=>{this.isRequestInFlight=!1,this.wakeupQueue()})}}}t.MergingQueue=r;class i{constructor(e){this.queueByNamespaceKey=new Map,this.inputReducer=e}async add(e,t,n){return this.invokeQueueMethod(e,e=>e.add(t,n))}async squashAndAdd(e,t,n){return this.invokeQueueMethod(e,e=>e.squashAndAdd(t,n))}async invokeQueueMethod(e,t){this.queueByNamespaceKey.has(e)||this.queueByNamespaceKey.set(e,new r(this.inputReducer));const n=this.queueByNamespaceKey.get(e),i=t(n);return this.queueByNamespaceKey.get(e).isEmpty()&&this.queueByNamespaceKey.delete(e),i}}t.NamespacedMergingQueue=i},a2f2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("6ab6");class i extends r.TwilsockError{constructor(e){super(e)}}t.TransportUnavailableError=i},a34a:function(e,t,n){e.exports=n("96cf")},a434:function(e,t,n){"use strict";var r=n("23e7"),i=n("23cb"),s=n("a691"),o=n("50c4"),a=n("7b0b"),c=n("65f0"),u=n("8418"),l=n("1dde"),d=l("splice"),f=Math.max,h=Math.min,p=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d},{splice:function(e,t){var n,r,l,d,y,v,g=a(this),b=o(g.length),w=i(e,b),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=b-w):(n=x-2,r=h(f(s(t),0),b-w)),b+n-r>p)throw TypeError(m);for(l=c(g,r),d=0;d<r;d++)y=w+d,y in g&&u(l,d,g[y]);if(l.length=r,n<r){for(d=w;d<b-r;d++)y=d+r,v=d+n,y in g?g[v]=g[y]:delete g[v];for(d=b;d>b-r+n;d--)delete g[d-1]}else if(n>r)for(d=b-r;d>w;d--)y=d+r-1,v=d+n-1,y in g?g[v]=g[y]:delete g[v];for(d=0;d<n;d++)g[d+w]=arguments[d+2];return g.length=b-r+n,l}})},a4b4:function(e,t,n){var r=n("342f");e.exports=/web0s(?!.*chrome)/i.test(r)},a4d3:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),s=n("d066"),o=n("c430"),a=n("83ab"),c=n("4930"),u=n("d039"),l=n("5135"),d=n("e8b5"),f=n("861d"),h=n("d9b5"),p=n("825a"),m=n("7b0b"),y=n("fc6a"),v=n("a04b"),g=n("577e"),b=n("5c6c"),w=n("7c73"),x=n("df75"),_=n("241c"),k=n("057f"),S=n("7418"),T=n("06cf"),E=n("9bf2"),O=n("d1e7"),C=n("9112"),I=n("6eeb"),j=n("5692"),P=n("f772"),M=n("d012"),R=n("90e3"),A=n("b622"),D=n("e538"),N=n("746f"),L=n("d44e"),U=n("69f3"),F=n("b727").forEach,B=P("hidden"),q="Symbol",$="prototype",W=A("toPrimitive"),z=U.set,V=U.getterFor(q),G=Object[$],H=i.Symbol,J=s("JSON","stringify"),K=T.f,Q=E.f,Y=k.f,X=O.f,Z=j("symbols"),ee=j("op-symbols"),te=j("string-to-symbol-registry"),ne=j("symbol-to-string-registry"),re=j("wks"),ie=i.QObject,se=!ie||!ie[$]||!ie[$].findChild,oe=a&&u((function(){return 7!=w(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=K(G,t);r&&delete G[t],Q(e,t,n),r&&e!==G&&Q(G,t,r)}:Q,ae=function(e,t){var n=Z[e]=w(H[$]);return z(n,{type:q,tag:e,description:t}),a||(n.description=t),n},ce=function(e,t,n){e===G&&ce(ee,t,n),p(e);var r=v(t);return p(n),l(Z,r)?(n.enumerable?(l(e,B)&&e[B][r]&&(e[B][r]=!1),n=w(n,{enumerable:b(0,!1)})):(l(e,B)||Q(e,B,b(1,{})),e[B][r]=!0),oe(e,r,n)):Q(e,r,n)},ue=function(e,t){p(e);var n=y(t),r=x(n).concat(pe(n));return F(r,(function(t){a&&!de.call(n,t)||ce(e,t,n[t])})),e},le=function(e,t){return void 0===t?w(e):ue(w(e),t)},de=function(e){var t=v(e),n=X.call(this,t);return!(this===G&&l(Z,t)&&!l(ee,t))&&(!(n||!l(this,t)||!l(Z,t)||l(this,B)&&this[B][t])||n)},fe=function(e,t){var n=y(e),r=v(t);if(n!==G||!l(Z,r)||l(ee,r)){var i=K(n,r);return!i||!l(Z,r)||l(n,B)&&n[B][r]||(i.enumerable=!0),i}},he=function(e){var t=Y(y(e)),n=[];return F(t,(function(e){l(Z,e)||l(M,e)||n.push(e)})),n},pe=function(e){var t=e===G,n=Y(t?ee:y(e)),r=[];return F(n,(function(e){!l(Z,e)||t&&!l(G,e)||r.push(Z[e])})),r};if(c||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?g(arguments[0]):void 0,t=R(e),n=function(e){this===G&&n.call(ee,e),l(this,B)&&l(this[B],t)&&(this[B][t]=!1),oe(this,t,b(1,e))};return a&&se&&oe(G,t,{configurable:!0,set:n}),ae(t,e)},I(H[$],"toString",(function(){return V(this).tag})),I(H,"withoutSetter",(function(e){return ae(R(e),e)})),O.f=de,E.f=ce,T.f=fe,_.f=k.f=he,S.f=pe,D.f=function(e){return ae(A(e),e)},a&&(Q(H[$],"description",{configurable:!0,get:function(){return V(this).description}}),o||I(G,"propertyIsEnumerable",de,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:H}),F(x(re),(function(e){N(e)})),r({target:q,stat:!0,forced:!c},{for:function(e){var t=g(e);if(l(te,t))return te[t];var n=H(t);return te[t]=n,ne[n]=t,n},keyFor:function(e){if(!h(e))throw TypeError(e+" is not a symbol");if(l(ne,e))return ne[e]},useSetter:function(){se=!0},useSimple:function(){se=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!a},{create:le,defineProperty:ce,defineProperties:ue,getOwnPropertyDescriptor:fe}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:he,getOwnPropertySymbols:pe}),r({target:"Object",stat:!0,forced:u((function(){S.f(1)}))},{getOwnPropertySymbols:function(e){return S.f(m(e))}}),J){var me=!c||u((function(){var e=H();return"[null]"!=J([e])||"{}"!=J({a:e})||"{}"!=J(Object(e))}));r({target:"JSON",stat:!0,forced:me},{stringify:function(e,t,n){var r,i=[e],s=1;while(arguments.length>s)i.push(arguments[s++]);if(r=t,(f(t)||void 0!==e)&&!h(e))return d(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!h(t))return t}),i[1]=t,J.apply(null,i)}})}H[$][W]||C(H[$],W,H[$].valueOf),L(H,q),M[B]=!0},a630:function(e,t,n){var r=n("23e7"),i=n("4df4"),s=n("1c7e"),o=!s((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:o},{from:i})},a63b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Registrar=void 0;const r=n("faa1"),i=n("bc57"),s=n("02a0");class o extends r.EventEmitter{constructor(e,t,n,r){super(),this.config=r,this.connectors=new Map;const o=this.detectPlatform();this.connectors.set("gcm",new i.RegistrarConnector("gcm",{protocolVersion:3,productId:e,platform:o},t,r)),this.connectors.set("fcm",new i.RegistrarConnector("fcm",{protocolVersion:3,productId:e,platform:o},t,r)),this.connectors.set("apn",new i.RegistrarConnector("apn",{protocolVersion:4,productId:e,platform:o},t,r)),this.connectors.set("twilsock",new s.TwilsockConnector({productId:e,platform:o},n,r)),this.connectors.get("twilsock").on("transportReady",e=>this.emit("transportReady",e))}setNotificationId(e,t){this.connector(e).setNotificationId(t)}subscribe(e,t){return this.connector(t).subscribe(e)}unsubscribe(e,t){return this.connector(t).unsubscribe(e)}updateToken(e){this.connectors.forEach(t=>t.updateToken(e))}connector(e){let t=this.connectors.get(e);if(!t)throw new Error("Unknown channel type: "+e);return t}detectPlatform(){let e="";return"undefined"!==typeof navigator?(e="unknown","undefined"!==typeof navigator.product&&(e=navigator.product),"undefined"!==typeof navigator.userAgent&&(e=navigator.userAgent)):e="web",e.substring(0,128)}}t.Registrar=o},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},a691:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},a79d:function(e,t,n){"use strict";var r=n("23e7"),i=n("c430"),s=n("fea9"),o=n("d039"),a=n("d066"),c=n("4840"),u=n("cdf9"),l=n("6eeb"),d=!!s&&o((function(){s.prototype["finally"].call({then:function(){}},(function(){}))}));if(r({target:"Promise",proto:!0,real:!0,forced:d},{finally:function(e){var t=c(this,a("Promise")),n="function"==typeof e;return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}}),!i&&"function"==typeof s){var f=a("Promise").prototype["finally"];s.prototype["finally"]!==f&&l(s.prototype,"finally",f,{unsafe:!0})}},a850:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("319d"),i=n("6ab6"),s=n("bc30"),o=n("6e57"),a=n("a2f2"),c=2e4;function u(e){return e>=200&&e<300}function l(e){return e&&e.header&&e.header.http_status}function d(e){const t=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);if(t){let e={protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7],params:null};if(e.search.length>0){let t=e.search.substring(1);e.params=t.split("&").map(e=>e.split("=")).reduce((e,t)=>(e.hasOwnProperty(t[0])?Array.isArray(e[t[0]])?e[t[0]].push(t[1]):e[t[0]]=[e[t[0]],t[1]]:e[t[0]]=t[1],e),{})}return e}throw new i.TwilsockError("Incorrect URI: "+e)}function f(e,t){const n=d(t);let r={method:e,host:n.host,path:n.pathname};return n.params&&(r.params=n.params),r}function h(e,t,n,r,i){return{to:f(e,t),headers:n,body:r,grant:i}}class p{constructor(e,t,n){this.config=n,this.transport=e,this.pendingMessages=[],this.twilsock=t}saveMessage(e){return new Promise((t,n)=>{let s={message:e,resolve:t,reject:n,alreadyRejected:!1,timeout:setTimeout(()=>{r.log.debug("request is timed out"),n(new i.TwilsockError(`request '${e.to.method}' to '${e.to.host}' timed out`)),s.alreadyRejected=!0},c)};this.pendingMessages.push(s)})}sendPendingMessages(){while(this.pendingMessages.length){let t=this.pendingMessages[0];if(!t.alreadyRejected)try{let e=t.message;this.actualSend(e).then(e=>t.resolve(e)).catch(e=>t.reject(e)),clearTimeout(t.timeout)}catch(e){r.log.debug("Failed to send pending message",e);break}this.pendingMessages.splice(0,1)}}rejectPendingMessages(){this.pendingMessages.forEach(e=>{e.reject(new a.TransportUnavailableError("Unable to connect: "+this.twilsock.getTerminationReason)),clearTimeout(e.timeout)}),this.pendingMessages.splice(0,this.pendingMessages.length)}async actualSend(e){let t=e.to,n=e.headers,r=e.body,i=e.grant?e.grant:this.config.activeGrant,a={host:t.host,path:t.path,method:t.method,params:t.params,headers:n},c=new o.Message(i,n["Content-Type"]||"application/json",a),d=await this.transport.sendWithReply(c,r);if(l(d)&&!u(d.header.http_status.code))throw new s.TwilsockUpstreamError(d.header.http_status.code,d.header.http_status.status,d.body);return{status:d.header.http_status,headers:d.header.http_headers,body:d.body}}send(e,t,n={},r,i){if(this.twilsock.isTerminalState)return Promise.reject(new a.TransportUnavailableError("Unable to connect: "+this.twilsock.getTerminationReason));let s=h(e,t,n,r,i);return this.twilsock.isConnected?this.actualSend(s):this.saveMessage(s)}}t.Upstream=p},a975:function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").every,s=r.aTypedArray,o=r.exportTypedArrayMethod;o("every",(function(e){return i(s(this),e,arguments.length>1?arguments[1]:void 0)}))},a981:function(e,t){e.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},a9e3:function(e,t,n){"use strict";var r=n("83ab"),i=n("da84"),s=n("94ca"),o=n("6eeb"),a=n("5135"),c=n("c6b6"),u=n("7156"),l=n("d9b5"),d=n("c04e"),f=n("d039"),h=n("7c73"),p=n("241c").f,m=n("06cf").f,y=n("9bf2").f,v=n("58a8").trim,g="Number",b=i[g],w=b.prototype,x=c(h(w))==g,_=function(e){if(l(e))throw TypeError("Cannot convert a Symbol value to a number");var t,n,r,i,s,o,a,c,u=d(e,"number");if("string"==typeof u&&u.length>2)if(u=v(u),t=u.charCodeAt(0),43===t||45===t){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(s=u.slice(2),o=s.length,a=0;a<o;a++)if(c=s.charCodeAt(a),c<48||c>i)return NaN;return parseInt(s,r)}return+u};if(s(g,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var k,S=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof S&&(x?f((function(){w.valueOf.call(n)})):c(n)!=g)?u(new b(_(t)),n,S):_(t)},T=r?p(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),E=0;T.length>E;E++)a(b,k=T[E])&&!a(S,k)&&y(S,k,m(b,k));S.prototype=w,w.constructor=S,o(i,g,S)}},ab34:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=1e3,i=4e3,s=3,o=!0;class a{constructor(e,t,n){let r=n.MCS||n||{};this.region=r.region||n.region,this.baseUrl=("undefined"===typeof this.region?"https://mcs.us1.twilio.com":`https://mcs.${this.region}.twilio.com`)+t,this.token=e,this.retryWhenThrottledOverride=r.retryWhenThrottledOverride,this.backoffConfigOverride=r.backoffConfigOverride}static get backoffConfigDefault(){return{min:r,max:i,maxAttemptsCount:s}}static get retryWhenThrottledDefault(){return o}updateToken(e){this.token=e}}t.Configuration=a},ac1f:function(e,t,n){"use strict";var r=n("23e7"),i=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},addb:function(e,t){var n=Math.floor,r=function(e,t){var o=e.length,a=n(o/2);return o<8?i(e,t):s(r(e.slice(0,a),t),r(e.slice(a),t),t)},i=function(e,t){var n,r,i=e.length,s=1;while(s<i){r=s,n=e[s];while(r&&t(e[r-1],n)>0)e[r]=e[--r];r!==s++&&(e[r]=n)}return e},s=function(e,t,n){var r=e.length,i=t.length,s=0,o=0,a=[];while(s<r||o<i)s<r&&o<i?a.push(n(e[s],t[o])<=0?e[s++]:t[o++]):a.push(s<r?e[s++]:t[o++]);return a};e.exports=r},ae93:function(e,t,n){"use strict";var r,i,s,o=n("d039"),a=n("e163"),c=n("9112"),u=n("5135"),l=n("b622"),d=n("c430"),f=l("iterator"),h=!1,p=function(){return this};[].keys&&(s=[].keys(),"next"in s?(i=a(a(s)),i!==Object.prototype&&(r=i)):h=!0);var m=void 0==r||o((function(){var e={};return r[f].call(e)!==e}));m&&(r={}),d&&!m||u(r,f)||c(r,f,p),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},afe4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("9756"),i=n("3f22"),s=n("3da9"),o=n("914c");class a{constructor(e){this.localObject=e,this.pendingCorrelationId=null,this.pendingAction=null,this.established=!1,this.retryCount=0}get sid(){return this.localObject.sid}get type(){return this.localObject.type}get lastEventId(){return this.localObject.lastEventId}get indexName(){return this.localObject.indexName}get queryString(){return this.localObject.queryString}get isEstablished(){return this.established}update(e,t){this.localObject._update(e,t)}updatePending(e,t){this.pendingAction=e,this.pendingCorrelationId=t}reset(){this.updatePending(null,null),this.retryCount=0,this.established=!1,this.setSubscriptionState("none")}markAsFailed(e){this.rejectedWithError=e.error,this.updatePending(null,null),this.localObject.reportFailure(new i.SyncError("Failed to subscribe on service events: "+e.error.message,e.error.status,e.error.code))}complete(e){this.updatePending(null,null),this.established=!0,this.localObject._advanceLastEventId(e)}setSubscriptionState(e){this.localObject._setSubscriptionState(e)}}class c{constructor(e){this.isConnected=!1,this.maxBatchSize=100,this.subscriptionTtlTimer=null,this.pendingPokeReason=null,this.services=e,this.subscriptions=new Map,this.persisted=new Map,this.latestPokeResponseArrivalTimestampByCorrelationId=new Map;const t={randomisationFactor:.2,initialDelay:100,maxDelay:12e4};this.backoff=r.Backoff.exponential(Object.assign(t,this.services.config.backoffConfig)),this.backoff.on("ready",()=>{let{action:e,subscriptions:t}=this.getSubscriptionUpdateBatch();e?this.applyNewSubscriptionUpdateBatch(e,t):(this.backoff.reset(),s.default.debug("All subscriptions resolved."))})}getSubscriptionUpdateBatch(){function e(e,t,n,r){let i=[];for(let[s,o]of e){const e=t.get(s);if(!e&&n!==o.pendingAction&&!o.rejectedWithError&&(i.push(o),r&&i.length>=r))break}return i}let t=e(this.subscriptions,this.persisted,"establish",this.maxBatchSize);if(t.length>0)return{action:"establish",subscriptions:t};let n=e(this.persisted,this.subscriptions,"cancel",this.maxBatchSize);return n.length>0?{action:"cancel",subscriptions:n}:{action:null,subscriptions:null}}persist(){this.backoff.backoff()}async applyNewSubscriptionUpdateBatch(e,t){if(!this.isConnected)return s.default.debug("Twilsock connection (required for subscription) not ready; waiting…"),void this.backoff.reset();t=this.processLocalActions(e,t);const n=(new Date).getTime();for(const s of t)this.recordActionAttemptOn(s,e,n);let r=this.pendingPokeReason;this.pendingPokeReason=null;try{let i=await this.request(e,n,r,t),o=i.body.max_batch_size;if(!isNaN(parseInt(o))&&isFinite(o)&&o>0&&(this.maxBatchSize=o),!this.subscriptionTtlTimer){let e=i.body.ttl_in_s,t=!isNaN(parseFloat(e))&&isFinite(e),n=t&&e>0;n&&(this.subscriptionTtlTimer=setTimeout(()=>this.onSubscriptionTtlElapsed(),1e3*e))}if("establish"===e){const e=i.body.estimated_delivery_in_ms;let r=!isNaN(parseFloat(e))&&isFinite(e),o=r&&e>0;o?setTimeout(()=>this.verifyPokeDelivery(n,e,t),e):s.default.error("Invalid timeout: "+e),t.filter(e=>e.pendingCorrelationId===n).forEach(e=>e.setSubscriptionState("response_in_flight"))}this.backoff.reset()}catch(i){for(const n of t)this.recordActionFailureOn(n,e);i instanceof o.TransportUnavailableError?(s.default.debug(`Twilsock connection (required for subscription) not ready (c:${n}); waiting…`),this.backoff.reset()):(s.default.debug(`Failed an attempt to ${e} subscriptions (c:${n}); retrying`,i),this.persist())}}verifyPokeDelivery(e,t,n){const r=this.latestPokeResponseArrivalTimestampByCorrelationId.get(e),i=r?(new Date).getTime()-r:t;if(i>=t)n.filter(t=>t.pendingCorrelationId===e).forEach(e=>{e.updatePending(null,null),e.retryCount++,this.persisted.delete(e.sid)}),this.persist(),this.latestPokeResponseArrivalTimestampByCorrelationId.delete(e);else{const r=t-i;setTimeout(()=>this.verifyPokeDelivery(e,t,n),r)}}processLocalActions(e,t){return"cancel"===e?t.filter(e=>!e.rejectedWithError):t}recordActionAttemptOn(e,t,n){if(e.setSubscriptionState("request_in_flight"),"establish"===t)this.persisted.set(e.sid,e),e.updatePending(t,n);else{let r=this.persisted.get(e.sid);r&&r.updatePending(t,n)}}recordActionFailureOn(e,t){e.setSubscriptionState("none"),e.updatePending(null,null),"establish"===t&&this.persisted.delete(e.sid)}request(e,t,n,r){let i=r.map(t=>({object_sid:t.sid,object_type:t.type,last_event_id:"establish"===e?t.lastEventId:void 0,index_name:"establish"===e?t.indexName:void 0,query_string:"establish"===e?t.queryString:void 0})),o=r.filter(e=>e.retryCount>0).length;s.default.debug(`Attempting '${e}' request (c:${t}):`,i);const a={event_protocol_version:3,action:e,correlation_id:t,retried_requests:o,ttl_in_s:-1,requests:i};return"ttl"===n&&(a.reason=n),this.services.network.post(this.services.config.subscriptionsUri,a)}add(e,t){s.default.debug("Establishing intent to subscribe to "+e);const n=this.subscriptions.get(e);n&&t&&n.lastEventId===t.lastEventId||(this.persisted.delete(e),this.subscriptions.set(e,new a(t)),this.persist())}remove(e){s.default.debug("Establishing intent to unsubscribe from "+e);const t=this.subscriptions.delete(e);t&&this.persist()}acceptMessage(e,t){let n;switch(s.default.trace("Subscriptions received",e),e.correlation_id&&this.latestPokeResponseArrivalTimestampByCorrelationId.set(e.correlation_id,(new Date).getTime()),e.event_type){case"subscription_established":this.applySubscriptionEstablishedMessage(e.event,e.correlation_id);break;case"subscription_canceled":this.applySubscriptionCancelledMessage(e.event,e.correlation_id);break;case"subscription_failed":this.applySubscriptionFailedMessage(e.event,e.correlation_id);break;case(n=e.event_type.match(/^(?:map|list|document|stream|live_query)_/)||{}).input:{let r;switch(n[0]){case"map_":r=e.event.map_sid;break;case"list_":r=e.event.list_sid;break;case"document_":r=e.event.document_sid;break;case"stream_":r=e.event.stream_sid;break;case"live_query_":r=e.event.query_id,t=!1,!0===e.strictly_ordered&&(t=!0);break;default:r=void 0}this.applyEventToSubscribedEntity(r,e,t)}break;default:s.default.debug("Dropping unknown message type "+e.event_type);break}}applySubscriptionEstablishedMessage(e,t){const n=e.object_sid;let r=this.persisted.get(e.object_sid);r&&r.pendingCorrelationId===t?"interrupted"===e.replay_status?(s.default.debug(`Event Replay for subscription to ${n} (c:${t}) interrupted; continuing eagerly.`),r.updatePending(null,null),this.persisted.delete(r.sid),this.backoff.reset()):"completed"===e.replay_status&&(s.default.debug(`Event Replay for subscription to ${n} (c:${t}) completed. Subscription is ready.`),r.complete(e.last_event_id),this.persisted.set(e.object_sid,r),r.setSubscriptionState("established"),this.backoff.reset()):s.default.debug(`Late message for ${e.object_sid} (c:${t}) dropped.`),this.persist()}applySubscriptionCancelledMessage(e,t){let n=this.persisted.get(e.object_sid);n&&n.pendingCorrelationId===t?(n.updatePending(null,null),n.setSubscriptionState("none"),this.persisted.delete(e.object_sid)):s.default.debug(`Late message for ${e.object_sid} (c:${t}) dropped.`),this.persist()}applySubscriptionFailedMessage(e,t){const n=e.object_sid;let r=this.subscriptions.get(n),i=this.persisted.get(n);r&&i?i.pendingCorrelationId===t&&(s.default.error("Failed to subscribe on "+i.sid,e.error),i.markAsFailed(e),i.setSubscriptionState("none")):!r&&i&&(this.persisted.delete(n),i.setSubscriptionState("none")),this.persist()}applyEventToSubscribedEntity(e,t,n){if(!e)return;n=n||(()=>{let t=this.persisted.get(e);return t&&t.isEstablished})();let r=this.subscriptions.get(e);r?(t.event.type=t.event_type,r.update(t.event,n)):s.default.debug(`Message dropped for SID '${e}', for which there is no subscription.`)}onConnectionStateChanged(e){this.isConnected=e,e&&this.poke("reconnect")}onSubscriptionTtlElapsed(){this.isConnected&&this.poke("ttl")}poke(e){s.default.debug("Triggering event replay for all subscriptions, reason="+e),this.pendingPokeReason=e,this.subscriptionTtlTimer&&(clearTimeout(this.subscriptionTtlTimer),this.subscriptionTtlTimer=null);let t=[];for(let n of this.persisted.values())n.reset(),n.rejectedWithError&&t.push(n);this.persisted.clear();for(let n of t)this.persisted.set(n.sid,n);this.persist()}shutdown(){this.backoff.reset(),this.subscriptions.clear()}}t.Subscriptions=c},b041:function(e,t,n){"use strict";var r=n("00ee"),i=n("f5df");e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},b0c0:function(e,t,n){var r=n("83ab"),i=n("9bf2").f,s=Function.prototype,o=s.toString,a=/^\s*function ([^ (]*)/,c="name";r&&!(c in s)&&i(s,c,{configurable:!0,get:function(){try{return o.call(this).match(a)[1]}catch(e){return""}}})},b17c:function(e,t,n){n("4ae1");var r=n("4a4b"),i=n("6f8f");function s(t,n,o){return i()?(e.exports=s=Reflect.construct,e.exports["default"]=e.exports,e.exports.__esModule=!0):(e.exports=s=function(e,t,n){var i=[null];i.push.apply(i,t);var s=Function.bind.apply(e,i),o=new s;return n&&r(o,n.prototype),o},e.exports["default"]=e.exports,e.exports.__esModule=!0),s.apply(null,arguments)}e.exports=s,e.exports["default"]=e.exports,e.exports.__esModule=!0},b39a:function(e,t,n){"use strict";var r=n("da84"),i=n("ebb5"),s=n("d039"),o=r.Int8Array,a=i.aTypedArray,c=i.exportTypedArrayMethod,u=[].toLocaleString,l=[].slice,d=!!o&&s((function(){u.call(new o(1))})),f=s((function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()}))||!s((function(){o.prototype.toLocaleString.call([1,2])}));c("toLocaleString",(function(){return u.apply(d?l.call(a(this)):a(this),arguments)}),f)},b575:function(e,t,n){var r,i,s,o,a,c,u,l,d=n("da84"),f=n("06cf").f,h=n("2cf4").set,p=n("1cdc"),m=n("a4b4"),y=n("605d"),v=d.MutationObserver||d.WebKitMutationObserver,g=d.document,b=d.process,w=d.Promise,x=f(d,"queueMicrotask"),_=x&&x.value;_||(r=function(){var e,t;y&&(e=b.domain)&&e.exit();while(i){t=i.fn,i=i.next;try{t()}catch(n){throw i?o():s=void 0,n}}s=void 0,e&&e.enter()},p||y||m||!v||!g?w&&w.resolve?(u=w.resolve(void 0),u.constructor=w,l=u.then,o=function(){l.call(u,r)}):o=y?function(){b.nextTick(r)}:function(){h.call(d,r)}:(a=!0,c=g.createTextNode(""),new v(r).observe(c,{characterData:!0}),o=function(){c.data=a=!a})),e.exports=_||function(e){var t={fn:e,next:void 0};s&&(s.next=t),i||(i=t,o()),s=t}},b622:function(e,t,n){var r=n("da84"),i=n("5692"),s=n("5135"),o=n("90e3"),a=n("4930"),c=n("fdbf"),u=i("wks"),l=r.Symbol,d=c?l:l&&l.withoutSetter||o;e.exports=function(e){return s(u,e)&&(a||"string"==typeof u[e])||(a&&s(l,e)?u[e]=l[e]:u[e]=d("Symbol."+e)),u[e]}},b64b:function(e,t,n){var r=n("23e7"),i=n("7b0b"),s=n("df75"),o=n("d039"),a=o((function(){s(1)}));r({target:"Object",stat:!0,forced:a},{keys:function(e){return s(i(e))}})},b6b7:function(e,t,n){var r=n("ebb5"),i=n("4840"),s=r.TYPED_ARRAY_CONSTRUCTOR,o=r.aTypedArrayConstructor;e.exports=function(e){return o(i(e,e[s]))}},b727:function(e,t,n){var r=n("0366"),i=n("44ad"),s=n("7b0b"),o=n("50c4"),a=n("65f0"),c=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,l=4==e,d=6==e,f=7==e,h=5==e||d;return function(p,m,y,v){for(var g,b,w=s(p),x=i(w),_=r(m,y,3),k=o(x.length),S=0,T=v||a,E=t?T(p,k):n||f?T(p,0):void 0;k>S;S++)if((h||S in x)&&(g=x[S],b=_(g,S,w),e))if(t)E[S]=b;else if(b)switch(e){case 3:return!0;case 5:return g;case 6:return S;case 2:c.call(E,g)}else switch(e){case 4:return!1;case 7:c.call(E,g)}return d?-1:u||l?l:E}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},b88d:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("faa1");class i extends r.EventEmitter{constructor(e){super(),this.minDelay=e.min,this.maxDelay=e.max,this.initialDelay=e.initial||0,this.maxAttemptsCount=e.maxAttemptsCount||0,this.maxAttemptsTime=e.maxAttemptsTime||0,this.randomness=e.randomness||0,this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0}attempt(){clearTimeout(this.timeout),this.attemptNum++,this.timeout=null,this.emit("attempt",this)}nextDelay(e){if("number"===typeof e)return this.prevDelay=0,this.currDelay=e,e;if(0==this.attemptNum)return this.initialDelay;if(1==this.attemptNum)return this.currDelay=this.minDelay,this.currDelay;this.prevDelay=this.currDelay;let t=this.currDelay+this.prevDelay;return this.maxDelay&&t>this.maxDelay&&(this.currDelay=this.maxDelay,t=this.maxDelay),this.currDelay=t,t}randomize(e){let t=e*this.randomness,n=Math.round(Math.random()*t*2-t);return Math.max(0,e+n)}scheduleAttempt(e){if(this.maxAttemptsCount&&this.attemptNum>=this.maxAttemptsCount)return this.cleanup(),this.emit("failed",new Error("Maximum attempt count limit reached")),void this.reject(new Error("Maximum attempt count reached"));let t=this.nextDelay(e);if(t=this.randomize(t),this.maxAttemptsTime&&this.startTimestamp+this.maxAttemptsTime<Date.now()+t)return this.cleanup(),this.emit("failed",new Error("Maximum attempt time limit reached")),void this.reject(new Error("Maximum attempt time limit reached"));this.timeout=setTimeout(()=>this.attempt(),t)}cleanup(){clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0}start(){if(this.inProgress)throw new Error("Retrier is already in progress");return this.inProgress=!0,new Promise((e,t)=>{this.resolve=e,this.reject=t,this.startTimestamp=Date.now(),this.scheduleAttempt(this.initialDelay)})}cancel(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.emit("cancelled"),this.reject(new Error("Cancelled")))}succeeded(e){this.emit("succeeded",e),this.resolve(e)}failed(e,t){if(this.timeout)throw new Error("Retrier attempt is already in progress");this.scheduleAttempt(t)}run(e){return this.on("attempt",()=>{e().then(e=>this.succeeded(e)).catch(e=>this.failed(e))}),this.start()}}t.Retrier=i,t.default=i},bb2f:function(e,t,n){var r=n("d039");e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bc30:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("6ab6");class i extends r.TwilsockError{constructor(e,t,n){super(t),this.status=e,this.description=t,this.body=n}}t.TwilsockUpstreamError=i},bc57:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegistrarConnector=t.Connector=void 0;const r=n("cfcf"),i=n("437c"),s=n("dcb6");Object.defineProperty(t,"Connector",{enumerable:!0,get:function(){return s.Connector}});let o={min:2e3,max:12e4,randomness:.2};class a extends s.Connector{constructor(e,t,n,r){super(r),this.channelType=e,this.context=t,this.transport=n}async updateRegistration(e,t){return t.has("notificationId")&&await this.removeRegistration(),e.notificationId&&e.notificationId.length?(await this.register(e),e):e}async removeRegistration(){if(!this.registrationId)return;const e=`${this.config.registrarUrl}/${this.registrationId}?productId=${this.context.productId}`,t={"Content-Type":"application/json","X-Twilio-Token":this.config.token};try{i.log.trace("Removing registration for ",this.channelType),await new r.Retrier(Object.assign(o,{maxAttemptsCount:3})).run(()=>this.transport.delete(e,t)),i.log.debug("Registration removed for",this.channelType)}catch(n){throw i.log.error("Failed to remove of registration ",this.channelType,n),n}}async register(e){i.log.trace("Registering",this.channelType,e);let t={endpoint_platform:this.context.platform,channel_type:this.channelType,version:this.context.protocolVersion.toString(),message_types:Array.from(e.messageTypes),data:{registration_id:e.notificationId},ttl:"PT24H"};const n=`${this.config.registrarUrl}?productId=${this.context.productId}`,s={"Content-Type":"application/json","X-Twilio-Token":e.token};i.log.trace("Creating registration for channel ",this.channelType);try{let e=await new r.Retrier(o).run(()=>this.transport.post(n,s,t));this.registrationId=e.body.id,i.log.debug("Registration created: ",e)}catch(a){throw i.log.error("Registration failed: ",a),a}}}t.RegistrarConnector=a},bf2c:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const r=n("faa1"),i=n("319d");class s extends r.EventEmitter{constructor(t){super(),this.url=t,this.WebSocket=e["WebSocket"]||e["MozWebSocket"]||n(1)}get isConnected(){return this.socket&&1===this.socket.readyState}connect(){let e;i.log.trace("connecting to socket");try{e=new this.WebSocket(this.url)}catch(t){return i.log.debug("Socket error: "+this.url),void this.emit("socketError",t)}e.binaryType="arraybuffer",e.onopen=()=>{i.log.debug("socket opened "+this.url),this.emit("connected")},e.onclose=e=>{i.log.debug("socket closed",e),this.emit("disconnected",e)},e.onerror=e=>{i.log.debug("Socket error:",e),this.emit("socketError",e)},e.onmessage=e=>{this.emit("message",e.data)},this.socket=e}send(e){this.socket.send(e)}close(){if(i.log.trace("closing socket"),this.socket){this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null;try{this.socket.close()}finally{}}}}t.WebSocketChannel=s}).call(this,n("c8ba"))},bf67:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.base=e,this.args=new Array,this.paths=new Array}pathSegment(e){return this.paths.push(encodeURIComponent(e)),this}queryParam(e,t){return"undefined"!==typeof t&&this.args.push(encodeURIComponent(e)+"="+encodeURIComponent(t)),this}build(){let e=this.base;return this.paths.length&&(e+="/"+this.paths.join("/")),this.args.length&&(e+="?"+this.args.join("&")),e}}t.UriBuilder=r},c04e:function(e,t,n){var r=n("861d"),i=n("d9b5"),s=n("485a"),o=n("b622"),a=o("toPrimitive");e.exports=function(e,t){if(!r(e)||i(e))return e;var n,o=e[a];if(void 0!==o){if(void 0===t&&(t="default"),n=o.call(e,t),!r(n)||i(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},c135:function(e,t){function n(e){if(Array.isArray(e))return e}e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},c19f:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),s=n("621a"),o=n("2626"),a="ArrayBuffer",c=s[a],u=i[a];r({global:!0,forced:u!==c},{ArrayBuffer:c}),o(a)},c1ac:function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").filter,s=n("1448"),o=r.aTypedArray,a=r.exportTypedArrayMethod;a("filter",(function(e){var t=i(o(this),e,arguments.length>1?arguments[1]:void 0);return s(this,t)}))},c240:function(e,t){function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},c430:function(e,t){e.exports=!1},c434:function(e,t,n){(function(t,n){e.exports=n()})(0,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i;for(n=1;n<arguments.length;n++)for(i in r=arguments[n],r)r.hasOwnProperty(i)&&(e[i]=r[i]);return e}},function(e,t,n){"use strict";var r=n(0);e.exports={build:function(e,t){var n,i,s,o=t.plugins;for(n=0,i=o.length;n<i;n++)s=o[n],s.methods&&r(e,s.methods),s.properties&&Object.defineProperties(e,s.properties)},hook:function(e,t,n){var r,i,s,o,a=e.config.plugins,c=[e.context];for(n&&(c=c.concat(n)),r=0,i=a.length;r<i;r++)o=a[r],s=a[r][t],s&&s.apply(o,c)}}},function(e,t,n){"use strict";function r(e){if(0===e.length)return e;var t,n,r=e.split(/[_-]/);if(1===r.length&&r[0][0].toLowerCase()===r[0][0])return e;for(n=r[0].toLowerCase(),t=1;t<r.length;t++)n=n+r[t].charAt(0).toUpperCase()+r[t].substring(1).toLowerCase();return n}r.prepended=function(e,t){return t=r(t),e+t[0].toUpperCase()+t.substring(1)},e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(2);function s(e,t){e=e||{},this.options=e,this.defaults=t.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(e.init),this.data=this.configureData(e.data),this.methods=this.configureMethods(e.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(e.transitions||[]),this.plugins=this.configurePlugins(e.plugins,t.plugin)}r(s.prototype,{addState:function(e){this.map[e]||(this.states.push(e),this.addStateLifecycleNames(e),this.map[e]={})},addStateLifecycleNames:function(e){this.lifecycle.onEnter[e]=i.prepended("onEnter",e),this.lifecycle.onLeave[e]=i.prepended("onLeave",e),this.lifecycle.on[e]=i.prepended("on",e)},addTransition:function(e){this.transitions.indexOf(e)<0&&(this.transitions.push(e),this.addTransitionLifecycleNames(e))},addTransitionLifecycleNames:function(e){this.lifecycle.onBefore[e]=i.prepended("onBefore",e),this.lifecycle.onAfter[e]=i.prepended("onAfter",e),this.lifecycle.on[e]=i.prepended("on",e)},mapTransition:function(e){var t=e.name,n=e.from,r=e.to;return this.addState(n),"function"!==typeof r&&this.addState(r),this.addTransition(t),this.map[n][t]=e,e},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(e){return"string"===typeof e?this.mapTransition(r({},this.defaults.init,{to:e,active:!0})):"object"===typeof e?this.mapTransition(r({},this.defaults.init,e,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(e){return"function"===typeof e?e:"object"===typeof e?function(){return e}:function(){return{}}},configureMethods:function(e){return e||{}},configurePlugins:function(e,t){var n,r,i;for(e=e||[],n=0,r=e.length;n<r;n++)i=e[n],"function"===typeof i&&(e[n]=i=i()),i.configure&&i.configure(this);return e},configureTransitions:function(e){var t,n,r,i,s,o=this.defaults.wildcard;for(n=0;n<e.length;n++)for(r=e[n],i=Array.isArray(r.from)?r.from:[r.from||o],s=r.to||o,t=0;t<i.length;t++)this.mapTransition({name:r.name,from:i[t],to:s})},transitionFor:function(e,t){var n=this.defaults.wildcard;return this.map[e][t]||this.map[n][t]},transitionsFor:function(e){var t=this.defaults.wildcard;return Object.keys(this.map[e]).concat(Object.keys(this.map[t]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),e.exports=s},function(e,t,n){var r=n(0),i=n(6),s=n(1),o=[null,[]];function a(e,t){this.context=e,this.config=t,this.state=t.init.from,this.observers=[e]}r(a.prototype,{init:function(e){if(r(this.context,this.config.data.apply(this.context,e)),s.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(e){return Array.isArray(e)?e.indexOf(this.state)>=0:this.state===e},isPending:function(){return this.pending},can:function(e){return!this.isPending()&&!!this.seek(e)},cannot:function(e){return!this.can(e)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(e,t){var n=this.config.defaults.wildcard,r=this.config.transitionFor(this.state,e),i=r&&r.to;return"function"===typeof i?i.apply(this.context,t):i===n?this.state:i},fire:function(e,t){return this.transit(e,this.state,this.seek(e,t),t)},transit:function(e,t,n,r){var i=this.config.lifecycle,s=this.config.options.observeUnchangedState||t!==n;return n?this.isPending()?this.context.onPendingTransition(e,t,n):(this.config.addState(n),this.beginTransit(),r.unshift({transition:e,from:t,to:n,fsm:this.context}),this.observeEvents([this.observersForEvent(i.onBefore.transition),this.observersForEvent(i.onBefore[e]),s?this.observersForEvent(i.onLeave.state):o,s?this.observersForEvent(i.onLeave[t]):o,this.observersForEvent(i.on.transition),s?["doTransit",[this]]:o,s?this.observersForEvent(i.onEnter.state):o,s?this.observersForEvent(i.onEnter[n]):o,s?this.observersForEvent(i.on[n]):o,this.observersForEvent(i.onAfter.transition),this.observersForEvent(i.onAfter[e]),this.observersForEvent(i.on[e])],r)):this.context.onInvalidTransition(e,t,n)},beginTransit:function(){this.pending=!0},endTransit:function(e){return this.pending=!1,e},failTransit:function(e){throw this.pending=!1,e},doTransit:function(e){this.state=e.to},observe:function(e){if(2===e.length){var t={};t[e[0]]=e[1],this.observers.push(t)}else this.observers.push(e[0])},observersForEvent:function(e){for(var t,n=0,r=this.observers.length,i=[];n<r;n++)t=this.observers[n],t[e]&&i.push(t);return[e,i,!0]},observeEvents:function(e,t,n,r){if(0===e.length)return this.endTransit(void 0===r||r);var i=e[0][0],o=e[0][1],a=e[0][2];if(t[0].event=i,i&&a&&i!==n&&s.hook(this,"lifecycle",t),0===o.length)return e.shift(),this.observeEvents(e,t,i,r);var c=o.shift(),u=c[i].apply(c,t);return u&&"function"===typeof u.then?u.then(this.observeEvents.bind(this,e,t,i)).catch(this.failTransit.bind(this)):!1===u?this.endTransit(!1):this.observeEvents(e,t,i,u)},onInvalidTransition:function(e,t,n){throw new i("transition is invalid in current state",e,t,n,this.state)},onPendingTransition:function(e,t,n){throw new i("transition is invalid while previous transition is still in progress",e,t,n,this.state)}}),e.exports=a},function(e,t,n){"use strict";var r=n(0),i=n(2),s=n(1),o=n(3),a=n(4),c={is:function(e){return this._fsm.is(e)},can:function(e){return this._fsm.can(e)},cannot:function(e){return this._fsm.cannot(e)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(e,t,n){return this._fsm.onInvalidTransition(e,t,n)},onPendingTransition:function(e,t,n){return this._fsm.onPendingTransition(e,t,n)}},u={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(e){throw Error("use transitions to change state")}}};function l(e){return f(this||{},e)}function d(){var e,t;"function"===typeof arguments[0]?(e=arguments[0],t=arguments[1]||{}):(e=function(){this._fsm.apply(this,arguments)},t=arguments[0]||{});var n=new o(t,l);return h(e.prototype,n),e.prototype._fsm.config=n,e}function f(e,t){var n=new o(t,l);return h(e,n),e._fsm(),e}function h(e,t){if("object"!==typeof e||Array.isArray(e))throw Error("StateMachine can only be applied to objects");s.build(e,t),Object.defineProperties(e,u),r(e,c),r(e,t.methods),t.allTransitions().forEach((function(t){e[i(t)]=function(){return this._fsm.fire(t,[].slice.call(arguments))}})),e._fsm=function(){this._fsm=new a(this,t),this._fsm.init(arguments)}}l.version="3.0.1",l.factory=d,l.apply=f,l.defaults={wildcard:"*",init:{name:"init",from:"none"}},e.exports=l},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){this.message=e,this.transition=t,this.from=n,this.to=r,this.current=i}}])}))},c437:function(e,t,n){var r,i,s=n("e1f4"),o=n("2366"),a=0,c=0;function u(e,t,n){var u=t&&n||0,l=t||[];e=e||{};var d=e.node||r,f=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==f){var h=s();null==d&&(d=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==f&&(f=i=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,y=p-a+(m-c)/1e4;if(y<0&&void 0===e.clockseq&&(f=f+1&16383),(y<0||p>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,c=m,i=f,p+=122192928e5;var v=(1e4*(268435455&p)+m)%4294967296;l[u++]=v>>>24&255,l[u++]=v>>>16&255,l[u++]=v>>>8&255,l[u++]=255&v;var g=p/4294967296*1e4&268435455;l[u++]=g>>>8&255,l[u++]=255&g,l[u++]=g>>>24&15|16,l[u++]=g>>>16&255,l[u++]=f>>>8|128,l[u++]=255&f;for(var b=0;b<6;++b)l[u+b]=d[b];return t||o(l)}e.exports=u},c5f7:function(e,t,n){function r(e){return-1!==Function.toString.call(e).indexOf("[native code]")}n("d3b7"),n("25f0"),e.exports=r,e.exports["default"]=e.exports,e.exports.__esModule=!0},c64e:function(e,t,n){var r=n("e1f4"),i=n("2366");function s(e,t,n){var s=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[s+a]=o[a];return t||i(o)}e.exports=s},c6b6:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},c6cd:function(e,t,n){var r=n("da84"),i=n("ce4e"),s="__core-js_shared__",o=r[s]||i(s,{});e.exports=o},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},c973:function(e,t,n){function r(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,s){var o=e.apply(t,n);function a(e){r(o,i,s,a,c,"next",e)}function c(e){r(o,i,s,a,c,"throw",e)}a(void 0)}))}}n("d3b7"),e.exports=i,e.exports["default"]=e.exports,e.exports.__esModule=!0},ca64:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("faa1");function i(e){return void 0!==e&&null!==e}class s extends r.EventEmitter{constructor(e){if(super(),e=e||{},i(e.initialDelay)&&e.initialDelay<1)throw new Error("The initial timeout must be equal to or greater than 1.");if(i(e.maxDelay)&&e.maxDelay<=1)throw new Error("The maximal timeout must be greater than 1.");if(i(e.randomisationFactor)&&(e.randomisationFactor<0||e.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");if(i(e.factor)&&e.factor<=1)throw new Error("Exponential factor should be greater than 1.");if(this.initialDelay=e.initialDelay||100,this.maxDelay=e.maxDelay||1e4,this.maxDelay<=this.initialDelay)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");this.randomisationFactor=e.randomisationFactor||0,this.factor=e.factor||2,this.maxNumberOfRetry=-1,this.reset()}static exponential(e){return new s(e)}backoff(e){null==this.timeoutID&&(this.backoffNumber===this.maxNumberOfRetry?(this.emit("fail",e),this.reset()):(this.backoffDelay=this.next(),this.timeoutID=setTimeout(this.onBackoff.bind(this),this.backoffDelay),this.emit("backoff",this.backoffNumber,this.backoffDelay,e)))}reset(){this.backoffDelay=0,this.nextBackoffDelay=this.initialDelay,this.backoffNumber=0,clearTimeout(this.timeoutID),this.timeoutID=null}failAfter(e){if(e<=0)throw new Error("Expected a maximum number of retry greater than 0 but got "+e);this.maxNumberOfRetry=e}next(){this.backoffDelay=Math.min(this.nextBackoffDelay,this.maxDelay),this.nextBackoffDelay=this.backoffDelay*this.factor;let e=1+Math.random()*this.randomisationFactor;return Math.min(this.maxDelay,Math.round(this.backoffDelay*e))}onBackoff(){this.timeoutID=null,this.emit("ready",this.backoffNumber,this.backoffDelay),this.backoffNumber++}}t.Backoff=s,t.default=s},ca84:function(e,t,n){var r=n("5135"),i=n("fc6a"),s=n("4d64").indexOf,o=n("d012");e.exports=function(e,t){var n,a=i(e),c=0,u=[];for(n in a)!r(o,n)&&r(a,n)&&u.push(n);while(t.length>c)r(a,n=t[c++])&&(~s(u,n)||u.push(n));return u}},ca91:function(e,t,n){"use strict";var r=n("ebb5"),i=n("d58f").left,s=r.aTypedArray,o=r.exportTypedArrayMethod;o("reduce",(function(e){return i(s(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},caad:function(e,t,n){"use strict";var r=n("23e7"),i=n("4d64").includes,s=n("44d2");r({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},cbfd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("82b0"),i=n("319d");class s{constructor(e,t,n,r,i,s){this.title=e,this.details=t,this.start=n,this.type=i,this.id=s,this.end=r}toTelemetryEvent(){const e=new Date;let t=this.start,n=this.end?this.end:e;if(n<t){let e=n;n=t,t=e}const i=t.getTime()-e.getTime(),s=n.getTime()-e.getTime(),o=new r.TelemetryEvent(i,s,this.title,this.details,this.id,this.type);return o}}var o,a;t.TelemetryEventDescription=s,function(e){e[e["Start"]=0]="Start",e[e["End"]=1]="End"}(o||(o={})),t.TelemetryPoint=o,function(e){e[e["MinEventsPortion"]=0]="MinEventsPortion",e[e["AnyEvents"]=1]="AnyEvents",e[e["AnyEventsIncludingUnfinished"]=2]="AnyEventsIncludingUnfinished"}(a||(a={})),t.EventSendingLimitation=a;class c{constructor(e,t){this.minEventsPortionToSend=50,this.maxEventsPortionToSend=100,this.pendingEvents=new Map,this.readyEvents=[],this.hasInitializationFinished=!1,this._canSendTelemetry=!1,this.config=e,this.packetInterface=t}get isTelemetryEnabled(){return this.config.confirmedCapabilities.has("telemetry.v1")}get canSendTelemetry(){return this._canSendTelemetry&&this.isTelemetryEnabled}set canSendTelemetry(e){i.log.debug(`TelemetryTracker.canSendTelemetry: ${e} TelemetryTracker.isTelemetryEnabled: ${this.isTelemetryEnabled}`),this._canSendTelemetry&&!e&&(this.pendingEvents.clear(),this.readyEvents=[]),this._canSendTelemetry=e,e&&this.sendTelemetry(a.AnyEvents),e&&!this.hasInitializationFinished&&(this.hasInitializationFinished=!0)}addTelemetryEvent(e){!this.canSendTelemetry&&this.hasInitializationFinished||this.readyEvents.push(e)}addPartialEvent(e,t,n){i.log.debug(`Adding ${n===o.Start?"starting":"ending"} timepoint for '${t}' event`);let r=this.pendingEvents.has(t);if(n===o.Start)r&&i.log.debug(`Overwriting starting point for '${t}' event`),this.pendingEvents.set(t,e);else{if(!r)return void i.log.info(`Could not find started event for '${t}' event`);this.addTelemetryEvent(this.merge(this.pendingEvents.get(t),e)),this.pendingEvents.delete(t)}}getTelemetryToSend(e){return this.canSendTelemetry&&0!=this.readyEvents.length?e==a.MinEventsPortion&&this.readyEvents.length<this.minEventsPortionToSend?[]:this.getTelemetryPortion(e==a.AnyEventsIncludingUnfinished):[]}getTelemetryPortion(e){const t=Math.min(this.readyEvents.length,this.maxEventsPortionToSend);let n=this.readyEvents.splice(0,t);return e&&n.length<this.maxEventsPortionToSend&&this.pendingEvents.forEach((e,t)=>{if(n.length>=this.maxEventsPortionToSend)return;let r=this.pendingEvents.get(t);this.pendingEvents.delete(t),n.push(new s("[UNFINISHED] "+r.title,r.details,r.start,null,r.type,r.id))}),n}merge(e,t){return new s(t.title?t.title:e.title,t.details?t.details:e.details,e.start,t.end,t.type?t.type:e.type,t.id?t.id:e.id)}sendTelemetryIfMinimalPortionCollected(){this.sendTelemetry(a.MinEventsPortion)}sendTelemetry(e){const t=this.getTelemetryToSend(e);if(0!==t.length)try{this.packetInterface.send(new r.Telemetry(t.map(e=>e.toTelemetryEvent())))}catch(n){i.log.debug(`Error while sending ${t.length} telemetry events due to ${n}; they will be resubmitted`),this.readyEvents=this.readyEvents.concat(t)}}}t.TelemetryTracker=c},cc12:function(e,t,n){var r=n("da84"),i=n("861d"),s=r.document,o=i(s)&&i(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},cca6:function(e,t,n){var r=n("23e7"),i=n("60da");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},cd26:function(e,t,n){"use strict";var r=n("ebb5"),i=r.aTypedArray,s=r.exportTypedArrayMethod,o=Math.floor;s("reverse",(function(){var e,t=this,n=i(t).length,r=o(n/2),s=0;while(s<r)e=t[s],t[s++]=t[--n],t[n]=e;return t}))},cdf9:function(e,t,n){var r=n("825a"),i=n("861d"),s=n("f069");e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=s.f(e),o=n.resolve;return o(t),n.promise}},ce4e:function(e,t,n){var r=n("da84");e.exports=function(e,t){try{Object.defineProperty(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},cecd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("faa1"),i=n("914c"),s=n("fcbb"),o=n("bf67"),a=n("3f22"),c=n("20c9"),u=n("3da9"),l=n("eabe"),d=n("afe4"),f=n("4102"),h=n("f911"),p=n("a149"),m=n("1fce"),y=n("2a03"),v=n("4b3a"),g=n("3d6b"),b=n("2fec"),w=n("9325"),x=n("0121"),_=n("0121"),k="data_sync",S=n("8515").version;function T(e){if(e){if("string"===typeof e)return{id:e,mode:"open_or_create"};{c.validateOptionalTtl(e.ttl),c.validateId(e.id),e.mode&&c.validateMode(e.mode);let t=e.mode||(e.id?"open_or_create":"create_new");return Object.assign(Object.assign({},e),{mode:t})}}return{mode:"create_new"}}class E extends r.EventEmitter{constructor(e,t={}){if(super(),!e)throw new Error("Sync library needs a valid Twilio token to be passed");t.hasOwnProperty("logLevel")?u.default.setLevel(t.logLevel):u.default.setLevel("silent");const n=t.productId=t.productId||k;t.clientMetadata=t.clientMetadata||{},t.clientMetadata.hasOwnProperty("type")||(t.clientMetadata.type="sync"),t.clientMetadata.hasOwnProperty("sdk")||(t.clientMetadata.sdk="JS",t.clientMetadata.sdkv=S);let r=t.twilsockClient=t.twilsockClient||new i.Twilsock(e,n,t);r.on("tokenAboutToExpire",e=>this.emit("tokenAboutToExpire",e)),r.on("tokenExpired",()=>this.emit("tokenExpired")),r.on("connectionError",e=>this.emit("connectionError",e));let o=t.notificationsClient=t.notificationsClient||new s.Notifications(e,t),a=new l.Configuration(t),c=new h.NetworkService(new v.ClientInfo(S),a,r),p=new b.SessionStorage(a);this.localStorageId=null,r.connect(),this.services={config:a,twilsock:r,notifications:o,network:c,storage:p,router:null,subscriptions:null};let m=new d.Subscriptions(this.services),y=new f.Router({config:a,subscriptions:m,notifications:o});this.services.router=y,this.services.subscriptions=m,this.entities=new g.EntitiesCache,o.on("connectionStateChanged",()=>{this.emit("connectionStateChanged",this.services.notifications.connectionState)})}static get version(){return S}get connectionState(){return this.services.notifications.connectionState}async ensureReady(){if(this.services.config.sessionStorageEnabled)try{let e=await this.services.twilsock.storageId();this.services.storage.updateStorageId(e.id)}catch(e){u.default.warn("Failed to initialize storage",e)}}storeRootInSessionCache(e,t,n){if(!this.services.config.sessionStorageEnabled||!t)return;let r=c.deepClone(n);e!==m.SyncList.type&&e!==y.SyncMap.type||(r["last_event_id"]=null,delete r["items"]),this.services.storage.store(e,t,r)}readRootFromSessionCache(e,t){return this.services.config.sessionStorageEnabled&&t?this.services.storage.read(e,t):null}async _get(e,t,n=!1){if(!t)throw new a.SyncError("Cannot get entity without id",404);const r=new o.UriBuilder(e).pathSegment(t).queryParam("Include",n?"items":void 0).build();let i=await this.services.network.get(r);return i.body}_createDocument(e,t,n){const r={unique_name:e,data:t||{}};return void 0!==n&&(r.ttl=n),this.services.network.post(this.services.config.documentsUri,r).then(e=>(e.body.data=r.data,e.body))}async _getDocument(e){return this.readRootFromSessionCache(p.SyncDocument.type,e)||this._get(this.services.config.documentsUri,e)}_createList(e,t,n,r){const i={unique_name:e,purpose:t,context:n};return void 0!==r&&(i.ttl=r),this.services.network.post(this.services.config.listsUri,i).then(e=>e.body)}async _getList(e){return this.readRootFromSessionCache(m.SyncList.type,e)||this._get(this.services.config.listsUri,e)}_createMap(e,t){const n={unique_name:e};return void 0!==t&&(n.ttl=t),this.services.network.post(this.services.config.mapsUri,n).then(e=>e.body)}async _getMap(e,t=!1){return this.readRootFromSessionCache(y.SyncMap.type,e)||this._get(this.services.config.mapsUri,e,t)}async _getStream(e){return this.readRootFromSessionCache(w.SyncStream.type,e)||this._get(this.services.config.streamsUri,e,!1)}async _createStream(e,t){const n={unique_name:e};void 0!==t&&(n.ttl=t);const r=await this.services.network.post(this.services.config.streamsUri,n);return r.body}_getLiveQuery(e){return this.readRootFromSessionCache(x.LiveQuery.type,e)}getCached(e,t){return e&&this.entities.get(e,t)||null}removeFromCacheAndSession(e,t,n){this.entities.remove(t),this.services.config.sessionStorageEnabled&&this.services.storage.remove(e,t,n)}async document(e){await this.ensureReady();let t,n=T(e);if("create_new"===n.mode)t=await this._createDocument(n.id,n.data,n.ttl);else{let r=this.getCached(n.id,p.SyncDocument.type);if(r)return new p.SyncDocument(r);try{t=await this._getDocument(n.id)}catch(i){if(404!==i.status||"open_existing"===n.mode)throw i;try{t=await this._createDocument(n.id,n.data,n.ttl)}catch(i){if(409===i.status)return this.document(e);throw i}}}this.storeRootInSessionCache(p.SyncDocument.type,n.id,t);let r=new p.SyncDocumentImpl(this.services,t,(e,t,n)=>this.removeFromCacheAndSession(e,t,n));return r=this.entities.store(r),new p.SyncDocument(r)}async map(e){await this.ensureReady();let t,n=T(e);if("create_new"===n.mode)t=await this._createMap(n.id,n.ttl);else{let r=this.getCached(n.id,y.SyncMap.type);if(r)return new y.SyncMap(r);try{t=await this._getMap(n.id,n.includeItems)}catch(i){if(404!==i.status||"open_existing"===n.mode)throw i;try{t=await this._createMap(n.id,n.ttl)}catch(i){if(409===i.status)return this.map(e);throw i}}}this.storeRootInSessionCache(y.SyncMap.type,n.id,t);let r=new y.SyncMapImpl(this.services,t,(e,t,n)=>this.removeFromCacheAndSession(e,t,n));return r=this.entities.store(r),new y.SyncMap(r)}async list(e){await this.ensureReady();let t,n=T(e);if("create_new"===n.mode)t=await this._createList(n.id,n.purpose,n.context,n.ttl);else{let r=this.getCached(n.id,m.SyncList.type);if(r)return new m.SyncList(r);try{t=await this._getList(n.id)}catch(i){if(404!==i.status||"open_existing"===n.mode)throw i;try{t=await this._createList(n.id,n.purpose,n.context,n.ttl)}catch(i){if(409===i.status)return this.list(e);throw i}}}this.storeRootInSessionCache(m.SyncList.type,n.id,t);let r=new m.SyncListImpl(this.services,t,(e,t,n)=>this.removeFromCacheAndSession(e,t,n));return r=this.entities.store(r),new m.SyncList(r)}async stream(e){await this.ensureReady();let t,n=T(e);if("create_new"===n.mode)t=await this._createStream(n.id,n.ttl);else{let r=this.getCached(n.id,w.SyncStream.type);if(r)return new w.SyncStream(r);try{t=await this._getStream(n.id)}catch(s){if(404!==s.status||"open_existing"===n.mode)throw s;try{t=await this._createStream(n.id,n.ttl)}catch(s){if(409===s.status)return this.stream(e);throw s}}}this.storeRootInSessionCache(w.SyncStream.type,n.id,t);const r=(e,t,n)=>this.removeFromCacheAndSession(e,t,n);let i=new w.SyncStreamImpl(this.services,t,r);return i=this.entities.store(i),new w.SyncStream(i)}async shutdown(){await this.services.subscriptions.shutdown(),await this.services.twilsock.disconnect()}async updateToken(e){return e?this.services.twilsock.updateToken(e).catch(e=>{var t;const n=null===(t=null===e||void 0===e?void 0:e.reply)||void 0===t?void 0:t.status;if(401===(null===n||void 0===n?void 0:n.code)&&"UNAUTHORIZED"===(null===n||void 0===n?void 0:n.status))throw new a.SyncError("Updated token was rejected by server",400,51130);throw e}):Promise.reject(new Error("A valid Twilio token should be provided"))}async liveQuery(e,t){if(await this.ensureReady(),!e||"string"!==typeof e)throw new Error("Index name must contain a non-empty string value");let n=new o.UriBuilder(this.services.config.insightsUri).pathSegment(e).pathSegment("Items").build(),r=await _.queryItems({network:this.services.network,uri:n,queryString:t,type:x.LiveQuery.type}),i=this.getCached(r.query_id,x.LiveQuery.type);if(!i){let s=this._getLiveQuery(r.query_id);s||(s={indexName:e,queryExpression:t,sid:r.query_id,queryUri:n,last_event_id:r.last_event_id});const o=(e,t,n)=>this.removeFromCacheAndSession(e,t,n);i=new x.LiveQueryImpl(s,this.services,o,r.items)}return this.storeRootInSessionCache(x.LiveQuery.type,r.query_id,i.liveQueryDescriptor),i=this.entities.store(i),new x.LiveQuery(i)}async instantQuery(e){await this.ensureReady();let t=(e,t)=>this.liveQuery(e,t);const n=new x.InstantQuery({indexName:e,network:this.services.network,insightsUri:this.services.config.insightsUri,liveQueryCreator:t});return n}}t.Client=E,t.SyncClient=E,t.default=E},cfcf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("b88d");t.Retrier=r.Retrier;const i=n("f330");t.Backoff=i.Backoff,t.default=r.Retrier},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,n){var r=n("da84"),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e]):r[e]&&r[e][t]}},d0a7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("319d"),i=n("faa1"),s=n("11c1"),o=n("6ab6");class a extends i.EventEmitter{constructor(e){super(),this.transport=e,this.registrations=new Map,this.registrationsInProgress=new Map}async putNotificationContext(e,t){const n={method:"put_notification_ctx",notification_ctx_id:e};await this.transport.sendWithReply(n,t)}async deleteNotificationContext(e){let t={method:"delete_notification_ctx",notification_ctx_id:e};await this.transport.sendWithReply(t)}async updateRegistration(e,t){r.log.debug("update registration for context",e);let n=this.registrationsInProgress.get(e);n||(n=new Set,this.registrationsInProgress.set(e,n));const i=s.v4();n.add(i);try{await this.putNotificationContext(e,t),r.log.debug("registration attempt succeeded for context",t),n.delete(i),0===n.size&&(this.registrationsInProgress.delete(e),this.emit("registered",e))}catch(o){r.log.warn("registration attempt failed for context",t),r.log.debug(o),n.delete(i),0===n.size&&(this.registrationsInProgress.delete(e),this.emit("registrationFailed",e,o))}}updateRegistrations(){r.log.trace(`refreshing ${this.registrations.size} registrations`),this.registrations.forEach((e,t)=>{this.updateRegistration(t,e)})}setNotificationsContext(e,t){if(!e||!t)throw new o.TwilsockError("Invalid arguments provided");this.registrations.set(e,t),this.transport.isConnected&&this.updateRegistration(e,t)}async removeNotificationsContext(e){this.registrations.has(e)&&(await this.deleteNotificationContext(e),this.transport.isConnected&&this.registrations.delete(e))}}t.Registrations=a},d139:function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").find,s=r.aTypedArray,o=r.exportTypedArrayMethod;o("find",(function(e){return i(s(this),e,arguments.length>1?arguments[1]:void 0)}))},d1e7:function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,s=i&&!r.call({1:2},1);t.f=s?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},d28b:function(e,t,n){var r=n("746f");r("iterator")},d2bb:function(e,t,n){var r=n("825a"),i=n("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(n,[]),t=n instanceof Array}catch(s){}return function(n,s){return r(n),i(s),t?e.call(n,s):n.__proto__=s,n}}():void 0)},d3b7:function(e,t,n){var r=n("00ee"),i=n("6eeb"),s=n("b041");r||i(Object.prototype,"toString",s,{unsafe:!0})},d44e:function(e,t,n){var r=n("9bf2").f,i=n("5135"),s=n("b622"),o=s("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},d58f:function(e,t,n){var r=n("1c0b"),i=n("7b0b"),s=n("44ad"),o=n("50c4"),a=function(e){return function(t,n,a,c){r(n);var u=i(t),l=s(u),d=o(u.length),f=e?d-1:0,h=e?-1:1;if(a<2)while(1){if(f in l){c=l[f],f+=h;break}if(f+=h,e?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:d>f;f+=h)f in l&&(c=n(c,l[f],f,u));return c}};e.exports={left:a(!1),right:a(!0)}},d5d4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.descriptor=e}get uri(){return this.descriptor.uri}get revision(){return this.descriptor.revision}get lastEventId(){return this.descriptor.lastEventId}get dateUpdated(){return this.descriptor.dateUpdated}get dateExpires(){return this.descriptor.dateExpires}get index(){return this.descriptor.index}get data(){return this.descriptor.data}update(e,t,n,r){return this.descriptor.lastEventId=e,this.descriptor.revision=t,this.descriptor.data=n,this.descriptor.dateUpdated=r,this}updateDateExpires(e){this.descriptor.dateExpires=e}}t.ListItem=r,t.default=r},d5d6:function(e,t,n){"use strict";var r=n("ebb5"),i=n("b727").forEach,s=r.aTypedArray,o=r.exportTypedArrayMethod;o("forEach",(function(e){i(s(this),e,arguments.length>1?arguments[1]:void 0)}))},d784:function(e,t,n){"use strict";n("ac1f");var r=n("6eeb"),i=n("9263"),s=n("d039"),o=n("b622"),a=n("9112"),c=o("species"),u=RegExp.prototype;e.exports=function(e,t,n,l){var d=o(e),f=!s((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),h=f&&!s((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return t=!0,null},n[d](""),!t}));if(!f||!h||n){var p=/./[d],m=t(d,""[e],(function(e,t,n,r,s){var o=t.exec;return o===i||o===u.exec?f&&!s?{done:!0,value:p.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}));r(String.prototype,e,m[0]),r(u,d,m[1])}l&&a(u[d],"sham",!0)}},d81d:function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").map,s=n("1dde"),o=s("map");r({target:"Array",proto:!0,forced:!o},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},d998:function(e,t,n){var r=n("342f");e.exports=/MSIE|Trident/.test(r)},d9b5:function(e,t,n){var r=n("d066"),i=n("fdbf");e.exports=i?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return"function"==typeof t&&Object(e)instanceof t}},da84:function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dbb4:function(e,t,n){var r=n("23e7"),i=n("83ab"),s=n("56ef"),o=n("fc6a"),a=n("06cf"),c=n("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,n,r=o(e),i=a.f,u=s(r),l={},d=0;while(u.length>d)n=i(r,t=u[d++]),void 0!==n&&c(l,t,n);return l}})},dcb6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connector=t.RegistrationState=void 0;const r=n("faa1"),i=n("437c");class s{constructor(e="",t="",n=new Set){this.token=e,this.notificationId=t,this.messageTypes=n}clone(){return new s(this.token,this.notificationId,new Set(this.messageTypes))}}function o(e,t){return[...[...e].filter(e=>!t.has(e)),...[...t].filter(t=>!e.has(t))]}function a(e,t){let n=new Set;return e.notificationId!==t.notificationId&&n.add("notificationId"),e.token!==t.token&&n.add("token"),o(e.messageTypes,t.messageTypes).length>0&&n.add("messageType"),[n.size>0,n]}t.RegistrationState=s;class c extends r.EventEmitter{constructor(e){super(),this.config=e,this.desiredState=new s,this.currentState=new s,this.hasActiveAttempt=!1}async subscribe(e){this.desiredState.messageTypes.has(e)?i.log.debug("message type already registered ",e):(this.desiredState.messageTypes.add(e),await this.persistRegistration())}async unsubscribe(e){this.desiredState.messageTypes.has(e)&&(this.desiredState.messageTypes.delete(e),await this.persistRegistration())}updateToken(e){this.desiredState.token=e,this.persistRegistration()}async persistRegistration(){if(!this.config.token||0===this.config.token.length)return void i.log.trace("Can't persist registration: token is not set");if(this.hasActiveAttempt)return void i.log.trace("One registration attempt is already in progress");let[e,t]=a(this.desiredState,this.currentState);if(e){this.currentState.notificationId||t.delete("notificationId"),i.log.trace("Persisting registration",t,this.desiredState);try{this.hasActiveAttempt=!0;let e=this.desiredState.clone();if(e.messageTypes.size>0){let n=await this.updateRegistration(e,t);this.currentState.token=n.token,this.currentState.notificationId=n.notificationId,this.currentState.messageTypes=n.messageTypes,this.emit("stateChanged","registered")}else await this.removeRegistration(),this.currentState.token=e.token,this.currentState.notificationId=e.notificationId,this.currentState.messageTypes.clear(),this.emit("stateChanged","unregistered")}finally{this.hasActiveAttempt=!1,setTimeout(()=>this.persistRegistration(),0)}}}setNotificationId(e){this.desiredState.notificationId=e,this.persistRegistration()}}t.Connector=c},ddb0:function(e,t,n){var r=n("da84"),i=n("fdbc"),s=n("e260"),o=n("9112"),a=n("b622"),c=a("iterator"),u=a("toStringTag"),l=s.values;for(var d in i){var f=r[d],h=f&&f.prototype;if(h){if(h[c]!==l)try{o(h,c,l)}catch(m){h[c]=l}if(h[u]||o(h,u,d),i[d])for(var p in s)if(h[p]!==s[p])try{o(h,p,s[p])}catch(m){h[p]=s[p]}}}},ddd7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("fae9"),i=n("7fd0"),s=n("ab34"),o=i.Logger.scope("Network");class a{constructor(e,t){this.config=e,this.transport=t}backoffConfig(){return Object.assign(s.Configuration.backoffConfigDefault,this.config.backoffConfigOverride)}retryWhenThrottled(){return"undefined"!==typeof this.config.retryWhenThrottledOverride?this.config.retryWhenThrottledOverride:"undefined"!==typeof s.Configuration.retryWhenThrottledDefault&&s.Configuration.retryWhenThrottledDefault}executeWithRetry(e,t=!1){return new Promise((n,i)=>{let s=[502,503,504];t&&s.push(429);let o=new r.Retrier(this.backoffConfig());o.on("attempt",()=>{e().then(e=>o.succeeded(e)).catch(e=>{s.indexOf(e.status)>-1||"Twilsock disconnected"===e.message?o.failed(e):(o.removeAllListeners(),o.cancel(),i(e))})}),o.on("succeeded",e=>{n(e)}),o.on("cancelled",e=>i(e)),o.on("failed",e=>i(e)),o.start()})}async get(e){const t={"X-Twilio-Token":this.config.token};o.trace("sending GET request to ",e," headers ",t);let n=await this.executeWithRetry(()=>this.transport.get(e,t),this.retryWhenThrottled());return o.trace("response",n),n}async post(e,t,n){let r,i={"X-Twilio-Token":this.config.token};"undefined"!==typeof FormData&&t instanceof FormData||!n||Object.assign(i,{"Content-Type":n}),o.trace("sending POST request to ",e," headers ",i);try{r=await this.transport.post(e,i,t)}catch(s){throw s instanceof TypeError?(o.trace("got error in post response",s),new TypeError("Posting FormData supported only with browser engine's FormData")):s}return o.trace("response",r),r}}t.Network=a},df75:function(e,t,n){var r=n("ca84"),i=n("7839");e.exports=Object.keys||function(e){return r(e,i)}},dfb9:function(e,t){e.exports=function(e,t){var n=0,r=t.length,i=new e(r);while(r>n)i[n]=t[n++];return i}},e01a:function(e,t,n){"use strict";var r=n("23e7"),i=n("83ab"),s=n("da84"),o=n("5135"),a=n("861d"),c=n("9bf2").f,u=n("e893"),l=s.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new l(e):void 0===e?l():l(e);return""===e&&(d[t]=!0),t};u(f,l);var h=f.prototype=l.prototype;h.constructor=f;var p=h.toString,m="Symbol(test)"==String(l("test")),y=/^Symbol\((.*)\)[^)]+$/;c(h,"description",{configurable:!0,get:function(){var e=a(this)?this.valueOf():this,t=p.call(e);if(o(d,e))return"";var n=m?t.slice(7,-1):t.replace(y,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}},e163:function(e,t,n){var r=n("5135"),i=n("7b0b"),s=n("f772"),o=n("e177"),a=s("IE_PROTO"),c=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=i(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},e177:function(e,t,n){var r=n("d039");e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e1f4:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},e260:function(e,t,n){"use strict";var r=n("fc6a"),i=n("44d2"),s=n("3f8c"),o=n("69f3"),a=n("7dd0"),c="Array Iterator",u=o.set,l=o.getterFor(c);e.exports=a(Array,"Array",(function(e,t){u(this,{type:c,target:r(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),s.Arguments=s.Array,i("keys"),i("values"),i("entries")},e2cc:function(e,t,n){var r=n("6eeb");e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},e315:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t){this.balanceFactor=0,this.key=e,this.value=t,this.parent=null,this.left=null,this.right=null}get isRoot(){return null===this.parent}get isLeaf(){return null===this.left&&null===this.right}get isLeftChild(){return this.parent.left===this}update(e){this.value=e}replace(e,t){e&&(this.left===t?this.left=t:this.right===t&&(this.right=t))}}class i{constructor(e,t){this.isLessThan=e||((e,t)=>e<t),this.isEqual=t||((e,t)=>e===t),this.root=null,this.count=null}get size(){return this.count}clear(){this.root=null,this.count=0}set(e,t){let n=this.getNode(e);n?n.update(t):this.insert(e,t)}insert(e,t){let n=new r(e,t);if(this.count++,!this.root)return void(this.root=n);let i=this.root;for(;;)if(this.isLessThan(e,i.key)){if(!i.left){i.left=n;break}i=i.left}else{if(!i.right){i.right=n;break}i=i.right}n.parent=i,i=n;while(i.parent){let e=i.parent,t=e.balanceFactor;if(i.isLeftChild?e.balanceFactor++:e.balanceFactor--,Math.abs(e.balanceFactor)<Math.abs(t))break;if(e.balanceFactor<-1||e.balanceFactor>1){this.rebalance(e);break}i=e}}get(e){let t=this.root;while(t){if(this.isEqual(e,t.key))return t.value;t=this.isLessThan(e,t.key)?t.left:t.right}return null}delete(e){let t=this.getNode(e);if(!t||t.key!==e)return null;let n=t.parent,r=t.left,i=t.right;if(!!r!==!!i){let e=r||i;n||e?n&&!e?this.root=e:(n.replace(t,null),this.rebalance(n)):this.root=null}else{let e=t.left;while(e.right)e=e.right;if(t.left===e)t.isRoot?(this.root=e,e.parent=null):(t.isLeftChild?t.parent.left=e:t.parent.right=e,e.parent=t.parent),e.right=t.right,e.right.parent=e,e.balanceFactor=t.balanceFactor,t={parent:e,isLeftChild:!0};else{let n=e.parent,r=e.left;n.right=r,r&&(r.parent=n),t.isRoot?(this.root=e,e.parent=null):(t.isLeftChild?t.parent.left=e:t.parent.right=e,e.parent=t.parent),e.right=t.right,e.right.parent=e,e.left=t.left,e.left.parent=e,e.balanceFactor=t.balanceFactor,t={parent:n,isLeftChild:!1}}}this.count--;while(t.parent){let e=t.parent,n=e.balanceFactor;if(t.isLeftChild?e.balanceFactor-=1:e.balanceFactor+=1,Math.abs(e.balanceFactor)>Math.abs(n)){if(!(e.balanceFactor<-1||e.balanceFactor>1))break;if(this.rebalance(e),0!==e.parent.balanceFactor)break;t=e.parent}else t=e}return null}getNode(e){let t=this.root;while(t){if(this.isEqual(e,t.key))return t;t=this.isLessThan(e,t.key)?t.left:t.right}return null}rebalance(e){e.balanceFactor<0?e.right.balanceFactor>0?(this.rotateRight(e.right),this.rotateLeft(e)):this.rotateLeft(e):e.balanceFactor>0&&(e.left.balanceFactor<0?(this.rotateLeft(e.left),this.rotateRight(e)):this.rotateRight(e))}rotateLeft(e){let t=e.right;e.right=t.left,null!==t.left&&(t.left.parent=e),t.parent=e.parent,null===t.parent?this.root=t:e.isLeftChild?t.parent.left=t:t.parent.right=t,t.left=e,e.parent=t,e.balanceFactor=e.balanceFactor+1-Math.min(t.balanceFactor,0),t.balanceFactor=t.balanceFactor+1-Math.max(e.balanceFactor,0)}rotateRight(e){let t=e.left;e.left=t.right,null!==t.right&&(t.right.parent=e),t.parent=e.parent,null===t.parent?this.root=t:e.isLeftChild?t.parent.left=t:t.parent.right=t,t.right=e,e.parent=t,e.balanceFactor=e.balanceFactor-1-Math.min(t.balanceFactor,0),t.balanceFactor=t.balanceFactor-1-Math.max(e.balanceFactor,0)}*[Symbol.iterator](){for(let e of this.getIterator())yield e}*getIterator(e=null){let t=this.root;while(t){if(this.isEqual(e,t.key)||null===e&&!t.left)break;t=this.isLessThan(e,t.key)||null===e?t.left:t.right}if(!t)return null;let n=!0;for(;;)if(n)if(yield[t.key,t.value],n=!1,t.right){t=t.right;while(t.left)t=t.left;n=!0}else{if(!t.parent)break;n=t.parent.left===t,t=t.parent}else{if(!t.parent)break;n=t.parent.left===t,t=t.parent}return null}*getReverseIterator(e=null){let t=this.root;while(t){if(this.isEqual(e,t.key)||null===e&&!t.right)break;t=this.isLessThan(e,t.key)&&null!==e?t.left:t.right}if(!t)return null;let n=!0;for(;;)if(n)if(yield[t.key,t.value],n=!1,t.left){t=t.left;while(t.right)t=t.right;n=!0}else{if(!t.parent)break;n=t.parent.right===t,t=t.parent}else{if(!t.parent)break;n=t.parent.right===t,t=t.parent}return null}}t.TreeMap=i},e37a:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("7fd0"),i=n("ab34"),s=n("3a71");t.Media=s.Media,t.McsMedia=s.Media;const o=n("57ce"),a=n("ddd7"),c=r.Logger.scope(""),u=n("65d1").version,l="A valid Twilio token should be provided";class d{constructor(e,t,n={}){if(this.options=n,this.options.logLevel=this.options.logLevel||"silent",this.config=new i.Configuration(e,t,this.options),!e)throw new Error(l);c.setLevel(this.options.logLevel),this.options.transport=this.options.transport||new o.Transport,this.transport=this.options.transport,this.network=new a.Network(this.config,this.transport)}updateToken(e){if(c.info("updateToken"),!e)throw new Error(l);this.config.updateToken(e)}async get(e){let t=await this.network.get(`${this.config.baseUrl}/${e}`);return new s.Media(this.config,this.network,t.body)}async post(e,t){let n=await this.network.post(this.config.baseUrl,t,e);return new s.Media(this.config,this.network,n.body)}async postFormData(e){let t=await this.network.post(this.config.baseUrl,e);return new s.Media(this.config,this.network,t.body)}}t.Client=d,t.McsClient=d,d.version=u,t.default=d},e439:function(e,t,n){var r=n("23e7"),i=n("d039"),s=n("fc6a"),o=n("06cf").f,a=n("83ab"),c=i((function(){o(1)})),u=!a||c;r({target:"Object",stat:!0,forced:u,sham:!a},{getOwnPropertyDescriptor:function(e,t){return o(s(e),t)}})},e538:function(e,t,n){var r=n("b622");t.f=r},e58c:function(e,t,n){"use strict";var r=n("fc6a"),i=n("a691"),s=n("50c4"),o=n("a640"),a=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,l=o("lastIndexOf"),d=u||!l;e.exports=d?function(e){if(u)return c.apply(this,arguments)||0;var t=r(this),n=s(t.length),o=n-1;for(arguments.length>1&&(o=a(o,i(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:c},e667:function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},e66e:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="\\d+(?:[\\.,]\\d+)?",i="("+r+"W)",s="("+r+"Y)?("+r+"M)?("+r+"D)?",o="T("+r+"H)?("+r+"M)?("+r+"S)?",a="P(?:"+i+"|"+s+"(?:"+o+")?)",c=["weeks","years","months","days","hours","minutes","seconds"],u=t.pattern=new RegExp(a),l=t.parse=function(e){return e.match(u).slice(1).reduce((function(e,t,n){return e[c[n]]=parseFloat(t)||0,e}),{})},d=t.end=function(e,t){var n=t?t.getTime():Date.now(),r=new Date(n);return r.setFullYear(r.getFullYear()+e.years),r.setMonth(r.getMonth()+e.months),r.setDate(r.getDate()+e.days),r.setHours(r.getHours()+e.hours),r.setMinutes(r.getMinutes()+e.minutes),r.setMilliseconds(r.getMilliseconds()+1e3*e.seconds),r.setDate(r.getDate()+7*e.weeks),r},f=t.toSeconds=function(e,t){var n=t?t.getTime():Date.now(),r=new Date(n),i=d(e,r),s=(i.getTime()-r.getTime())/1e3;return s};t.default={end:d,toSeconds:f,pattern:u,parse:l}},e6cf:function(e,t,n){"use strict";var r,i,s,o,a=n("23e7"),c=n("c430"),u=n("da84"),l=n("d066"),d=n("fea9"),f=n("6eeb"),h=n("e2cc"),p=n("d2bb"),m=n("d44e"),y=n("2626"),v=n("861d"),g=n("1c0b"),b=n("19aa"),w=n("8925"),x=n("2266"),_=n("1c7e"),k=n("4840"),S=n("2cf4").set,T=n("b575"),E=n("cdf9"),O=n("44de"),C=n("f069"),I=n("e667"),j=n("69f3"),P=n("94ca"),M=n("b622"),R=n("6069"),A=n("605d"),D=n("2d00"),N=M("species"),L="Promise",U=j.get,F=j.set,B=j.getterFor(L),q=d&&d.prototype,$=d,W=q,z=u.TypeError,V=u.document,G=u.process,H=C.f,J=H,K=!!(V&&V.createEvent&&u.dispatchEvent),Q="function"==typeof PromiseRejectionEvent,Y="unhandledrejection",X="rejectionhandled",Z=0,ee=1,te=2,ne=1,re=2,ie=!1,se=P(L,(function(){var e=w($),t=e!==String($);if(!t&&66===D)return!0;if(c&&!W["finally"])return!0;if(D>=51&&/native code/.test(e))return!1;var n=new $((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))},i=n.constructor={};return i[N]=r,ie=n.then((function(){}))instanceof r,!ie||!t&&R&&!Q})),oe=se||!_((function(e){$.all(e)["catch"]((function(){}))})),ae=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},ce=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;T((function(){var r=e.value,i=e.state==ee,s=0;while(n.length>s){var o,a,c,u=n[s++],l=i?u.ok:u.fail,d=u.resolve,f=u.reject,h=u.domain;try{l?(i||(e.rejection===re&&fe(e),e.rejection=ne),!0===l?o=r:(h&&h.enter(),o=l(r),h&&(h.exit(),c=!0)),o===u.promise?f(z("Promise-chain cycle")):(a=ae(o))?a.call(o,d,f):d(o)):f(r)}catch(p){h&&!c&&h.exit(),f(p)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&le(e)}))}},ue=function(e,t,n){var r,i;K?(r=V.createEvent("Event"),r.promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},!Q&&(i=u["on"+e])?i(r):e===Y&&O("Unhandled promise rejection",n)},le=function(e){S.call(u,(function(){var t,n=e.facade,r=e.value,i=de(e);if(i&&(t=I((function(){A?G.emit("unhandledRejection",r,n):ue(Y,n,r)})),e.rejection=A||de(e)?re:ne,t.error))throw t.value}))},de=function(e){return e.rejection!==ne&&!e.parent},fe=function(e){S.call(u,(function(){var t=e.facade;A?G.emit("rejectionHandled",t):ue(X,t,e.value)}))},he=function(e,t,n){return function(r){e(t,r,n)}},pe=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=te,ce(e,!0))},me=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw z("Promise can't be resolved itself");var r=ae(t);r?T((function(){var n={done:!1};try{r.call(t,he(me,n,e),he(pe,n,e))}catch(i){pe(n,i,e)}})):(e.value=t,e.state=ee,ce(e,!1))}catch(i){pe({done:!1},i,e)}}};if(se&&($=function(e){b(this,$,L),g(e),r.call(this);var t=U(this);try{e(he(me,t),he(pe,t))}catch(n){pe(t,n)}},W=$.prototype,r=function(e){F(this,{type:L,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:Z,value:void 0})},r.prototype=h(W,{then:function(e,t){var n=B(this),r=H(k(this,$));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=A?G.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=Z&&ce(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=U(e);this.promise=e,this.resolve=he(me,t),this.reject=he(pe,t)},C.f=H=function(e){return e===$||e===s?new i(e):J(e)},!c&&"function"==typeof d&&q!==Object.prototype)){o=q.then,ie||(f(q,"then",(function(e,t){var n=this;return new $((function(e,t){o.call(n,e,t)})).then(e,t)}),{unsafe:!0}),f(q,"catch",W["catch"],{unsafe:!0}));try{delete q.constructor}catch(ye){}p&&p(q,W)}a({global:!0,wrap:!0,forced:se},{Promise:$}),m($,L,!1,!0),y(L),s=l(L),a({target:L,stat:!0,forced:se},{reject:function(e){var t=H(this);return t.reject.call(void 0,e),t.promise}}),a({target:L,stat:!0,forced:c||se},{resolve:function(e){return E(c&&this===s?$:this,e)}}),a({target:L,stat:!0,forced:oe},{all:function(e){var t=this,n=H(t),r=n.resolve,i=n.reject,s=I((function(){var n=g(t.resolve),s=[],o=0,a=1;x(e,(function(e){var c=o++,u=!1;s.push(void 0),a++,n.call(t,e).then((function(e){u||(u=!0,s[c]=e,--a||r(s))}),i)})),--a||r(s)}));return s.error&&i(s.value),n.promise},race:function(e){var t=this,n=H(t),r=n.reject,i=I((function(){var i=g(t.resolve);x(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},e893:function(e,t,n){var r=n("5135"),i=n("56ef"),s=n("06cf"),o=n("9bf2");e.exports=function(e,t){for(var n=i(t),a=o.f,c=s.f,u=0;u<n.length;u++){var l=n[u];r(e,l)||a(e,l,c(t,l))}}},e8b5:function(e,t,n){var r=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}},e91f:function(e,t,n){"use strict";var r=n("ebb5"),i=n("4d64").indexOf,s=r.aTypedArray,o=r.exportTypedArrayMethod;o("indexOf",(function(e){return i(s(this),e,arguments.length>1?arguments[1]:void 0)}))},e95a:function(e,t,n){var r=n("b622"),i=n("3f8c"),s=r("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[s]===e)}},eabe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r="/v4/Subscriptions",i="/v3/Maps",s="/v3/Lists",o="/v3/Documents",a="/v3/Streams",c="/v3/Insights";function u(e,t,n){return e&&"undefined"!==typeof e[t]?e[t]:n}class l{constructor(e={}){const t=e.region||"us1",n=`https://cds.${t}.twilio.com`,l=e.cdsUri||n;this.settings={subscriptionsUri:l+r,documentsUri:l+o,listsUri:l+s,mapsUri:l+i,streamsUri:l+a,insightsUri:l+c,sessionStorageEnabled:u(e.Sync,"enableSessionStorage",!0),productId:e.productId}}get subscriptionsUri(){return this.settings.subscriptionsUri}get documentsUri(){return this.settings.documentsUri}get listsUri(){return this.settings.listsUri}get mapsUri(){return this.settings.mapsUri}get streamsUri(){return this.settings.streamsUri}get insightsUri(){return this.settings.insightsUri}get backoffConfig(){return this.settings.backoffConfig||{}}get sessionStorageEnabled(){return this.settings.sessionStorageEnabled}get productId(){return this.settings.productId}}t.Configuration=l},eb0e:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("3e62");class i extends r.AbstractMessage{constructor(e,t,n,r=null,i=null){super(),this.method="init",this.token=e,this.continuation_token=t,this.metadata=n,this.registrations=r,this.tweaks=i,this.capabilities=["client_update","offline_storage","telemetry.v1"]}}t.Init=i},ebb5:function(e,t,n){"use strict";var r,i,s,o=n("a981"),a=n("83ab"),c=n("da84"),u=n("861d"),l=n("5135"),d=n("f5df"),f=n("9112"),h=n("6eeb"),p=n("9bf2").f,m=n("e163"),y=n("d2bb"),v=n("b622"),g=n("90e3"),b=c.Int8Array,w=b&&b.prototype,x=c.Uint8ClampedArray,_=x&&x.prototype,k=b&&m(b),S=w&&m(w),T=Object.prototype,E=T.isPrototypeOf,O=v("toStringTag"),C=g("TYPED_ARRAY_TAG"),I=g("TYPED_ARRAY_CONSTRUCTOR"),j=o&&!!y&&"Opera"!==d(c.opera),P=!1,M={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},R={BigInt64Array:8,BigUint64Array:8},A=function(e){if(!u(e))return!1;var t=d(e);return"DataView"===t||l(M,t)||l(R,t)},D=function(e){if(!u(e))return!1;var t=d(e);return l(M,t)||l(R,t)},N=function(e){if(D(e))return e;throw TypeError("Target is not a typed array")},L=function(e){if(y&&!E.call(k,e))throw TypeError("Target is not a typed array constructor");return e},U=function(e,t,n){if(a){if(n)for(var r in M){var i=c[r];if(i&&l(i.prototype,e))try{delete i.prototype[e]}catch(s){}}S[e]&&!n||h(S,e,n?t:j&&w[e]||t)}},F=function(e,t,n){var r,i;if(a){if(y){if(n)for(r in M)if(i=c[r],i&&l(i,e))try{delete i[e]}catch(s){}if(k[e]&&!n)return;try{return h(k,e,n?t:j&&k[e]||t)}catch(s){}}for(r in M)i=c[r],!i||i[e]&&!n||h(i,e,t)}};for(r in M)i=c[r],s=i&&i.prototype,s?f(s,I,i):j=!1;for(r in R)i=c[r],s=i&&i.prototype,s&&f(s,I,i);if((!j||"function"!=typeof k||k===Function.prototype)&&(k=function(){throw TypeError("Incorrect invocation")},j))for(r in M)c[r]&&y(c[r],k);if((!j||!S||S===T)&&(S=k.prototype,j))for(r in M)c[r]&&y(c[r].prototype,S);if(j&&m(_)!==S&&y(_,S),a&&!l(S,O))for(r in P=!0,p(S,O,{get:function(){return u(this)?this[C]:void 0}}),M)c[r]&&f(c[r],C,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:j,TYPED_ARRAY_CONSTRUCTOR:I,TYPED_ARRAY_TAG:P&&C,aTypedArray:N,aTypedArrayConstructor:L,exportTypedArrayMethod:U,exportTypedArrayStaticMethod:F,isView:A,isTypedArray:D,TypedArray:k,TypedArrayPrototype:S}},ed6d:function(e,t,n){var r=n("4a4b");function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}e.exports=i,e.exports["default"]=e.exports,e.exports.__esModule=!0},f069:function(e,t,n){"use strict";var r=n("1c0b"),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},f183:function(e,t,n){var r=n("23e7"),i=n("d012"),s=n("861d"),o=n("5135"),a=n("9bf2").f,c=n("241c"),u=n("057f"),l=n("90e3"),d=n("bb2f"),f=!1,h=l("meta"),p=0,m=Object.isExtensible||function(){return!0},y=function(e){a(e,h,{value:{objectID:"O"+p++,weakData:{}}})},v=function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,h)){if(!m(e))return"F";if(!t)return"E";y(e)}return e[h].objectID},g=function(e,t){if(!o(e,h)){if(!m(e))return!0;if(!t)return!1;y(e)}return e[h].weakData},b=function(e){return d&&f&&m(e)&&!o(e,h)&&y(e),e},w=function(){x.enable=function(){},f=!0;var e=c.f,t=[].splice,n={};n[h]=1,e(n).length&&(c.f=function(n){for(var r=e(n),i=0,s=r.length;i<s;i++)if(r[i]===h){t.call(r,i,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},x=e.exports={enable:w,fastKey:v,getWeakData:g,onFreeze:b};i[h]=!0},f330:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("faa1");function i(e){return void 0!==e&&null!==e}class s extends r.EventEmitter{constructor(e){if(super(),e=e||{},i(e.initialDelay)&&e.initialDelay<1)throw new Error("The initial timeout must be equal to or greater than 1.");if(i(e.maxDelay)&&e.maxDelay<=1)throw new Error("The maximal timeout must be greater than 1.");if(i(e.randomisationFactor)&&(e.randomisationFactor<0||e.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");if(i(e.factor)&&e.factor<=1)throw new Error("Exponential factor should be greater than 1.");if(this.initialDelay=e.initialDelay||100,this.maxDelay=e.maxDelay||1e4,this.maxDelay<=this.initialDelay)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");this.randomisationFactor=e.randomisationFactor||0,this.factor=e.factor||2,this.maxNumberOfRetry=-1,this.reset()}static exponential(e){return new s(e)}backoff(e){null==this.timeoutID&&(this.backoffNumber===this.maxNumberOfRetry?(this.emit("fail",e),this.reset()):(this.backoffDelay=this.next(),this.timeoutID=setTimeout(this.onBackoff.bind(this),this.backoffDelay),this.emit("backoff",this.backoffNumber,this.backoffDelay,e)))}reset(){this.backoffDelay=0,this.nextBackoffDelay=this.initialDelay,this.backoffNumber=0,clearTimeout(this.timeoutID),this.timeoutID=null}failAfter(e){if(e<=0)throw new Error("Expected a maximum number of retry greater than 0 but got "+e);this.maxNumberOfRetry=e}next(){this.backoffDelay=Math.min(this.nextBackoffDelay,this.maxDelay),this.nextBackoffDelay=this.backoffDelay*this.factor;let e=1+Math.random()*this.randomisationFactor;return Math.min(this.maxDelay,Math.round(this.backoffDelay*e))}onBackoff(){this.timeoutID=null,this.emit("ready",this.backoffNumber,this.backoffDelay),this.backoffNumber++}}t.Backoff=s,t.default=s},f5df:function(e,t,n){var r=n("00ee"),i=n("c6b6"),s=n("b622"),o=s("toStringTag"),a="Arguments"==i(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(n){}};e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=Object(e),o))?n:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},f72f:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("e315");class i{constructor(e,t){this.value=e,this.revision=t||0}get isValid(){return!0}}class s{constructor(e){this.revision=e}get isValid(){return!1}}class o{constructor(){this.items=new r.TreeMap}store(e,t,n){let r=this.items.get(e);return r&&r.revision>n?r.isValid?r.value:null:(this.items.set(e,new i(t,n)),t)}delete(e,t,n=!1){let r=this.items.get(e);(!r||r.revision<t||r&&!0===n)&&this.items.set(e,new s(t))}isKnown(e,t){let n=this.items.get(e);return n&&n.revision>=t}get(e){let t=this.items.get(e);return t&&t.isValid?t.value:null}has(e){let t=this.items.get(e);return t&&t.isValid}forEach(e){if(this.items)for(let[t,n]of this.items)n.isValid&&e(t,n.value)}}t.Cache=o,t.default=o},f772:function(e,t,n){var r=n("5692"),i=n("90e3"),s=r("keys");e.exports=function(e){return s[e]||(s[e]=i(e))}},f85b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("faa1");class i extends r.EventEmitter{constructor(e){super(),this.minDelay=e.min,this.maxDelay=e.max,this.initialDelay=e.initial||0,this.maxAttemptsCount=e.maxAttemptsCount||0,this.maxAttemptsTime=e.maxAttemptsTime||0,this.randomness=e.randomness||0,this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0}attempt(){clearTimeout(this.timeout),this.attemptNum++,this.timeout=null,this.emit("attempt",this)}nextDelay(e){if("number"===typeof e)return this.prevDelay=0,this.currDelay=e,e;if(0==this.attemptNum)return this.initialDelay;if(1==this.attemptNum)return this.currDelay=this.minDelay,this.currDelay;this.prevDelay=this.currDelay;let t=this.currDelay+this.prevDelay;return this.maxDelay&&t>this.maxDelay&&(this.currDelay=this.maxDelay,t=this.maxDelay),this.currDelay=t,t}randomize(e){let t=e*this.randomness,n=Math.round(Math.random()*t*2-t);return Math.max(0,e+n)}scheduleAttempt(e){if(this.maxAttemptsCount&&this.attemptNum>=this.maxAttemptsCount)return this.cleanup(),this.emit("failed",new Error("Maximum attempt count limit reached")),void this.reject(new Error("Maximum attempt count reached"));let t=this.nextDelay(e);if(t=this.randomize(t),this.maxAttemptsTime&&this.startTimestamp+this.maxAttemptsTime<Date.now()+t)return this.cleanup(),this.emit("failed",new Error("Maximum attempt time limit reached")),void this.reject(new Error("Maximum attempt time limit reached"));this.timeout=setTimeout(()=>this.attempt(),t)}cleanup(){clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0}start(){if(this.inProgress)throw new Error("Retrier is already in progress");return this.inProgress=!0,new Promise((e,t)=>{this.resolve=e,this.reject=t,this.startTimestamp=Date.now(),this.scheduleAttempt(this.initialDelay)})}cancel(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.emit("cancelled"),this.reject(new Error("Cancelled")))}succeeded(e){this.emit("succeeded",e),this.resolve(e)}failed(e,t){if(this.timeout)throw new Error("Retrier attempt is already in progress");this.scheduleAttempt(t)}run(e){return this.on("attempt",()=>{e().then(e=>this.succeeded(e)).catch(e=>this.failed(e))}),this.start()}}t.Retrier=i,t.default=i},f8cd:function(e,t,n){var r=n("a691");e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},f911:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("11c1"),i=n("3f22"),s=n("3da9"),o=n("9756"),a=n("914c"),c=4e3,u=6e4,l=9e4,d=.2;function f(e){if(e.body&&e.body.message)return e.body.message;switch(e.status){case 429:return"Throttled by server";case 404:return"Not found from server";default:return"Error from server"}}function h(e){return e.body?e.body.code:0}function p(e){return 409===e.status?new i.SyncNetworkError(f(e),e.status,h(e),e.body):e.status?new i.SyncError(f(e),e.status,h(e)):e instanceof a.TransportUnavailableError?e:new i.SyncError(e.message,0,0)}class m{constructor(e,t,n){this.clientInfo=e,this.config=t,this.transport=n}createHeaders(){return{"Content-Type":"application/json","Twilio-Sync-Client-Info":JSON.stringify(this.clientInfo),"Twilio-Request-Id":"RQ"+r.v4().replace(/-/g,"")}}backoffConfig(){return Object.assign({min:c,max:u,maxAttemptsTime:l,randomness:d},this.config.backoffConfig)}executeWithRetry(e,t=!0){return new Promise((n,r)=>{let i=[502,503,504];t&&i.push(429);let s=new o.Retrier(this.backoffConfig());s.on("attempt",()=>{e().then(e=>s.succeeded(e)).catch(e=>{if(i.includes(e.status)){let t=parseInt(e.headers?e.headers["Retry-After"]:null);s.failed(p(e),isNaN(t)?null:1e3*t)}else"Twilsock disconnected"===e.message?s.failed(p(e)):(s.removeAllListeners(),s.cancel(),r(p(e)))})}),s.on("succeeded",e=>{n(e)}),s.on("cancelled",e=>r(p(e))),s.on("failed",e=>r(p(e))),s.start()})}get(e){let t=this.createHeaders();return s.default.debug("GET",e,"ID:",t["Twilio-Request-Id"]),this.executeWithRetry(()=>this.transport.get(e,t,this.config.productId),!0)}post(e,t,n,r=!1){let i=this.createHeaders();return"undefined"!==typeof n&&null!==n&&(i["If-Match"]=n),s.default.debug("POST",e,"ID:",i["Twilio-Request-Id"]),this.executeWithRetry(()=>this.transport.post(e,i,t,this.config.productId),r)}put(e,t,n){let r=this.createHeaders();return"undefined"!==typeof n&&null!==n&&(r["If-Match"]=n),s.default.debug("PUT",e,"ID:",r["Twilio-Request-Id"]),this.executeWithRetry(()=>this.transport.put(e,r,t,this.config.productId),!1)}delete(e){let t=this.createHeaders();return s.default.debug("DELETE",e,"ID:",t["Twilio-Request-Id"]),this.executeWithRetry(()=>this.transport.delete(e,t,this.config.productId),!1)}}t.NetworkService=m},f9cb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}get promise(){return this._promise}update(e){this._resolve(e)}set(e){this.current=e,this._resolve(e)}fail(e){this._reject(e)}}t.Deferred=r},f9f1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("faa1"),i=n("319d"),s=n("88bd"),o=n("57a2"),a=n("68b6"),c=n("bf2c"),u=n("d0a7"),l=n("a850"),d=n("f9cb"),f=n("6ab6"),h=n("04bb"),p=n("832d"),m=n("cbfd");class y{}t.TelemetryEvents=y,y.TWILSOCK_CONNECT="twilsock.sdk.connect",y.TWILSOCK_INIT="twilsock.sdk.init";class v extends r.EventEmitter{constructor(e,t,n={}){super(),this.offlineStorageDeferred=new d.Deferred,n.continuationToken=n.continuationToken?n.continuationToken:p.TokenStorage.getStoredToken(t);let r=this.config=new s.Configuration(e,t,n);i.log.setLevel(r.logLevel);let h=new c.WebSocketChannel(r.url),v=n.transport?n.transport:new a.PacketInterface(h,r);this.channel=n.channel?n.channel:new o.TwilsockImpl(h,v,r),this.registrations=n.registrations?n.registrations:new u.Registrations(v),this.upstream=new l.Upstream(v,this.channel,r),this.telemetryTracker=new m.TelemetryTracker(r,v),this.channel.on("initialized",()=>this.telemetryTracker.canSendTelemetry=!0),h.on("disconnected",()=>this.telemetryTracker.canSendTelemetry=!1),this.registrations.on("registered",e=>this.emit("registered",e)),this.channel.on("message",(e,t)=>setTimeout(()=>this.emit("message",e,t),0)),this.channel.on("stateChanged",e=>setTimeout(()=>this.emit("stateChanged",e),0)),this.channel.on("connectionError",e=>setTimeout(()=>this.emit("connectionError",e),0)),this.channel.on("tokenAboutToExpire",()=>setTimeout(()=>this.emit("tokenAboutToExpire"),0)),this.channel.on("tokenExpired",()=>setTimeout(()=>this.emit("tokenExpired"),0)),this.channel.on("connected",()=>this.registrations.updateRegistrations()),this.channel.on("connected",()=>this.upstream.sendPendingMessages()),this.channel.on("connected",()=>setTimeout(()=>this.emit("connected"),0)),this.channel.on("beforeConnect",()=>this.telemetryTracker.addPartialEvent(new m.TelemetryEventDescription("Establish WebSocket connection","",new Date),y.TWILSOCK_CONNECT,m.TelemetryPoint.Start)),this.channel.on("connected",()=>this.telemetryTracker.addPartialEvent(new m.TelemetryEventDescription("Establish WebSocket connection","",new Date,new Date),y.TWILSOCK_CONNECT,m.TelemetryPoint.End)),this.channel.on("beforeSendInit",()=>this.telemetryTracker.addPartialEvent(new m.TelemetryEventDescription("Send Twilsock init","",new Date),y.TWILSOCK_INIT,m.TelemetryPoint.Start)),this.channel.on("initialized",()=>this.telemetryTracker.addPartialEvent(new m.TelemetryEventDescription("Send Twilsock init","Succeeded",new Date,new Date),y.TWILSOCK_INIT,m.TelemetryPoint.End)),this.channel.on("sendInitFailed",()=>this.telemetryTracker.addPartialEvent(new m.TelemetryEventDescription("Send Twilsock init","Failed",new Date,new Date),y.TWILSOCK_INIT,m.TelemetryPoint.End)),this.channel.on("initialized",e=>{this.handleStorageId(t,e),p.TokenStorage.storeToken(e.continuationToken,t),setTimeout(()=>this.emit("initialized",e),0)}),this.channel.on("disconnected",()=>setTimeout(()=>this.emit("disconnected"),0)),this.channel.on("disconnected",()=>this.upstream.rejectPendingMessages()),this.channel.on("disconnected",()=>this.offlineStorageDeferred.fail(new f.TwilsockError("Client disconnected"))),this.offlineStorageDeferred.promise.catch(()=>{})}emit(e,...t){return i.log.debug(`Emitting ${e.toString()}(${t.map(e=>JSON.stringify(e)).join(", ")})`),super.emit(e,...t)}handleStorageId(e,t){if(t.offlineStorage)if(t.offlineStorage.hasOwnProperty(e))try{this.offlineStorageDeferred.set(h.OfflineProductStorage.create(t.offlineStorage[e])),i.log.debug(`Offline storage for '${e}' product: ${JSON.stringify(t.offlineStorage[e])}.`)}catch(n){this.offlineStorageDeferred.fail(new f.TwilsockError(`Failed to parse offline storage for ${e} ${JSON.stringify(t.offlineStorage[e])}. ${n}.`))}else this.offlineStorageDeferred.fail(new f.TwilsockError(`No offline storage id for '${e}' product: ${JSON.stringify(t.offlineStorage)}`));else this.offlineStorageDeferred.fail(new f.TwilsockError("No offline storage id"))}storageId(){return this.offlineStorageDeferred.promise}get isConnected(){return this.channel.isConnected}get state(){return this.channel.state}async updateToken(e){if(i.log.trace(`updating token '${e}'`),this.config.token!==e)return this.config.updateToken(e),this.channel.updateToken(e)}setNotificationsContext(e,t){this.registrations.setNotificationsContext(e,t)}removeNotificationsContext(e){this.registrations.removeNotificationsContext(e)}connect(){return this.channel.connect()}disconnect(){return this.telemetryTracker.sendTelemetry(m.EventSendingLimitation.AnyEventsIncludingUnfinished),this.channel.disconnect()}get(e,t,n){return this.telemetryTracker.sendTelemetry(m.EventSendingLimitation.AnyEvents),this.upstream.send("GET",e,t,void 0,n)}post(e,t,n,r){return this.telemetryTracker.sendTelemetry(m.EventSendingLimitation.AnyEvents),this.upstream.send("POST",e,t,n,r)}put(e,t,n,r){return this.telemetryTracker.sendTelemetry(m.EventSendingLimitation.AnyEvents),this.upstream.send("PUT",e,t,n,r)}delete(e,t,n){return this.telemetryTracker.sendTelemetry(m.EventSendingLimitation.AnyEvents),this.upstream.send("DELETE",e,t,void 0,n)}addTelemetryEvent(e){this.telemetryTracker.addTelemetryEvent(e),this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}addPartialTelemetryEvent(e,t,n){this.telemetryTracker.addPartialEvent(e,t,n),n===m.TelemetryPoint.End&&this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}}t.TwilsockClient=v,t.Twilsock=v},faa1:function(e,t,n){"use strict";var r,i="object"===typeof Reflect?Reflect:null,s=i&&"function"===typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function o(e){console&&console.warn&&console.warn(e)}r=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function c(){c.init.call(this)}e.exports=c,e.exports.once=w,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var u=10;function l(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?c.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,s,a;if(l(n),s=e._events,void 0===s?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]),void 0===a)a=s[t]=n,++e._eventsCount;else if("function"===typeof a?a=s[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),i=d(e),i>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,o(c)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function m(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?b(i):v(i,i.length)}function y(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function g(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function b(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function w(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,s),r(n)}function s(){"function"===typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}_(e,t,s,{once:!0}),"error"!==t&&x(e,i,{once:!0})}))}function x(e,t,n){"function"===typeof e.on&&_(e,"error",t,n)}function _(e,t,n,r){if("function"===typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){r.once&&e.removeEventListener(t,i),n(s)}))}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},c.prototype.getMaxListeners=function(){return d(this)},c.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(void 0===c)return!1;if("function"===typeof c)s(c,this,t);else{var u=c.length,l=v(c,u);for(n=0;n<u;++n)s(l[n],this,t)}return!0},c.prototype.addListener=function(e,t){return f(this,e,t,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(e,t){return f(this,e,t,!0)},c.prototype.once=function(e,t){return l(t),this.on(e,p(this,e,t)),this},c.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,p(this,e,t)),this},c.prototype.removeListener=function(e,t){var n,r,i,s,o;if(l(t),r=this._events,void 0===r)return this;if(n=r[e],void 0===n)return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():g(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)i=s[r],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],"function"===typeof t)this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},c.prototype.listeners=function(e){return m(this,e,!0)},c.prototype.rawListeners=function(e){return m(this,e,!1)},c.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):y.call(e,t)},c.prototype.listenerCount=y,c.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},faac:function(e,t,n){(function(e,r){var i;
/*!
 * Platform.js v1.3.6
 * Copyright 2014-2020 Benjamin Tan
 * Copyright 2011-2013 John-David Dalton
 * Available under MIT license
 */(function(){"use strict";var s={function:!0,object:!0},o=s[typeof window]&&window||this,a=s[typeof t]&&t,c=s[typeof e]&&e&&!e.nodeType&&e,u=a&&c&&"object"==typeof r&&r;!u||u.global!==u&&u.window!==u&&u.self!==u||(o=u);var l=Math.pow(2,53)-1,d=/\bOpera/,f=Object.prototype,h=f.hasOwnProperty,p=f.toString;function m(e){return e=String(e),e.charAt(0).toUpperCase()+e.slice(1)}function y(e,t,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),e=g(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]),e}function v(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&r>-1&&r<=l)while(++n<r)t(e[n],n,e);else b(e,t)}function g(e){return e=S(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:m(e)}function b(e,t){for(var n in e)h.call(e,n)&&t(e[n],n,e)}function w(e){return null==e?m(e):p.call(e).slice(8,-1)}function x(e,t){var n=null!=e?typeof e[t]:"number";return!/^(?:boolean|number|string|undefined)$/.test(n)&&("object"!=n||!!e[t])}function _(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function k(e,t){var n=null;return v(e,(function(r,i){n=t(n,r,i,e)})),n}function S(e){return String(e).replace(/^ +| +$/g,"")}function T(e){var t=o,n=e&&"object"==typeof e&&"String"!=w(e);n&&(t=e,e=null);var r=t.navigator||{},i=r.userAgent||"";e||(e=i);var s,a,c=n?!!r.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(p.toString()),u="Object",l=n?u:"ScriptBridgingProxyObject",f=n?u:"Environment",h=n&&t.java?"JavaPackage":w(t.java),m=n?u:"RuntimeObject",v=/\bJava/.test(h)&&t.java,E=v&&w(t.environment)==f,O=v?"a":"α",C=v?"b":"β",I=t.document||{},j=t.operamini||t.opera,P=d.test(P=n&&j?j["[[Class]]"]:w(j))?P:j=null,M=e,R=[],A=null,D=e==i,N=D&&j&&"function"==typeof j.version&&j.version(),L=$([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),U=z(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),F=G([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),B=W({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),q=V(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function $(t){return k(t,(function(t,n){return t||RegExp("\\b"+(n.pattern||_(n))+"\\b","i").exec(e)&&(n.label||n)}))}function W(t){return k(t,(function(t,n,r){return t||(n[F]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(F)]||RegExp("\\b"+_(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r}))}function z(t){return k(t,(function(t,n){return t||RegExp("\\b"+(n.pattern||_(n))+"\\b","i").exec(e)&&(n.label||n)}))}function V(t){return k(t,(function(t,n){var r=n.pattern||_(n);return!t&&(t=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=y(t,r,n.label||n)),t}))}function G(t){return k(t,(function(t,n){var r=n.pattern||_(n);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=g(t[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t}))}function H(t){return k(t,(function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null}))}function J(){return this.description||""}if(L&&(L=[L]),/\bAndroid\b/.test(q)&&!F&&(s=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(e))&&(F=S(s[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),B&&!F?F=G([B]):B&&F&&(F=F.replace(RegExp("^("+_(B)+")[-_.\\s]","i"),B+" ").replace(RegExp("^("+_(B)+")[-_.]?(\\w)","i"),B+" $2")),(s=/\bGoogle TV\b/.exec(F))&&(F=s[0]),/\bSimulator\b/i.test(e)&&(F=(F?F+" ":"")+"Simulator"),"Opera Mini"==U&&/\bOPiOS\b/.test(e)&&R.push("running in Turbo/Uncompressed mode"),"IE"==U&&/\blike iPhone OS\b/.test(e)?(s=T(e.replace(/like iPhone OS/,"")),B=s.manufacturer,F=s.product):/^iP/.test(F)?(U||(U="Safari"),q="iOS"+((s=/ OS ([\d_]+)/i.exec(e))?" "+s[1].replace(/_/g,"."):"")):"Konqueror"==U&&/^Linux\b/i.test(q)?q="Kubuntu":B&&"Google"!=B&&(/Chrome/.test(U)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(F))||/\bAndroid\b/.test(q)&&/^Chrome/.test(U)&&/\bVersion\//i.test(e)?(U="Android Browser",q=/\bAndroid\b/.test(q)?q:"Android"):"Silk"==U?(/\bMobi/i.test(e)||(q="Android",R.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&R.unshift("accelerated")):"UC Browser"==U&&/\bUCWEB\b/.test(e)?R.push("speed mode"):"PaleMoon"==U&&(s=/\bFirefox\/([\d.]+)\b/.exec(e))?R.push("identifying as Firefox "+s[1]):"Firefox"==U&&(s=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(q||(q="Firefox OS"),F||(F=s[1])):!U||(s=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(U))?(U&&!F&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(s+"/")+8))&&(U=null),(s=F||B||q)&&(F||B||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(q))&&(U=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(q)?q:s)+" Browser")):"Electron"==U&&(s=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&R.push("Chromium "+s),N||(N=H(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",_(U),"(?:Firefox|Minefield|NetFront)"])),(s=("iCab"==L&&parseFloat(N)>3?"WebKit":/\bOpera\b/.test(U)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(L)&&"WebKit"||!L&&/\bMSIE\b/i.test(e)&&("Mac OS"==q?"Tasman":"Trident")||"WebKit"==L&&/\bPlayStation\b(?! Vita\b)/i.test(U)&&"NetFront")&&(L=[s]),"IE"==U&&(s=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(U+=" Mobile",q="Windows Phone "+(/\+$/.test(s)?s:s+".x"),R.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(U="IE Mobile",q="Windows Phone 8.x",R.unshift("desktop mode"),N||(N=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=U&&"Trident"==L&&(s=/\brv:([\d.]+)/.exec(e))&&(U&&R.push("identifying as "+U+(N?" "+N:"")),U="IE",N=s[1]),D){if(x(t,"global"))if(v&&(s=v.lang.System,M=s.getProperty("os.arch"),q=q||s.getProperty("os.name")+" "+s.getProperty("os.version")),E){try{N=t.require("ringo/engine").version.join("."),U="RingoJS"}catch(Q){(s=t.system)&&s.global.system==t.system&&(U="Narwhal",q||(q=s[0].os||null))}U||(U="Rhino")}else"object"==typeof t.process&&!t.process.browser&&(s=t.process)&&("object"==typeof s.versions&&("string"==typeof s.versions.electron?(R.push("Node "+s.versions.node),U="Electron",N=s.versions.electron):"string"==typeof s.versions.nw&&(R.push("Chromium "+N,"Node "+s.versions.node),U="NW.js",N=s.versions.nw)),U||(U="Node.js",M=s.arch,q=s.platform,N=/[\d.]+/.exec(s.version),N=N?N[0]:null));else w(s=t.runtime)==l?(U="Adobe AIR",q=s.flash.system.Capabilities.os):w(s=t.phantom)==m?(U="PhantomJS",N=(s=s.version||null)&&s.major+"."+s.minor+"."+s.patch):"number"==typeof I.documentMode&&(s=/\bTrident\/(\d+)/i.exec(e))?(N=[N,I.documentMode],(s=+s[1]+4)!=N[1]&&(R.push("IE "+N[1]+" mode"),L&&(L[1]=""),N[1]=s),N="IE"==U?String(N[1].toFixed(1)):N[0]):"number"==typeof I.documentMode&&/^(?:Chrome|Firefox)\b/.test(U)&&(R.push("masking as "+U+" "+N),U="IE",N="11.0",L=["Trident"],q="Windows");q=q&&g(q)}if(N&&(s=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(N)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(D&&r.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(A=/b/i.test(s)?"beta":"alpha",N=N.replace(RegExp(s+"\\+?$"),"")+("beta"==A?C:O)+(/\d+\+?/.exec(s)||"")),"Fennec"==U||"Firefox"==U&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(q))U="Firefox Mobile";else if("Maxthon"==U&&N)N=N.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(F))"Xbox 360"==F&&(q=null),"Xbox 360"==F&&/\bIEMobile\b/.test(e)&&R.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(U)&&(!U||F||/Browser|Mobi/.test(U))||"Windows CE"!=q&&!/Mobi/i.test(e))if("IE"==U&&D)try{null===t.external&&R.unshift("platform preview")}catch(Q){R.unshift("embedded")}else(/\bBlackBerry\b/.test(F)||/\bBB10\b/.test(e))&&(s=(RegExp(F.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||N)?(s=[s,/BB10/.test(e)],q=(s[1]?(F=null,B="BlackBerry"):"Device Software")+" "+s[0],N=null):this!=b&&"Wii"!=F&&(D&&j||/Opera/.test(U)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==U&&/\bOS X (?:\d+\.){2,}/.test(q)||"IE"==U&&(q&&!/^Win/.test(q)&&N>5.5||/\bWindows XP\b/.test(q)&&N>8||8==N&&!/\bTrident\b/.test(e)))&&!d.test(s=T.call(b,e.replace(d,"")+";"))&&s.name&&(s="ing as "+s.name+((s=s.version)?" "+s:""),d.test(U)?(/\bIE\b/.test(s)&&"Mac OS"==q&&(q=null),s="identify"+s):(s="mask"+s,U=P?g(P.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(s)&&(q=null),D||(N=null)),L=["Presto"],R.push(s));else U+=" Mobile";(s=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(s=[parseFloat(s.replace(/\.(\d)$/,".0$1")),s],"Safari"==U&&"+"==s[1].slice(-1)?(U="WebKit Nightly",A="alpha",N=s[1].slice(0,-1)):N!=s[1]&&N!=(s[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(N=null),s[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(e)||0)[1],537.36==s[0]&&537.36==s[2]&&parseFloat(s[1])>=28&&"WebKit"==L&&(L=["Blink"]),D&&(c||s[1])?(L&&(L[1]="like Chrome"),s=s[1]||(s=s[0],s<530?1:s<532?2:s<532.05?3:s<533?4:s<534.03?5:s<534.07?6:s<534.1?7:s<534.13?8:s<534.16?9:s<534.24?10:s<534.3?11:s<535.01?12:s<535.02?"13+":s<535.07?15:s<535.11?16:s<535.19?17:s<536.05?18:s<536.1?19:s<537.01?20:s<537.11?"21+":s<537.13?23:s<537.18?24:s<537.24?25:s<537.36?26:"Blink"!=L?"27":"28")):(L&&(L[1]="like Safari"),s=s[0],s=s<400?1:s<500?2:s<526?3:s<533?4:s<534?"4+":s<535?5:s<537?6:s<538?7:s<601?8:s<602?9:s<604?10:s<606?11:s<608?12:"12"),L&&(L[1]+=" "+(s+="number"==typeof s?".x":/[.+]/.test(s)?"":"+")),"Safari"==U&&(!N||parseInt(N)>45)?N=s:"Chrome"==U&&/\bHeadlessChrome/i.test(e)&&R.unshift("headless")),"Opera"==U&&(s=/\bzbov|zvav$/.exec(q))?(U+=" ",R.unshift("desktop mode"),"zvav"==s?(U+="Mini",N=null):U+="Mobile",q=q.replace(RegExp(" *"+s+"$"),"")):"Safari"==U&&/\bChrome\b/.exec(L&&L[1])?(R.unshift("desktop mode"),U="Chrome Mobile",N=null,/\bOS X\b/.test(q)?(B="Apple",q="iOS 4.3+"):q=null):/\bSRWare Iron\b/.test(U)&&!N&&(N=H("Chrome")),N&&0==N.indexOf(s=/[\d.]+$/.exec(q))&&e.indexOf("/"+s+"-")>-1&&(q=S(q.replace(s,""))),q&&-1!=q.indexOf(U)&&!RegExp(U+" OS").test(q)&&(q=q.replace(RegExp(" *"+_(U)+" *"),"")),L&&!/\b(?:Avant|Nook)\b/.test(U)&&(/Browser|Lunascape|Maxthon/.test(U)||"Safari"!=U&&/^iOS/.test(q)&&/\bSafari\b/.test(L[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(U)&&L[1])&&(s=L[L.length-1])&&R.push(s),R.length&&(R=["("+R.join("; ")+")"]),B&&F&&F.indexOf(B)<0&&R.push("on "+B),F&&R.push((/^on /.test(R[R.length-1])?"":"on ")+F),q&&(s=/ ([\d.+]+)$/.exec(q),a=s&&"/"==q.charAt(q.length-s[0].length-1),q={architecture:32,family:s&&!a?q.replace(s[0],""):q,version:s?s[1]:null,toString:function(){var e=this.version;return this.family+(e&&!a?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(s=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(M))&&!/\bi686\b/i.test(M)?(q&&(q.architecture=64,q.family=q.family.replace(RegExp(" *"+s),"")),U&&(/\bWOW64\b/i.test(e)||D&&/\w(?:86|32)$/.test(r.cpuClass||r.platform)&&!/\bWin64; x64\b/i.test(e))&&R.unshift("32-bit")):q&&/^OS X/.test(q.family)&&"Chrome"==U&&parseFloat(N)>=39&&(q.architecture=64),e||(e=null);var K={};return K.description=e,K.layout=L&&L[0],K.manufacturer=B,K.name=U,K.prerelease=A,K.product=F,K.ua=e,K.version=U&&N,K.os=q||{architecture:null,family:null,version:null,toString:function(){return"null"}},K.parse=T,K.toString=J,K.version&&R.unshift(N),K.name&&R.unshift(U),q&&U&&(q!=String(q).split(" ")[0]||q!=U.split(" ")[0]&&!F)&&R.push(F?"("+q+")":"on "+q),R.length&&(K.description=R.join(" ")),K}var E=T();o.platform=E,i=function(){return E}.call(t,n,t,e),void 0===i||(e.exports=i)}).call(this)}).call(this,n("62e4")(e),n("c8ba"))},fae9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n("6c4f");t.Retrier=r.Retrier;const i=n("8653");t.Backoff=i.Backoff,t.default=r.Retrier},fb6a:function(e,t,n){"use strict";var r=n("23e7"),i=n("861d"),s=n("e8b5"),o=n("23cb"),a=n("50c4"),c=n("fc6a"),u=n("8418"),l=n("b622"),d=n("1dde"),f=d("slice"),h=l("species"),p=[].slice,m=Math.max;r({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var n,r,l,d=c(this),f=a(d.length),y=o(e,f),v=o(void 0===t?f:t,f);if(s(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!s(n.prototype)?i(n)&&(n=n[h],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return p.call(d,y,v);for(r=new(void 0===n?Array:n)(m(v-y,0)),l=0;y<v;y++,l++)y in d&&u(r,l,d[y]);return r.length=l,r}})},fc6a:function(e,t,n){var r=n("44ad"),i=n("1d80");e.exports=function(e){return r(i(e))}},fcbb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Notifications=void 0;const r=n("981f");Object.defineProperty(t,"Notifications",{enumerable:!0,get:function(){return r.Client}})},fce3:function(e,t,n){var r=n("d039");e.exports=r((function(){var e=RegExp(".","string".charAt(0));return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,n){var r=n("4930");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(e,t,n){var r=n("da84");e.exports=r.Promise},ff63:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t,n,r){this.prevToken=n,this.nextToken=r,this.items=e,this.source=t}get hasNextPage(){return!!this.nextToken}get hasPrevPage(){return!!this.prevToken}async nextPage(){if(!this.hasNextPage)throw new Error("No next page");return this.source(this.nextToken)}async prevPage(){if(!this.hasPrevPage)throw new Error("No previous page");return this.source(this.prevToken)}}t.Paginator=r}}]);
//# sourceMappingURL=chunk-vendors.c237b7ae.js.map